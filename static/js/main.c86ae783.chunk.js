(this["webpackJsonptopola-viewer-modded"]=this["webpackJsonptopola-viewer-modded"]||[]).push([[0],{100:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return y})),n.d(t,"b",(function(){return I})),n.d(t,"a",(function(){return w}));var r=n(7),i=n(10),a=n.n(i),o=n(30),s=n(32),c=n(27),d=n(25),u=n(131),l=n(372),f=n.n(l);function h(e,t){return{id:t&&e.indis.some((function(e){return e.id===t.id}))?t.id:e.indis[0].id,generation:(null===t||void 0===t?void 0:t.generation)||0}}function p(e,t,n){var r=Object(d.a)(e,n||new Map),i=JSON.stringify(r);try{sessionStorage.setItem(t,i)}catch(a){console.warn("Failed to store data in session storage: "+a)}return r}function g(e){return m.apply(this,arguments)}function m(){return(m=Object(c.a)(a.a.mark((function t(n){var i,o,s,c,d,u,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=f.a,t.t1=e,t.next=4,n.arrayBuffer();case 4:t.t2=t.sent,t.t3=t.t1.from.call(t.t1,t.t2),i=new t.t0(t.t3),o=i.getEntries(),s=void 0,c=new Map,d=Object(r.a)(o);try{for(d.s();!(u=d.n()).done;)(l=u.value).entryName.endsWith(".ged")?s?console.warn("Multiple GEDCOM files found in zip archive."):s=l.getData().toString():c.set(l.entryName,URL.createObjectURL(new Blob([l.getData()])))}catch(a){d.e(a)}finally{d.f()}if(s){t.next=14;break}throw new Error("GEDCOM file not found in zip archive.");case 14:return t.abrupt("return",{gedcom:s,images:c});case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(e){return O.apply(this,arguments)}function O(){return(O=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.slice(0,2).text();case 2:if("PK"!==e.sent){e.next=5;break}return e.abrupt("return",g(t));case 5:return e.next=7,t.text();case 7:return e.t0=e.sent,e.t1=new Map,e.abrupt("return",{gedcom:e.t0,images:e.t1});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return j.apply(this,arguments)}function j(){return(j=Object(c.a)(a.a.mark((function e(t,n){var r,i,o,s,c,d,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=sessionStorage.getItem(t))){e.next=4;break}return e.abrupt("return",JSON.parse(r));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn("Failed to load data from session storage: "+e.t0);case 9:return(i=t.match(/https:\/\/drive\.google\.com\/file\/d\/(.*)\/.*/))&&(t="https://drive.google.com/uc?id=".concat(i[1],"&export=download")),(o=t.match(/https:\/\/drive\.google\.com\/open\?id=([^&]*)&?.*/))&&(t="https://drive.google.com/uc?id=".concat(o[1],"&export=download")),s=n?"https://topolaproxy.bieda.it/"+t:t,e.next=16,window.fetch(s);case 16:if(200===(c=e.sent).status){e.next=19;break}throw new Error(c.statusText);case 19:return e.t1=b,e.next=22,c.blob();case 22:return e.t2=e.sent,e.next=25,(0,e.t1)(e.t2);case 25:return d=e.sent,u=d.gedcom,l=d.images,e.abrupt("return",p(u,t,l));case 29:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function y(e,t,n){return x.apply(this,arguments)}function x(){return(x=Object(c.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(i=sessionStorage.getItem(t))){e.next=4;break}return e.abrupt("return",JSON.parse(i));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn("Failed to load data from session storage: "+e.t0);case 9:if(n){e.next=11;break}throw new u.a("ERROR_LOADING_UPLOADED_FILE","Error loading data. Please upload your file again.");case 11:return e.abrupt("return",p(n,t,r));case 12:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var I=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"isNewData",value:function(e,t,n){return e.spec.hash!==t.spec.hash}},{key:"loadData",value:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(t.spec.hash,t.spec.gedcom,t.spec.images);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),w=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"isNewData",value:function(e,t,n){return e.spec.url!==t.spec.url}},{key:"loadData",value:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(t.spec.url,t.spec.handleCors);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}]),e}()}).call(this,n(23).Buffer)},120:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ChartUtil=t.getChartInfoWithoutMargin=t.getChartInfo=t.linkId=t.V_SPACING=t.H_SPACING=void 0;var r=n(39),i=n(620),a=n(125);n(110),t.H_SPACING=15,t.V_SPACING=30;var o=200,s=500;function c(e){if(!e.parent)return e.id+":A";var t=e.data.generation>e.parent.data.generation?[e.data,e.parent.data]:[e.parent.data,e.data],n=t[0],r=t[1];return n.additionalMarriage?n.id+":A":r.id+":"+n.id}t.linkId=c,t.getChartInfo=function(e){var t=a.min(e,(function(e){return e.x-e.data.width/2}))-15,n=a.min(e,(function(e){return e.y-e.data.height/2}))-15;return{size:[a.max(e,(function(e){return e.x+e.data.width/2}))+15-t,a.max(e,(function(e){return e.y+e.data.height/2}))+15-n],origin:[-t,-n]}},t.getChartInfoWithoutMargin=function(e){var t=a.min(e,(function(e){return e.x-e.data.width/2})),n=a.min(e,(function(e){return e.y-e.data.height/2}));return{size:[a.max(e,(function(e){return e.x+e.data.width/2}))-t,a.max(e,(function(e){return e.y+e.data.height/2}))-n],origin:[-t,-n]}};var d=function(){function e(e){this.options=e}return e.prototype.linkHorizontal=function(e,t){var n=this.options.renderer.getFamilyAnchor(e.data),r=e.id===t.data.spouseParentNodeId?this.options.renderer.getSpouseAnchor(t.data):this.options.renderer.getIndiAnchor(t.data),i=[e.x+n[0],e.y+n[1]],a=i[0],o=i[1],s=[t.x+r[0],t.y+r[1]],c=s[0],d=s[1],u=(e.x+e.data.width/2+t.x-t.data.width/2)/2;return"M "+a+" "+o+"\n            L "+u+" "+o+",\n              "+u+" "+d+",\n              "+c+" "+d},e.prototype.linkVertical=function(e,n){var r=this.options.renderer.getFamilyAnchor(e.data),i=e.id===n.data.spouseParentNodeId?this.options.renderer.getSpouseAnchor(n.data):this.options.renderer.getIndiAnchor(n.data),a=[e.x+r[0],e.y+r[1]],o=a[0],s=a[1],c=[n.x+i[0],n.y+i[1]],d=c[0],u=c[1],l=e.y+e.data.height/2+t.V_SPACING/2;return"M "+o+" "+s+"\n            L "+o+" "+l+",\n              "+d+" "+l+",\n              "+d+" "+u},e.prototype.linkAdditionalMarriage=function(e){var t=e.parent.children.findIndex((function(t){return t.data.id===e.data.id})),n=e.parent.children[t-1],r=this.options.renderer.getIndiAnchor(e.data),i=this.options.renderer.getIndiAnchor(n.data),a=[e.x+r[0],e.y+r[1]],o=a[0],s=a[1],c=[n.x+i[0],n.y+i[1]];return"M "+o+", "+s+"\n            L "+c[0]+", "+c[1]},e.prototype.updateSvgDimensions=function(e){var t=r.select(this.options.svgSelector).select("g");(this.options.animate?t.transition().delay(o).duration(s):t).attr("transform","translate("+e.origin[0]+", "+e.origin[1]+")")},e.prototype.layOutChart=function(e,n){var o=this;void 0===n&&(n={});var s=r.select(this.options.svgSelector);s.select("style").empty()&&s.append("style").text(this.options.renderer.getCss()),e.each((function(e){e.data.generation=e.depth*(n.flipVertically?-1:1)+(o.options.baseGeneration||0)})),this.options.renderer.updateNodes(e.descendants());var c=new Map;e.each((function(e){var t=e.depth,n=a.max([o.options.horizontal?e.data.width:e.data.height,c.get(t)]);c.set(t,n)})),e.each((function(e){var t=c.get(e.depth);o.options.horizontal?e.data.width=t:e.data.height=t}));var d=void 0!==n.vSpacing?n.vSpacing:t.V_SPACING,u=void 0!==n.hSpacing?n.hSpacing:t.H_SPACING,l=i.flextree().nodeSize((function(e){if(o.options.horizontal){var t=a.max(e.children||[],(function(e){return e.data.width}))||0;return[e.data.height,(t+e.data.width)/2+d]}var n=a.max(e.children||[],(function(e){return e.data.height}))||0;return[e.data.width,(n+e.data.height)/2+d]})).spacing((function(){return u}))(e).descendants();return l.forEach((function(e){var t;n.flipVertically&&(e.y=-e.y),o.options.horizontal&&(t=[e.y,e.x],e.x=t[0],e.y=t[1])})),l},e.prototype.renderChart=function(e){var t=this.getSvgForRendering(),n=this.renderNodes(e,t),r=this.renderLinks(e,t);return Promise.all([n,r])},e.prototype.renderNodes=function(e,t){var n=this;return new Promise((function(r){var i=t.select("g").selectAll("g.node").data(e,(function(e){return e.id})),a=i.enter().append("g"),c=i.exit().size()+i.size()+a.size(),d=function(){0===--c&&r()};n.options.animate&&0!==c||r(),a.merge(i).attr("class",(function(e){return"node generation"+e.data.generation})),a.attr("transform",(function(e){return"translate("+(e.x-e.data.width/2)+", "+(e.y-e.data.height/2)+")"})),n.options.animate&&a.style("opacity",0).transition().delay(700).duration(o).style("opacity",1).on("end",d),(n.options.animate?i.transition().delay(o).duration(s).on("end",d):i).attr("transform",(function(e){return"translate("+(e.x-e.data.width/2)+", "+(e.y-e.data.height/2)+")"})),n.options.renderer.render(a,i),n.options.animate?i.exit().transition().duration(o).style("opacity",0).remove().on("end",d):i.exit().remove()}))},e.prototype.renderLinks=function(e,t){var n=this;return new Promise((function(r){var i=function(e,t){if(t.data.additionalMarriage)return n.linkAdditionalMarriage(t);var r=e.data.generation>t.data.generation;return n.options.horizontal?r?n.linkHorizontal(t,e):n.linkHorizontal(e,t):r?n.linkVertical(t,e):n.linkVertical(e,t)},a=e.filter((function(e){return!!e.parent||e.data.additionalMarriage})),d=t.select("g").selectAll("path.link").data(a,c),u=d.enter().insert("path","g").attr("class",(function(e){return e.data.additionalMarriage?"link additional-marriage":"link"})).attr("d",(function(e){return i(e.parent,e)})),l=d.exit().size()+d.size()+u.size(),f=function(){0===--l&&r()};n.options.animate&&0!==l||r(),(n.options.animate?d.transition().delay(o).duration(s).on("end",f):d).attr("d",(function(e){return i(e.parent,e)})),n.options.animate&&u.style("opacity",0).transition().delay(900).duration(0).style("opacity",1).on("end",f),n.options.animate?d.exit().transition().duration(0).style("opacity",0).remove().on("end",f):d.exit().remove()}))},e.prototype.getSvgForRendering=function(){var e=r.select(this.options.svgSelector);return e.select("g").empty()&&e.append("g"),e},e}();t.ChartUtil=d},131:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(30),i=n(98),a=n(101),o=n(175),s=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(r.a)(this,n),(a=t.call(this,i)).code=e,a.args=o,a}return n}(Object(o.a)(Error))},164:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.IdGenerator=void 0;var n=function(){function e(){this.ids=new Map}return e.prototype.getId=function(e){if(this.ids.has(e)){var t=this.ids.get(e);return this.ids.set(e,t+1),e+":"+t}return this.ids.set(e,1),e},e}();t.IdGenerator=n},21:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.otherSideLinkType=t.LinkType=t.ChildNodes=void 0;var n,r=function(){function e(e){void 0===e&&(e={}),this.indiParents=[],this.indiSiblings=[],this.spouseParents=[],this.spouseSiblings=[],this.children=[],Object.assign(this,e)}return e.prototype.get=function(e){switch(e){case n.IndiParents:return this.indiParents;case n.IndiSiblings:return this.indiSiblings;case n.SpouseParents:return this.spouseParents;case n.SpouseSiblings:return this.spouseSiblings;case n.Children:return this.children;default:return null}},e.prototype.getAll=function(){return[].concat(this.indiSiblings,this.indiParents,this.children,this.spouseParents,this.spouseSiblings)},e.EMPTY=new e,e}();t.ChildNodes=r,function(e){e[e.IndiParents=0]="IndiParents",e[e.IndiSiblings=1]="IndiSiblings",e[e.SpouseParents=2]="SpouseParents",e[e.SpouseSiblings=3]="SpouseSiblings",e[e.Children=4]="Children"}(n=t.LinkType||(t.LinkType={})),t.otherSideLinkType=function(e){switch(e){case n.IndiParents:return n.Children;case n.IndiSiblings:return n.IndiSiblings;case n.SpouseParents:return n.Children;case n.SpouseSiblings:return n.IndiSiblings;case n.Children:return n.IndiParents;default:return null}}},228:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HierarchyFilter=void 0;var n=function(){function e(e){void 0===e&&(e={}),this.indiParents=!0,this.indiSiblings=!0,this.spouseParents=!0,this.spouseSiblings=!0,this.children=!0,this.modify(e)}return e.allAccepting=function(){return new e},e.allRejecting=function(){return(new e).modify({indiParents:!1,indiSiblings:!1,spouseParents:!1,spouseSiblings:!1,children:!1})},e.prototype.modify=function(e){return Object.assign(this,e),this},e}();t.HierarchyFilter=n},238:function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AncestorChart=t.getAncestorsTree=void 0;var i=n(120),a=n(264),o=n(164);t.getAncestorsTree=function(e){var t=r({},e),n=e.startIndi?e.data.getIndi(e.startIndi).getFamiliesAsSpouse():[];n.length&&(t.startFam=n[0],t.startIndi=void 0,e.data.getFam(n[0]).getMother()===e.startIndi&&(t.swapStartSpouses=!0));var i=new s(t).createHierarchy();return n.length>1&&i.children&&i.children.length>1&&(i.children.pop(),i.data.spouseParentNodeId=void 0),i};var s=function(){function e(e){this.options=e,this.util=new i.ChartUtil(e)}return e.prototype.createHierarchy=function(){var e,t,n=[],r=[],i=this.options.idGenerator||new o.IdGenerator;for(this.options.startIndi?(e=(t=this.options.data.getIndi(this.options.startIndi).getFamilyAsChild())?i.getId(t):void 0,t&&r.push({id:t,parentId:this.options.startIndi,family:{id:t}}),n.push({id:this.options.startIndi,indi:{id:this.options.startIndi},indiParentNodeId:e})):r.push({id:i.getId(this.options.startFam),family:{id:this.options.startFam}});r.length;){var s=r.pop(),c=this.options.data.getFam(s.family.id);if(c){var d=s.family.id===this.options.startFam&&this.options.swapStartSpouses?[c.getMother(),c.getFather()]:[c.getFather(),c.getMother()],u=d[0],l=d[1];(u||l)&&(l&&(s.spouse={id:l},(t=this.options.data.getIndi(l).getFamilyAsChild())&&(e=i.getId(t),s.spouseParentNodeId=e,r.push({id:e,parentId:s.id,family:{id:t}}))),u&&(s.indi={id:u},(t=this.options.data.getIndi(u).getFamilyAsChild())&&(e=i.getId(t),s.indiParentNodeId=e,r.push({id:e,parentId:s.id,family:{id:t}}))),n.push(s))}}return a.stratify()(n)},e.prototype.render=function(){var e=this.createHierarchy(),t=this.util.layOutChart(e,{flipVertically:!0}),n=this.util.renderChart(t),r=i.getChartInfo(t);return this.util.updateSvgDimensions(r),Object.assign(r,{animationPromise:n})},e}();t.AncestorChart=s},239:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getFamPositionHorizontal=t.getFamPositionVertical=t.CompositeRenderer=void 0;var r=n(125),i=function(){function e(e){this.options=e}return e.prototype.getPreferredFamSize=function(e){return[0,0]},e.prototype.setPreferredIndiSize=function(e){var t;e&&(t=this.getPreferredIndiSize(e.id),e.width=t[0],e.height=t[1])},e.prototype.updateNodes=function(e){var t=this,n=new Map;e.forEach((function(e){var i;t.setPreferredIndiSize(e.data.indi),t.setPreferredIndiSize(e.data.spouse);var a=e.data.family;a&&(i=t.getPreferredFamSize(a.id),a.width=i[0],a.height=i[1]);var o=e.depth,c=r.max([s(e.data,!!t.options.horizontal),n.get(o)]);n.set(o,c)})),e.forEach((function(e){var i;t.options.horizontal?(e.data.indi&&(e.data.indi.width=n.get(e.depth)),e.data.spouse&&(e.data.spouse.width=n.get(e.depth))):(e.data.indi&&(e.data.indi.height=n.get(e.depth)),e.data.spouse&&(e.data.spouse.height=n.get(e.depth)));var a=function(e,t){return s(e,t)+function(e,t){if(t)return e.family?e.family.width:0;return e.family?e.family.height:0}(e,t)}(e.data,!!t.options.horizontal),o=function(e,t){if(t)return(e.indi?e.indi.height:0)+(e.spouse?e.spouse.height:0);var n=(e.indi?e.indi.width:0)+(e.spouse?e.spouse.width:0);return r.max([n,e.family?e.family.width:0])}(e.data,!!t.options.horizontal);i=t.options.horizontal?[a,o]:[o,a],e.data.width=i[0],e.data.height=i[1]}))},e.prototype.getFamilyAnchor=function(e){if(this.options.horizontal){var t=-e.width/2+s(e,this.options.horizontal)/2,n=e.family?r.max([-o(e),0]):0;return[t,-(e.indi&&e.spouse?e.height/2-e.indi.height:0)+n]}var i=e.family?r.max([-a(e),0]):0;return[-(e.indi&&e.spouse?e.width/2-e.indi.width:0)+i,-e.height/2+s(e,this.options.horizontal)/2]},e.prototype.getSpouseAnchor=function(e){return this.options.horizontal?[-e.width/2+s(e,this.options.horizontal)/2,e.indi?e.indi.height/2:0]:[e.indi?e.indi.width/2:0,-e.height/2+s(e,!!this.options.horizontal)/2]},e.prototype.getIndiAnchor=function(e){return this.options.horizontal?[-e.width/2+s(e,this.options.horizontal)/2,e.spouse?-e.spouse.height/2:0]:[e.spouse?-e.spouse.width/2:0,-e.height/2+s(e,!!this.options.horizontal)/2]},e}();function a(e){var t=e.indi?e.indi.width:0,n=e.spouse?e.spouse.width:0,r=e.family.width;return!e.indi||!e.spouse||t+n<=r?(t+n-r)/2:r/2>=n?t+n-r:r/2>=t?0:t-r/2}function o(e){var t=e.indi?e.indi.height:0,n=e.spouse?e.spouse.height:0,r=e.family.height;return e.indi&&e.spouse?t-r/2:(t+n-r)/2}function s(e,t){return t?r.max([e.indi?e.indi.width:0,e.spouse?e.spouse.width:0]):r.max([e.indi?e.indi.height:0,e.spouse?e.spouse.height:0])}t.CompositeRenderer=i,t.getFamPositionVertical=a,t.getFamPositionHorizontal=o},240:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DescendantChart=t.layOutDescendants=t.DUMMY_ROOT_NODE_ID=void 0;var r=n(264),i=n(120),a=n(164);function o(e){if(e[0].id!==t.DUMMY_ROOT_NODE_ID)return e;var n=e.slice(1),r=-n[0].x,i=-n[0].y;return n.forEach((function(e){e.parent&&e.parent.id===t.DUMMY_ROOT_NODE_ID&&!e.data.additionalMarriage&&(e.parent=null),e.x+=r,e.y+=i,e.data.generation--})),n}t.DUMMY_ROOT_NODE_ID="DUMMY_ROOT_NODE",t.layOutDescendants=function(e,t){void 0===t&&(t={});var n=new s(e).createHierarchy();return o(new i.ChartUtil(e).layOutChart(n,t))};var s=function(){function e(e){this.options=e,this.util=new i.ChartUtil(e)}return e.prototype.getNodes=function(e){var t=this,n=this.options.data.getIndi(e).getFamiliesAsSpouse();if(!n.length)return[{id:e,indi:{id:e}}];var r=n.map((function(n){var r={id:n,indi:{id:e},family:{id:n}},i=t.options.data.getFam(n),a=function(e,t){return t.getFather()===e?t.getMother():t.getFather()}(e,i);return a&&(r.spouse={id:a}),r}));return r.slice(1).forEach((function(e){e.additionalMarriage=!0})),r},e.prototype.getFamNode=function(e){var t={id:e,family:{id:e}},n=this.options.data.getFam(e),r=n.getFather();r&&(t.indi={id:r});var i=n.getMother();return i&&(t.spouse={id:i}),t},e.prototype.createHierarchy=function(){var e=this,n=[],i=this.options.startIndi?this.getNodes(this.options.startIndi):[this.getFamNode(this.options.startFam)],o=this.options.idGenerator||new a.IdGenerator;if(i.forEach((function(e){return e.id=o.getId(e.id)})),i.length>1){var s={id:t.DUMMY_ROOT_NODE_ID,height:1,width:1};n.push(s),i.forEach((function(e){return e.parentId=s.id}))}n.push.apply(n,i);var c=[];i.forEach((function(e){e.family&&c.push(e)}));for(var d=function(){var t=c.pop();u.options.data.getFam(t.family.id).getChildren().forEach((function(r){var i=e.getNodes(r);i.forEach((function(e){e.parentId=t.id,e.family&&(e.id=""+o.getId(e.family.id),c.push(e))})),n.push.apply(n,i)}))},u=this;c.length;)d();return r.stratify()(n)},e.prototype.render=function(){var e=this.createHierarchy(),t=o(this.util.layOutChart(e)),n=this.util.renderChart(t),r=i.getChartInfo(t);return this.util.updateSvgDimensions(r),Object.assign(r,{animationPromise:n})},e}();t.DescendantChart=s},25:function(e,t,n){"use strict";n.d(t,"i",(function(){return s})),n.d(t,"h",(function(){return c})),n.d(t,"g",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return j})),n.d(t,"f",(function(){return y})),n.d(t,"d",(function(){return x})),n.d(t,"e",(function(){return I}));var r=n(265),i=n(131),a=n(41),o=n(65);function s(e){return e.substring(1,e.length-1)}function c(e){var t=new Map;return e.indis.forEach((function(e){t.set(e.id,e)})),t}function d(e){var t=new Map;return e.fams.forEach((function(e){t.set(e.id,e)})),t}function u(e){var t=e.find((function(e){return"HEAD"===e.tag})),n={},r={},i={};return e.forEach((function(e){"INDI"===e.tag?n[s(e.pointer)]=e:"FAM"===e.tag?r[s(e.pointer)]=e:e.pointer&&(i[s(e.pointer)]=e)})),{head:t,indis:n,fams:r,other:i}}function l(e,t){return e<t?-1:e>t?1:0}function f(e){var t=function(e){var t=c(e);return function(e,n){var r=t.get(e),i=t.get(n);return Object(o.a)(r&&r.birth,i&&i.birth)||l(e,n)}}(e),n=e.fams.map((function(e){return function(e,t){if(!e.children)return e;var n=e.children.sort(t);return Object.assign({},e,{children:n})}(e,t)}));return Object.assign({},e,{fams:n})}function h(e){var t=function(e){var t=d(e);return function(e,n){var r=t.get(e),i=t.get(n);return Object(o.a)(r&&r.marriage,i&&i.marriage)||l(e,n)}}(e),n=e.indis.map((function(e){return function(e,t){if(!e.fams)return e;var n=e.fams.sort(t);return Object.assign({},e,{fams:n})}(e,t)}));return Object.assign({},e,{indis:n})}function p(e,t,n){if(e.data){var r=n(t)[s(e.data)];if(r)return r}return e}function g(e){var t=[e.data];return e.tree.forEach((function(e){if("CONC"===e.tag&&e.data){var n=t.length-1;t[n]+=e.data}else"CONT"===e.tag&&e.data&&t.push(e.data)})),t}function m(e){return h(f(e))}var b=[".jpg",".jpeg",".png",".gif"];function O(e){var t=e.toLowerCase();return b.some((function(e){return t.endsWith(e)}))}function v(e,t){var n=e.indis.map((function(e){return function(e,t){if(!e.images||0===e.images.length)return e;var n=[];return e.images.forEach((function(e){var r=e.url.replaceAll("\\","/"),i=r.match(/[^/]*$/)[0];t.has(r)?n.push({url:t.get(r),title:e.title}):t.has(i)?n.push({url:t.get(i),title:e.title}):e.url.startsWith("http")&&O(e.url)&&n.push(e)})),Object.assign({},e,{images:n})}(e,t)}));return Object.assign({},e,{indis:n})}function j(e,t){var n=Object(r.parse)(e),o=Object(a.gedcomEntriesToJson)(n);if(!o||!o.indis||!o.indis.length||!o.fams||!o.fams.length)throw new i.a("GEDCOM_READ_FAILED","Failed to read GEDCOM file");return{chartData:v(m(o),t),gedcom:u(n)}}function y(e){var t=e.tree.filter((function(e){return"NAME"===e.tag})),n=t.find((function(e){return 0===e.tree.filter((function(e){return"TYPE"===e.tag&&"married"===e.data})).length}))||t[0];return null===n||void 0===n?void 0:n.data.replace(/\//g,"")}function x(e){var t,n,r=null===e||void 0===e||null===(t=e.tree.find((function(e){return"TITL"===e.tag})))||void 0===t?void 0:t.data,i=null===e||void 0===e||null===(n=e.tree.find((function(e){return"FORM"===e.tag})))||void 0===n?void 0:n.data;return r&&i&&r+"."+i}function I(e){return e.tree.find((function(e){return"FILE"===e.tag&&e.data.startsWith("http")&&O(e.data)}))}},266:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.points2pathd=t.zip=t.last=t.nonEmpty=void 0,t.nonEmpty=function(e){return!(!e||!e.length)},t.last=function(e){return e[e.length-1]},t.zip=function(e,t){return e.map((function(e,n){return[e,t[n]]}))},t.points2pathd=function(e){for(var t="M "+e[0].x+" "+e[0].y+" L",n=0,r=e.slice(1);n<r.length;n++){var i=r[n];t+=" "+i.x+" "+i.y}return t}},294:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.JsonDataProvider=void 0;var n=function(){function e(e){this.json=e}return e.prototype.getId=function(){return this.json.id},e.prototype.getFamiliesAsSpouse=function(){return this.json.fams||[]},e.prototype.getFamilyAsChild=function(){return this.json.famc||null},e.prototype.getFirstName=function(){return this.json.firstName||null},e.prototype.getLastName=function(){return this.json.lastName||null},e.prototype.getBirthDate=function(){return this.json.birth||null},e.prototype.getMaidenName=function(){return this.json.maidenName||null},e.prototype.getNumberOfChildren=function(){return this.json.numberOfChildren||null},e.prototype.getNumberOfMarriages=function(){return this.json.numberOfMarriages||null},e.prototype.getBirthPlace=function(){return this.json.birth&&this.json.birth.place||null},e.prototype.getDeathDate=function(){return this.json.death||null},e.prototype.getDeathPlace=function(){return this.json.death&&this.json.death.place||null},e.prototype.isConfirmedDeath=function(){return!!this.json.death&&!!this.json.death.confirmed},e.prototype.getSex=function(){return this.json.sex||null},e.prototype.getImageUrl=function(){return this.json.images&&this.json.images.length>0&&this.json.images[0].url||null},e.prototype.getImages=function(){return this.json.images||null},e.prototype.getNotes=function(){return this.json.notes||null},e.prototype.getEvents=function(){return this.json.events||null},e.prototype.showId=function(){return!this.json.hideId},e.prototype.showSex=function(){return!this.json.hideSex},e}(),r=function(){function e(e){this.json=e}return e.prototype.getId=function(){return this.json.id},e.prototype.getFather=function(){return this.json.husb||null},e.prototype.getMother=function(){return this.json.wife||null},e.prototype.getChildren=function(){return this.json.children||[]},e.prototype.getMarriageDate=function(){return this.json.marriage||null},e.prototype.getMarriagePlace=function(){return this.json.marriage&&this.json.marriage.place||null},e}(),i=function(){function e(e){var t=this;this.json=e,this.indis=new Map,this.fams=new Map,e.indis.forEach((function(e){return t.indis.set(e.id,new n(e))})),e.fams.forEach((function(e){return t.fams.set(e.id,new r(e))}))}return e.prototype.getIndi=function(e){return this.indis.get(e)||null},e.prototype.getFam=function(e){return this.fams.get(e)||null},e}();t.JsonDataProvider=i},295:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatDateOrRange=t.formatDate=void 0;var n=new Map([[1,"Jan"],[2,"Feb"],[3,"Mar"],[4,"Apr"],[5,"May"],[6,"Jun"],[7,"Jul"],[8,"Aug"],[9,"Sep"],[10,"Oct"],[11,"Nov"],[12,"Dec"]]),r=new Map([["cs",new Map([["cal","vypo\u010dt."],["abt","o"],["est","ocenil"],["before","p\u0159ed"],["after","po"]])],["de",new Map([["cal","errech."],["abt","etwa"],["est","gesch\xe4t."],["before","vor"],["after","nach"]])],["fr",new Map([["cal","calc."],["abt","vers"],["est","est."],["before","avant"],["after","apr\xe8s"]])],["it",new Map([["cal","calc."],["abt","circa il"],["est","stim."],["before","prima del"],["after","dopo del"]])],["pl",new Map([["cal","wyl."],["abt","ok."],["est","szac."],["before","przed"],["after","po"]])],["ru",new Map([["cal","\u0432\u044b\u0447."],["abt","\u043e\u043a."],["est","\u043e\u0446\u0435\u043d."],["before","\u0434\u043e"],["after","\u043f\u043e\u0441\u043b\u0435"]])]]),i=new Map;function a(e,t){if(!Intl||!Intl.DateTimeFormat)return n.get(e);var r=e+"|"+(t||"");if(i.has(r))return i.get(r);var a=new Intl.DateTimeFormat(t,{month:"short"}).format(new Date(2e3,e-1));return i.set(r,a),a}function o(e,t){var n=t&&t.split(/[-_]/)[0],i=n&&r.get(n);return i?i.get(e):e}function s(e,t,n,r){if(!e&&!t&&!n)return"";if(!Intl||!Intl.DateTimeFormat||!r||"en"===r)return[e,t&&a(t,r),n].join(" ");var i={day:e?"numeric":void 0,month:t?"short":void 0,year:n?"numeric":void 0};return new Intl.DateTimeFormat(r,i).format(new Date(null!==n&&void 0!==n?n:2e3,t?t-1:1,null!==e&&void 0!==e?e:1))}function c(e,t){return[e.qualifier&&o(e.qualifier,t),s(e.day,e.month,e.year,t),e.text].join(" ")}t.formatDate=c,t.formatDateOrRange=function(e,t){if(e.date)return c(e.date,t);if(!e.dateRange)return"";var n=e.dateRange.from&&c(e.dateRange.from),r=e.dateRange.to&&c(e.dateRange.to);return n&&r?n+" .. "+r:n?o("after",t)+" "+n:r?o("before",t)+" "+r:""}},363:function(e){e.exports=JSON.parse('{"menu.open":"\xd6ffnen","menu.open_file":"Datei \xf6ffnen","menu.load_from_url":"URL \xf6ffnen","menu.download":"Download","menu.pdf_file":"PDF-Datei","menu.png_file":"PNG-Datei","menu.svg_file":"SVG-Datei","menu.download_pdf":"PDF herunterladen","menu.download_png":"PNG herunterladen","menu.download_svg":"SVG herunterladen","menu.view":"Neuzentrierungsdiagramm","menu.github":"Projekt auf der GitHub-Website","menu.search.placeholder":"Person suchen","menu.search.no_results":"Keine Ergebnisse","load_from_url.title":"Von URL \xf6ffnen","load_from_url.comment":"Die Daten der angegebenen URL werden \xfcber den {link} -Dienst geladen, um CORS-Probleme zu vermeiden.","load_from_url.cancel":"Cancel","load_from_url.load":"\xd6ffnen","gedcom.ADOP":"Annahme","gedcom.BAPM":"Taufe","gedcom.BIRT":"Geburt","gedcom.BURI":"Beerdigung","gedcom.CENS":"Volksz\xe4hlung","gedcom.CHR":"Taufe","gedcom.DEAT":"Tod","gedcom.MARR":"Hochzeit","gedcom.MARS":"Ehevertrag","gedcom.ETHN":"ethnische Zugeh\xf6rigkeit","gedcom.TRIB":"Stamm","gedcom.LANG":"Sprache","gedcom.DIV":"Scheidung","gedcom.DSCR":"Beschreibung","gedcom.EMAIL":"E-Mail","gedcom.EVEN":"Ereignis","gedcom.OCCU":"Beruf","gedcom.RIN":"ID","gedcom.TITL":"Titel","gedcom.WWW":"Website","gedcom._UPD":"Zuletzt aktualisiert","gedcom.birth":"Geburtsname","gedcom.married":"Ehenamen","gedcom.maiden":"M\xe4dchenname","gedcom.aka":"Auch bekannt als","gedcom.languages":"Sprachen","date.between":"zwischen {from} und {to}","date.after":"after {from}","date.before":"before {to}","error.error":"Error","error.failed_pdf":"PDF konnte nicht erstellt werden. Versuchen Sie es erneut mit einem kleineren Diagramm oder laden Sie die SVG-Datei herunter.","error.failed_png":"Fehler beim Erstellen der PNG-Datei. Versuchen Sie es erneut mit einem kleineren Diagramm oder laden Sie die SVG-Datei herunter.","error.failed_to_load_file":"Fehler beim Laden der Datei","tab.info":"Info","tab.settings":"Einstellungen","config.colors":"Farben","config.colors.NO_COLOR":"keiner","config.colors.COLOR_BY_GENERATION":"nach Generation","config.colors.COLOR_BY_SEX":"nach Geschlecht","config.colors.COLOR_BY_TRIBE":"nach Stamm","config.tribe":"Stamm","config.tribe.SHOW":"anzeigen","config.tribe.HIDE":"verbergen","config.ids":"IDs","config.ids.SHOW":"anzeigen","config.ids.HIDE":"verbergen","config.sex":"Geschlecht","config.sex.SHOW":"anzeigen","config.sex.HIDE":"verbergen","name.unknown_name":"N.N.","extras.notes":"Anmerkungen","extras.images":"Bilder","extras.sources":"Quellen"}')},364:function(e){e.exports=JSON.parse('{"menu.open":"Ouvrir","menu.open_file":"Ouvrir le fichier","menu.load_from_url":"Ouvrir l\'URL","menu.download":"T\xe9l\xe9charger","menu.pdf_file":"Fichier PDF","menu.png_file":"Fichier PNG","menu.svg_file":"Fichier SVG","menu.download_pdf":"T\xe9l\xe9charger le PDF","menu.download_png":"T\xe9l\xe9charger PNG","menu.download_svg":"T\xe9l\xe9charger SVG","menu.view":"Recentrer graphique","menu.github":"Projet sur le site Web GitHub","menu.search.placeholder":"Rechercher une personne","menu.search.no_results":"Aucun r\xe9sultat","load_from_url.title":"Ouvrir depuis l\'URL","load_from_url.comment":"Les donn\xe9es de l\'URL donn\xe9e seront charg\xe9es via le service {link} pour \xe9viter les probl\xe8mes CORS.","load_from_url.cancel":"Annuler","load_from_url.load":"Ouvrir","gedcom.ADOP":"Adoption","gedcom.BAPM":"Bapt\xeame","gedcom.BIRT":"Naissance","gedcom.BURI":"Fun\xe9railles","gedcom.CENS":"Recensement","gedcom.CHR":"Bapt\xeame","gedcom.DEAT":"Mort","gedcom.MARR":"Mariage","gedcom.MARS":"R\xe8glement de mariage","gedcom.ETHN":"Appartenance ethnique","gedcom.TRIB":"Clan","gedcom.LANG":"Langue","gedcom.DIV":"Divorce","gedcom.DSCR":"Description","gedcom.EMAIL":"E-mail","gedcom.EVEN":"\xc9v\xe9nement","gedcom.OCCU":"Profession","gedcom.RIN":"ID","gedcom.TITL":"Titre","gedcom.WWW":"Site Web","gedcom._UPD":"Derni\xe8re mise \xe0 jour","gedcom.birth":"Nom de naissance","gedcom.married":"Nom marital","gedcom.maiden":"Nom de jeune fille","gedcom.aka":"Alias","gedcom.languages":"Langues","date.between":"entre {from} et {to}","date.after":"apr\xe8s {from}","date.before":"avant {to}","error.error":"Erreur","error.failed_pdf":"\xc9chec de la cr\xe9ation du PDF. R\xe9essayez avec un diagramme plus petit ou t\xe9l\xe9chargez le fichier SVG.","error.failed_png":"Impossible de cr\xe9er le fichier PNG. R\xe9essayez avec un diagramme plus petit ou t\xe9l\xe9chargez le fichier SVG.","error.failed_to_load_file":"Erreur lors du chargement du fichier","tab.info":"Info","tab.settings":"Param\xe8tres","config.colors":"Couleurs","config.colors.NO_COLOR":"aucune","config.colors.COLOR_BY_GENERATION":"par g\xe9n\xe9ration","config.colors.COLOR_BY_SEX":"par sexe","config.colors.COLOR_BY_TRIBE":"par clan","config.tribe":"Clan","config.tribe.SHOW":"montrer","config.tribe.HIDE":"cacher","config.ids":"IDs","config.ids.SHOW":"montrer","config.ids.HIDE":"cacher","config.sex":"Sexe","config.sex.SHOW":"montrer","config.sex.HIDE":"cacher","name.unknown_name":"N.N.","extras.notes":"Notes","extras.images":"Immages","extras.sources":"Sources"}')},365:function(e){e.exports=JSON.parse('{"menu.open":"Apri","menu.open_file":"Apri file","menu.load_from_url":"Apri URL","menu.download":"Download","menu.pdf_file":"File PDF","menu.png_file":"File PNG","menu.svg_file":"File SVG","menu.download_pdf":"Scarica PDF","menu.download_png":"Scarica PNG","menu.download_svg":"Scarica SVG","menu.view":"Ricentrare grafico","menu.github":"Progetto sul sito web GitHub","menu.search.placeholder":"Cerca persona","menu.search.no_results":"Nessun risultato","load_from_url.title":"Apri da URL","load_from_url.comment":"I dati dall\'URL specificato verranno caricati tramite il servizio {link} per evitare problemi CORS.","load_from_url.cancel":"Annulla","load_from_url.load":"Apri","gedcom.ADOP":"Adozione","gedcom.BAPM":"Battesimo","gedcom.BIRT":"Nascita","gedcom.BURI":"Funerale","gedcom.CENS":"Census","gedcom.CHR":"Battesimo","gedcom.DEAT":"Morte","gedcom.MARR":"Matrimonio","gedcom.MARS":"Accordo di matrimonio","gedcom.ETHN":"Etnia","gedcom.TRIB":"Clan","gedcom.LANG":"Lingua","gedcom.DIV":"Divorzio","gedcom.DSCR":"Descrizione","gedcom.EMAIL":"E-mail","gedcom.EVEN":"Evento","gedcom.OCCU":"Professione","gedcom.RIN":"ID","gedcom.TITL":"Titolo","gedcom.WWW":"Sito web","gedcom._UPD":"Ultimo aggiornamento","gedcom.birth":"Nome alla nascita","gedcom.married":"Nome da coniugato/a","gedcom.maiden":"Nome da nubile","gedcom.aka":"Conosciuto anche come","gedcom.languages":"Lingue","date.between":"tra il {from} e il {to}","date.after":"dopo il {from}","date.before":"prima del {to}","error.error":"Errore","error.failed_pdf":"Impossibile creare PDF. Riprova con un diagramma pi\xf9 piccolo o scarica il file SVG.","error.failed_png":"Impossibile creare il file PNG. Riprova con un diagramma pi\xf9 piccolo o scarica il file SVG.","error.failed_to_load_file":"Errore durante il caricamento del file","tab.info":"Info","tab.settings":"Configurazione","config.colors":"Colori","config.colors.NO_COLOR":"nessuno","config.colors.COLOR_BY_GENERATION":"per generazione","config.colors.COLOR_BY_SEX":"por sesso","config.colors.COLOR_BY_TRIBE":"por clan","config.tribe":"Clan","config.tribe.SHOW":"mostrare","config.tribe.HIDE":"nascondere","config.ids":"IDs","config.ids.SHOW":"mostrare","config.ids.HIDE":"nascondere","config.sex":"Sesso","config.sex.SHOW":"mostrare","config.sex.HIDE":"nascondere","name.unknown_name":"N.N.","extras.notes":"Note","extras.images":"Immagini","extras.sources":"Fonti"}')},366:function(e){e.exports=JSON.parse('{"menu.open":"Abrir","menu.open_file":"Abrir fichero","menu.load_from_url":"Abrir URL","menu.download":"Descargar","menu.pdf_file":"Archivo PDF","menu.png_file":"Archivo PNG","menu.svg_file":"Archivo SVG","menu.download_pdf":"Imagen PDF","menu.download_png":"Imagen PNG","menu.download_svg":"Imagen SVG","menu.view":"Centrar gr\xe1fica","menu.github":"Proyecto en el sitio web GitHub","menu.search.placeholder":"Buscar persona","menu.search.no_results":"Ning\xfan resultado","load_from_url.title":"Abrir desde URL","load_from_url.comment":"Los detalles de la URL especificada se cargar\xe1n a trav\xe9s del servicio {link} para evitar problemas con CORS.","load_from_url.cancel":"Cancelar","load_from_url.load":"Abrir","gedcom.ADOP":"Adopci\xf3n","gedcom.BAPM":"Bautismo","gedcom.BIRT":"Nacimiento","gedcom.BURI":"Funeral","gedcom.CENS":"Censo","gedcom.CHR":"Bautismo","gedcom.DEAT":"Muerte","gedcom.MARR":"Matrimonio","gedcom.MARS":"Acuerdo de matrimonio","gedcom.ETHN":"Etnia","gedcom.TRIB":"Clan","gedcom.LANG":"Lengua","gedcom.DIV":"Divorcio","gedcom.DSCR":"Descripci\xf3n","gedcom.EMAIL":"E-mail","gedcom.EVEN":"Evento","gedcom.OCCU":"Profesi\xf3n","gedcom.RIN":"ID","gedcom.TITL":"T\xedtulo","gedcom.WWW":"Sitio web","gedcom._UPD":"\xdaltima actualizaci\xf3n","gedcom.birth":"Nombre","gedcom.married":"Nombre de casado/a","gedcom.maiden":"Nombre de soltera","gedcom.aka":"Apodo","gedcom.languages":"Lenguas","date.between":"de {from} a {to}","date.after":"despu\xe9s de {from}","date.before":"antes de {to}","error.error":"Error","error.failed_pdf":"Imposible generar PDF. Int\xe9ntelo de nuevo con un diagrama m\xe1s peque\xf1o o descargue el archivo SVG.","error.failed_png":"Imposible generar el fichero PNG. Int\xe9ntelo de nuevo con un diagrama m\xe1s peque\xf1o o descargue el archivo SVG.","error.failed_to_load_file":"Error cargando archivo","tab.info":"Info","tab.settings":"Configuraci\xf3n","config.colors":"Colores","config.colors.NO_COLOR":"ninguno","config.colors.COLOR_BY_GENERATION":"por generaci\xf3n","config.colors.COLOR_BY_SEX":"por sexo","config.colors.COLOR_BY_TRIBE":"por clan","config.tribe":"Clan","config.tribe.SHOW":"mostrar","config.tribe.HIDE":"ocultar","config.ids":"IDs","config.ids.SHOW":"mostrar","config.ids.HIDE":"ocultar","config.sex":"Sexo","config.sex.SHOW":"mostrar","config.sex.HIDE":"ocultar","name.unknown_name":"N.N.","extras.notes":"Notas","extras.images":"Im\xe1genes","extras.sources":"Fuentes"}')},367:function(e){e.exports=JSON.parse('{"menu.open":"Otw\xf3rz","menu.open_file":"Otw\xf3rz plik","menu.load_from_url":"Otw\xf3rz URL","menu.download":"Pobierz","menu.pdf_file":"Plik PDF","menu.png_file":"Plik PNG","menu.svg_file":"Plik SVG","menu.download_pdf":"Pobierz PDF","menu.download_png":"Pobierz PNG","menu.download_svg":"Pobierz SVG","menu.view":"Wy\u015brodkuj grafik\u0119","menu.github":"Projekt na stronie GitHub","menu.search.placeholder":"Szukaj osoby","menu.search.no_results":"Brak wynik\xf3w","load_from_url.title":"Otw\xf3rz z adresu URL","load_from_url.comment":"W celu unikni\u0119cia problem\xf3w z CORS, dane z podanego adresu URL zostan\u0105 za\u0142adowane poprzez us\u0142ug\u0119 dost\u0119pn\u0105 pod {link}.","load_from_url.cancel":"Anuluj","load_from_url.load":"Otw\xf3rz","gedcom.ADOP":"Adopcja","gedcom.BAPM":"Chrzest","gedcom.BIRT":"Narodziny","gedcom.BURI":"Pogrzeb","gedcom.CENS":"Spis ludno\u015bci","gedcom.CHR":"Chrzest","gedcom.DEAT":"\u015amier\u0107","gedcom.MARR":"Ma\u0142\u017ce\u0144stwo","gedcom.MARS":"\u015alub cywilny","gedcom.ETHN":"Pochodzenie etniczne","gedcom.TRIB":"Klan","gedcom.LANG":"J\u0119zyk","gedcom.DIV":"Rozw\xf3d","gedcom.DSCR":"Opis","gedcom.EMAIL":"E-mail","gedcom.EVEN":"Wydarzenie","gedcom.OCCU":"Zaw\xf3d","gedcom.RIN":"ID","gedcom.TITL":"Tytu\u0142","gedcom.WWW":"Strona WWW","gedcom._UPD":"Ostatnia aktualizacja","gedcom.birth":"Nazwisko rodowe","gedcom.married":"Nazwisko po \u015blubie","gedcom.maiden":"Nazwisko panie\u0144skie","gedcom.aka":"Alias","gedcom.languages":"J\u0119zyki","date.between":"mi\u0119dzy {from} a {to}","date.after":"po {from}","date.before":"przed {to}","error.error":"B\u0142\u0105d","error.failed_pdf":"Nie uda\u0142o si\u0119 utworzy\u0107 pliku PDF. Spr\xf3buj jeszcze raz z mniejszym diagramem lub pobierz plik SVG.","error.failed_png":"Nie uda\u0142o si\u0119 utworzy\u0107 pliku PNG. Spr\xf3buj jeszcze raz z mniejszym diagramem lub pobierz plik SVG.","error.failed_to_load_file":"B\u0142\u0105d wczytania pliku","tab.info":"Info","tab.settings":"Ustawienia","config.colors":"Kolory","config.colors.NO_COLOR":"brak","config.colors.COLOR_BY_GENERATION":"wed\u0142ug pokolenia","config.colors.COLOR_BY_SEX":"wed\u0142ug p\u0142ci","config.colors.COLOR_BY_TRIBE":"wed\u0142ug klanu","config.tribe":"Klan","config.tribe.SHOW":"poka\u017c","config.tribe.HIDE":"ukryj","config.ids":"IDs","config.ids.SHOW":"poka\u017c","config.ids.HIDE":"ukryj","config.sex":"P\u0142e\u0107","config.sex.SHOW":"poka\u017c","config.sex.HIDE":"ukryj","name.unknown_name":"N.N.","extras.notes":"Notatki","extras.images":"Zdj\u0119cia","extras.sources":"\u0179r\xf3d\u0142o"}')},41:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),n(461),i(n(238),t),i(n(462),t),i(n(120),t),i(n(239),t),i(n(294),t),i(n(295),t),i(n(240),t),i(n(463),t),i(n(464),t),i(n(465),t),i(n(466),t),i(n(469),t),i(n(470),t),i(n(471),t)},419:function(e,t){},462:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ChartColors=void 0,function(e){e[e.NO_COLOR=0]="NO_COLOR",e[e.COLOR_BY_GENERATION=1]="COLOR_BY_GENERATION",e[e.COLOR_BY_SEX=2]="COLOR_BY_SEX"}(t.ChartColors||(t.ChartColors={}))},463:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),null===n?t.prototype=Object.create(n):(r.prototype=n.prototype,t.prototype=new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.DetailedRenderer=t.getLength=void 0;var i=n(39),a=n(41),o=n(295),s=n(125);n(110);var c=n(239),d=14,u=new Map;function l(e,t){var n=e+"|"+t;if(u.has(n))return u.get(n);var r=i.select("svg").append("g").attr("class","detailed node"),a=r.append("text").attr("class",t).text(e).node().getComputedTextLength();return r.remove(),u.set(n,a),a}t.getLength=l;var f=new Map([["F","\u2640"],["M","\u2642"]]),h=function(e){function t(t){var n=e.call(this,t)||this;return n.options=t,n}return r(t,e),t.prototype.getColoringClass=function(){switch(this.options.colors){case a.ChartColors.NO_COLOR:return"nocolor";case a.ChartColors.COLOR_BY_GENERATION:return"bygeneration";case a.ChartColors.COLOR_BY_SEX:return"bysex";default:return"bygeneration"}},t.prototype.getIndiDetails=function(e){var t=[],n=e.getBirthDate()&&o.formatDateOrRange(e.getBirthDate(),this.options.locale),r=e.getBirthPlace(),i=e.getDeathDate()&&o.formatDateOrRange(e.getDeathDate(),this.options.locale),a=e.getDeathPlace();n&&t.push({symbol:"",text:n}),r&&t.push({symbol:"",text:r}),(n||r)&&(t[0].symbol="*");var s=t.length;return i&&t.push({symbol:"",text:i}),a&&t.push({symbol:"",text:a}),i||a?t[s].symbol="+":e.isConfirmedDeath()&&t.push({symbol:"+",text:""}),t},t.prototype.getFamDetails=function(e){var t=[],n=e.getMarriageDate()&&o.formatDateOrRange(e.getMarriageDate(),this.options.locale),r=e.getMarriagePlace();return n&&t.push({symbol:"",text:n}),r&&t.push({symbol:"",text:r}),(n||r)&&(t[0].symbol="\u26ad"),t},t.prototype.getPreferredIndiSize=function(e){var t=this.options.data.getIndi(e),n=this.getIndiDetails(t),r=t.showId()||t.showSex()?d:0,i=s.max([44+n.length*d+r,t.getImageUrl()?90:0]),a=s.max(n.map((function(e){return l(e.text,"details")})));return[s.max([a+22,l(t.getFirstName()||"","name")+8,l(t.getLastName()||"","name")+8,l(e,"id")+32,64])+(t.getImageUrl()?70:0),i]},t.prototype.getPreferredFamSize=function(e){var t=this.options.data.getFam(e),n=this.getFamDetails(t),r=s.max([10+n.length*d,10]),i=s.max(n.map((function(e){return l(e.text,"details")})));return[s.max([i+22,15]),r]},t.prototype.render=function(e,t){var n=this;e=e.append("g").attr("class","detailed"),t=t.select("g");var r=e.merge(t).selectAll("g.indi").data((function(e){var t=[],r=!n.options.horizontal&&e.data.family?s.max([-c.getFamPositionVertical(e.data),0]):0,i=n.options.horizontal&&e.data.family?s.max([-c.getFamPositionHorizontal(e.data),0]):0;return e.data.indi&&t.push({indi:e.data.indi,generation:e.data.generation,xOffset:r,yOffset:0}),e.data.spouse&&t.push({indi:e.data.spouse,generation:e.data.generation,xOffset:!n.options.horizontal&&e.data.indi?e.data.indi.width+r:0,yOffset:n.options.horizontal&&e.data.indi?e.data.indi.height+i:0}),t}),(function(e){return e.indi.id})),i=r.enter().append("g").attr("class","indi");this.transition(i.merge(r)).attr("transform",(function(e){return"translate("+e.xOffset+", "+e.yOffset+")"})),this.renderIndi(i,r);var a=e.select((function(e){return e.data.family?this:null})).append("g").attr("class","family"),o=t.select((function(e){return e.data.family?this:null})).select("g.family");this.transition(a.merge(o)).attr("transform",(function(e){return n.getFamTransform(e.data)})),this.renderFamily(a)},t.prototype.getCss=function(){return null},t.prototype.transition=function(e){return this.options.animate?e.transition().delay(200).duration(500):e},t.prototype.getFamTransform=function(e){return this.options.horizontal?"translate("+(e.indi&&e.indi.width||e.spouse.width)+", "+s.max([c.getFamPositionHorizontal(e),0])+")":"translate("+s.max([c.getFamPositionVertical(e),0])+", "+(e.indi&&e.indi.height||e.spouse.height)+")"},t.prototype.getSexClass=function(e){var t;switch(null===(t=this.options.data.getIndi(e))||void 0===t?void 0:t.getSex()){case"M":return"male";case"F":return"female";default:return""}},t.prototype.renderIndi=function(e,t){var n=this;this.options.indiHrefFunc&&(e=e.append("a").attr("href",(function(e){return n.options.indiHrefFunc(e.indi.id)})),t=t.select("a")),this.options.indiCallback&&e.on("click",(function(e,t){return n.options.indiCallback({id:t.indi.id,generation:t.generation})}));var r=e.append("rect").attr("rx",5).attr("stroke-width",0).attr("class",(function(e){return"background "+n.getColoringClass()+" "+n.getSexClass(e.indi.id)})).merge(t.select("rect.background"));this.transition(r).attr("width",(function(e){return e.indi.width})).attr("height",(function(e){return e.indi.height}));var i=function(e){return"clip-"+e};e.append("clipPath").attr("id",(function(e){return i(e.indi.id)})).append("rect").attr("rx",5).merge(t.select("clipPath rect")).attr("width",(function(e){return e.indi.width})).attr("height",(function(e){return e.indi.height}));var a=function(e){return n.options.data.getIndi(e.indi.id)},o=function(e){return e.indi.width-(a(e).getImageUrl()?70:0)};e.append("text").attr("text-anchor","middle").attr("class","name").attr("transform",(function(e){return"translate("+o(e)/2+", 17)"})).text((function(e){return a(e).getFirstName()})),e.append("text").attr("text-anchor","middle").attr("class","name").attr("transform",(function(e){return"translate("+o(e)/2+", 33)"})).text((function(e){return a(e).getLastName()}));var c=new Map;e.each((function(e){var t=a(e),r=n.getIndiDetails(t);c.set(e.indi.id,r)}));for(var u=s.max(Array.from(c.values(),(function(e){return e.length}))),l=function(t){var n=e.filter((function(e){return c.get(e.indi.id).length>t}));n.append("text").attr("text-anchor","middle").attr("class","details").attr("transform","translate(9, "+(49+t*d)+")").text((function(e){return c.get(e.indi.id)[t].symbol})),n.append("text").attr("class","details").attr("transform","translate(15, "+(49+t*d)+")").text((function(e){return c.get(e.indi.id)[t].text}))},h=0;h<u;++h)l(h);var p=e.append("text").attr("class","id").text((function(e){return a(e).showId()?e.indi.id:""})).merge(t.select("text.id"));this.transition(p).attr("transform",(function(e){return"translate(9, "+(e.indi.height-5)+")"}));var g=e.append("text").attr("class","details sex").attr("text-anchor","end").text((function(e){var t=f.get(a(e).getSex()||"")||"";return a(e).showSex()?t:""})).merge(t.select("text.sex"));this.transition(g).attr("transform",(function(e){return"translate("+(o(e)-5)+", "+(e.indi.height-5)+")"})),e.filter((function(e){return!!a(e).getImageUrl()})).append("image").attr("width",70).attr("height",(function(e){return e.indi.height})).attr("preserveAspectRatio","xMidYMin").attr("transform",(function(e){return"translate("+(e.indi.width-70)+", 0)"})).attr("clip-path",(function(e){return"url(#"+i(e.indi.id)+")"})).attr("href",(function(e){return a(e).getImageUrl()}));var m=e.append("rect").attr("rx",5).attr("fill-opacity",0).attr("class","border").merge(t.select("rect.border"));this.transition(m).attr("width",(function(e){return e.indi.width})).attr("height",(function(e){return e.indi.height}))},t.prototype.renderFamily=function(e){var t=this;this.options.famHrefFunc&&(e=e.append("a").attr("href",(function(e){return t.options.famHrefFunc(e.data.family.id)}))),this.options.famCallback&&e.on("click",(function(e,n){return t.options.famCallback({id:n.data.family.id,generation:n.data.generation})}));var n=new Map;e.each((function(e){var r=e.data.family.id,i=t.options.data.getFam(r),a=t.getFamDetails(i);n.set(r,a)}));var r=s.max(Array.from(n.values(),(function(e){return e.length})));e.filter((function(e){return 0<n.get(e.data.family.id).length})).append("rect").attr("class",this.getColoringClass()).attr("rx",5).attr("ry",5).attr("width",(function(e){return e.data.family.width})).attr("height",(function(e){return e.data.family.height}));for(var i=function(t){var r=e.filter((function(e){return n.get(e.data.family.id).length>t}));r.append("text").attr("text-anchor","middle").attr("class","details").attr("transform","translate(9, "+(16+t*d)+")").text((function(e){return n.get(e.data.family.id)[t].symbol})),r.append("text").attr("text-anchor","start").attr("class","details").attr("transform","translate(15, "+(16+t*d)+")").text((function(e){return n.get(e.data.family.id)[t].text}))},a=0;a<r;++a)i(a)},t}(c.CompositeRenderer);t.DetailedRenderer=h},464:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.gedcomEntriesToJson=t.gedcomToJson=t.getDate=void 0;var r=n(265);function i(e,t){return e.find((function(e){return e.tag===t}))}function a(e,t){return e.filter((function(e){return e.tag===t}))}function o(e){return e.substring(1,e.length-1)}function s(e){var t=e.split("/");return 1===t.length?{firstName:t[0].trim()}:{firstName:t[0].trim(),lastName:t[1].trim()}}var c=new Map([["jan",1],["feb",2],["mar",3],["apr",4],["may",5],["jun",6],["jul",7],["aug",8],["sep",9],["oct",10],["nov",11],["dec",12]]);function d(e){var t;if(e&&e.length){var n={};e[0].startsWith("(")&&e[e.length-1].endsWith(")")&&(e[0]=e[0].substring(1),t=e[e.length-1],e[e.length-1]=t.substring(0,t.length-1));var r=e.join(" "),i=e[0].toLowerCase();return"cal"!==i&&"abt"!==i&&"est"!==i||(n.qualifier=i,e=e.slice(1)),e.length&&e[e.length-1].match(/^\d{1,4}$/)&&(n.year=Number(e[e.length-1]),e=e.slice(0,e.length-1)),e.length&&(t=e[e.length-1].toLowerCase(),c.has(t)&&(n.month=c.get(t),e=e.slice(0,e.length-1))),e.length&&e[0].match(/^\d\d?$/)&&(n.day=Number(e[0]),e=e.slice(0,e.length-1)),e.length?{text:r}:n}}function u(e){var t=e.replace(/@.*@/,"").trim().split(" "),n=t[0].toLowerCase();if(n.startsWith("bet")){var r=t.findIndex((function(e){return"and"===e.toLowerCase()}));return{dateRange:{from:d(t.slice(1,r)),to:d(t.slice(r+1))}}}if(n.startsWith("bef")||n.startsWith("aft")){var i=d(t.slice(1));return n.startsWith("bef")?{dateRange:{to:i}}:{dateRange:{from:i}}}var a=d(t);if(a)return{date:a}}function l(e){if(e&&"NOTE"===e.tag)return a(e.tree,"CONT").filter((function(e){return e.data})).reduce((function(e,t){return e.concat(t.data)}),[e.data])}function f(e){if(e){var t=i(e.tree,"TYPE"),n=i(e.tree,"DATE"),r=i(e.tree,"PLAC"),a=n&&n.data&&u(n.data),o=r&&r.data;if(a||o){var s=a||{};return o&&(s.place=o),s.confirmed=!0,s.type=t?t.data:void 0,s.notes=l(i(e.tree,"NOTE")),s}return e.data&&"y"===e.data.toLowerCase()?{confirmed:!0}:void 0}}function h(e){var t={id:o(e.pointer),children:a(e.tree,"CHIL").map((function(e){return o(e.data)}))},n=i(e.tree,"HUSB");n&&(t.husb=o(n.data));var r=i(e.tree,"WIFE");r&&(t.wife=o(r.data));var s=f(i(e.tree,"MARR"));return s&&(t.marriage=s),t}function p(e){var t,n=(t=a(e,"OBJE"),new Map(t.map((function(e){return[o(e.pointer),e]}))));return{indis:a(e,"INDI").map((function(e){return function(e,t){var n,r,c={id:o(e.pointer),fams:a(e.tree,"FAMS").map((function(e){return o(e.data)}))},d=a(e.tree,"NAME"),u=function(e){var t=i(e.tree,"TYPE");return void 0!==t&&"maiden"===t.data},h=d.find((function(e){return!u(e)})),p=d.find(u);if(h){var g=s(h.data);n=g.firstName,r=g.lastName,n&&(c.firstName=n),r&&(c.lastName=r)}if(p){var m=s(p.data);n=m.firstName,(r=m.lastName)&&(c.maidenName=r),n&&!c.firstName&&(c.firstName=n)}var b=i(e.tree,"NCHI");b&&(c.numberOfChildren=+b.data);var O=i(e.tree,"NMR");O&&(c.numberOfMarriages=+O.data);var v=i(e.tree,"SEX");v&&(c.sex=v.data);var j=i(e.tree,"FAMC");j&&(c.famc=o(j.data));var y=a(e.tree,"OBJE");y.length>0&&(c.images=y.map((function(e){var n=e.data?t.get(o(e.data)):e;if(n){var r=i(n.tree,"FILE"),a=i(n.tree,"TITL");if(r)return{url:r.data,title:a&&a.data}}})).filter((function(e){return void 0!==e})));var x=f(i(e.tree,"BIRT"));x&&(c.birth=x);var I=f(i(e.tree,"DEAT"));return I&&(c.death=I),c.notes=l(i(e.tree,"NOTE")),c.events=a(e.tree,"EVEN").map(f).filter((function(e){return null!==e})),c}(e,n)})),fams:a(e,"FAM").map(h)}}t.getDate=u,t.gedcomToJson=function(e){return p(r.parse(e))},t.gedcomEntriesToJson=p},465:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.HourglassChart=void 0;var r=n(238),i=n(120),a=n(240),o=function(){function e(e){this.options=e,this.util=new i.ChartUtil(e)}return e.prototype.render=function(){var e=r.getAncestorsTree(this.options),t=this.util.layOutChart(e,{flipVertically:!0}),n=a.layOutDescendants(this.options),o=t.slice(1).concat(n),s=this.util.renderChart(o),c=i.getChartInfo(o);return this.util.updateSvgDimensions(c),Object.assign(c,{animationPromise:s})},e}();t.HourglassChart=o},466:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.KinshipChart=void 0;var r=n(467),i=n(468),a=function(){function e(e){this.options=e,this.renderer=new r.KinshipChartRenderer(this.options)}return e.prototype.render=function(){var e=this,t=i.HierarchyCreator.createHierarchy(this.options.data,new i.EntryId(this.options.startIndi||null,this.options.startFam||null)),n=this.renderer.layOut(t.upRoot,t.downRoot),r=n[0],a=n[1];return r.concat(a).forEach((function(t){e.setChildNodesGenerationNumber(t)})),this.renderer.render(r,a,i.getRootsCount(t.upRoot,this.options.data))},e.prototype.setChildNodesGenerationNumber=function(e){var t=this.getChildNodesByType(e),n=function(t,n){return t.forEach((function(t){return t.data.generation=e.data.generation+n}))};n(t.indiParents,-1),n(t.indiSiblings,0),n(t.spouseParents,-1),n(t.spouseSiblings,0),n(t.children,1)},e.prototype.getChildNodesByType=function(e){if(!e||!e.children)return o;var t=new Map(e.children.map((function(e){return[e.data.id,e]}))),n=function(e){return t.get(e.id)},r=e.data.childNodes;return{indiParents:r.indiParents.map(n),indiSiblings:r.indiSiblings.map(n),spouseParents:r.spouseParents.map(n),spouseSiblings:r.spouseSiblings.map(n),children:r.children.map(n)}},e}();t.KinshipChart=a;var o={indiParents:[],indiSiblings:[],spouseParents:[],spouseSiblings:[],children:[]}},467:function(e,t,n){var r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.KinshipChartRenderer=void 0;var i=n(125),a=n(21),o=n(120),s=n(266),c=function(){function e(e){this.options=e,this.util=new o.ChartUtil(this.options)}return e.prototype.layOut=function(e,t){var n=this.util.getSvgForRendering();return n.select("style").empty()&&n.append("style").text(this.options.renderer.getCss()),[this.util.layOutChart(e,{flipVertically:!0}),this.util.layOutChart(t)]},e.prototype.render=function(e,t,n){var r=this,i=e.concat(t),a=i.slice(1);e.forEach((function(e){return r.setLinkYs(e,!0)})),t.forEach((function(e){return r.setLinkYs(e,!1)}));var s=this.util.renderNodes(a,this.util.getSvgForRendering());this.renderLinks(i),n>1&&this.renderRootDummyAdditionalMarriageLinkStub(i[0]);var c=o.getChartInfo(a);return this.util.updateSvgDimensions(c),Object.assign(c,{animationPromise:s})},e.prototype.renderLinks=function(e){var t=this,n=this.util.getSvgForRendering().select("g"),r=function(e){return e.data.id},i=n.selectAll("path.internode-link").data(e.filter((function(e){return!!e.parent})),r);i.enter().insert("path","g").attr("class",(function(e){return t.cssClassForLink(e)})).merge(i).attr("d",(function(e){var n=e.data.primaryMarriage?t.additionalMarriageLinkPoints(e):t.linkPoints(e.parent,e,e.data.linkFromParentType);return s.points2pathd(n)})),i.exit().remove();var a=n.selectAll("g.link-stubs").data(e.filter((function(e){return e.data.duplicateOf||e.data.duplicated||e.data.primaryMarriage})),r),o=a.enter().insert("g","g").attr("class","link-stubs");a.exit().remove();var c=o.merge(a).selectAll("g").data((function(e){return t.nodeToLinkStubRenderInfos(e)}),(function(e){return e.linkType.toString()}));c.enter().append("g").call((function(e){return e.append("path").attr("class",(function(e){return t.cssClassForLinkStub(e.linkType)})).merge(c.select("path.link-stub")).attr("d",(function(e){return s.points2pathd(e.points)}))})).call((function(e){return e.append("circle").attr("r",3).style("stroke","black").style("fill","none").merge(c.select("circle")).attr("transform",(function(e){return"translate("+s.last(e.points).x+", "+(s.last(e.points).y+3*e.treeDir)+")"}))})),c.exit().remove()},e.prototype.cssClassForLink=function(e){return e.data.primaryMarriage?"link internode-link additional-marriage":"link internode-link "+this.cssClassForLinkType(e.data.linkFromParentType)},e.prototype.cssClassForLinkStub=function(e){return"link link-stub "+this.cssClassForLinkType(e)},e.prototype.cssClassForLinkType=function(e){switch(e){case a.LinkType.IndiParents:case a.LinkType.SpouseParents:return"parents-link";case a.LinkType.IndiSiblings:case a.LinkType.SpouseSiblings:return"siblings-link";case a.LinkType.Children:return"children-link";default:return null}},e.prototype.nodeToLinkStubRenderInfos=function(e){var t=this;return e.data.linkStubs.map((function(n){var i=e.y<e.parent.y,a=i?-1:1,o=t.linkAnchorPoints(e,n,i),c=e.data.linkYs.children-18*a;return{treeDir:a,linkType:n,points:r(r([],o),[{x:s.last(o).x,y:c}])}}))},e.prototype.getLinkY=function(e,t){switch(t){case a.LinkType.IndiParents:case a.LinkType.IndiSiblings:return e.data.linkYs.indi;case a.LinkType.SpouseParents:case a.LinkType.SpouseSiblings:return e.data.linkYs.spouse;case a.LinkType.Children:return e.data.linkYs.children;default:return null}},e.prototype.setLinkYs=function(e,t){var n=t?-1:1,r=e.y+(e.data.height/2+17)*n,i=6*n,a=this.calcLinkOffsetDirs(e),o=a[0],s=a[1];e.data.linkYs={indi:r+i*o,spouse:r+i*s,children:r}},e.prototype.calcLinkOffsetDirs=function(e){var t,n=e.data.childNodes;if(n.children.length){t=this.linkAnchorPoints(e,a.LinkType.IndiParents,!0)[0].x;var r=this.linkAnchorPoints(e,a.LinkType.SpouseParents,!0)[0].x,i={min:this.findMinXOfChildNodesAnchors(e,n.children),max:this.findMaxXOfChildNodesAnchors(e,n.children)};if(i.min<t&&i.max>r)return[-1,-1];if(i.min<t)return[-1,1];if(i.max>r)return[1,-1]}else if((n.indiParents.length||n.indiSiblings.length)&&(n.spouseParents.length||n.spouseSiblings.length)){if(t=this.linkAnchorPoints(e,a.LinkType.IndiParents,!0)[0].x,this.findMinXOfChildNodesAnchors(e,n.spouseSiblings.concat(n.spouseParents))<t)return[-1,1]}return[1,-1]},e.prototype.findMinXOfChildNodesAnchors=function(e,t){return this.findExtremeXOfChildNodesAnchors(e,t,!0)},e.prototype.findMaxXOfChildNodesAnchors=function(e,t){return this.findExtremeXOfChildNodesAnchors(e,t,!1)},e.prototype.findExtremeXOfChildNodesAnchors=function(e,t,n){var r=n?i.min:i.max,a=n?-1:1,o=new Set(t);return r(e.children.filter((function(e){return o.has(e.data)})),(function(e){return e.x+a*e.data.width/2}))+7*a},e.prototype.linkPoints=function(e,t,n){var i=e.y>t.y,o=this.linkAnchorPoints(e,n,i),s=this.linkAnchorPoints(t,a.otherSideLinkType(n),!i).reverse(),c=this.getLinkY(e,n);return r(r(r([],o),[{x:o[o.length-1].x,y:c},{x:s[0].x,y:c}]),s)},e.prototype.additionalMarriageLinkPoints=function(e){var t=e.parent.children.findIndex((function(t){return t.data.id===e.data.id})),n=e.parent.children[t-1],r=this.indiMidY(e);return[{x:n.x,y:r},{x:e.x,y:r}]},e.prototype.linkAnchorPoints=function(e,t,n){var r=[e.x,e.y],i=r[0],o=r[1],s=[e.data.width,e.data.height],c=s[0],d=s[1],u=i-c/2,l=i+c/2,f=[e.data.indi,e.data.spouse,e.data.family].map((function(e){return e?e.width:0})),h=f[0],p=f[1],g=f[2],m=h+p,b=i-c/2+(g>m?(g-m)/2:0),O=b+m,v=this.indiMidY(e)+5*(n?-1:1);switch(t){case a.LinkType.IndiParents:return[{x:b+15,y:o-d/2}];case a.LinkType.SpouseParents:return[{x:O-15,y:o-d/2}];case a.LinkType.IndiSiblings:return[{x:b,y:v},{x:(g>m&&!n?u:b)-7,y:v}];case a.LinkType.SpouseSiblings:return[{x:O,y:v},{x:(g>m&&!n?l:O)+7,y:v}];case a.LinkType.Children:return[{x:b+(e.data.spouse?h:h/2),y:o}];default:return null}},e.prototype.indiMidY=function(e){return e.y-e.data.height/2+e.data.indi.height/2},e.prototype.renderRootDummyAdditionalMarriageLinkStub=function(e){var t=this.util.getSvgForRendering().select("g"),n=this.indiMidY(e),r=e.data.width/2+20;t.selectAll(".root-dummy-additional-marriage").remove(),t.insert("g","g").attr("class","root-dummy-additional-marriage").call((function(e){return e.append("path").attr("d","M 0 "+n+" L "+r+" "+n).attr("class","link additional-marriage")})).call((function(e){return e.append("circle").attr("transform","translate("+(r+3)+", "+n+")").attr("r",3).style("stroke","black").style("fill","black")}))},e}();t.KinshipChartRenderer=c},468:function(e,t,n){"use strict";n.r(t);var r=n(30),i=n(32),a=n(21),o=n(78),s=n(228),c=n(164),d=n(266),u=function(){function e(t,n){if(Object(r.a)(this,e),!t&&!n)throw new Error("Invalid EntryId");this.id=t||n,this.isFam=!!n}return Object(i.a)(e,null,[{key:"indi",value:function(t){return new e(t,null)}},{key:"fam",value:function(t){return new e(null,t)}}]),e}();!function(){var e=function(){function e(t,n){var i;Object(r.a)(this,e),this.data=t,this.queuedNodesById=new Map,this.idGenerator=new c.IdGenerator,i=this.expandStartId(n),this.startEntryId=i[0],this.startFamIndi=i[1]}return Object(i.a)(e,[{key:"expandStartId",value:function(e){if(e.isFam)return[e,null];var t=this.data.getIndi(e.id);if(!t)throw new Error("Invalid startId");var n=t.getFamiliesAsSpouse();return n.length?[u.fam(n[0]),e.id]:[e,null]}},{key:"createHierarchy",value:function(){var t=this.idToNode(this.startEntryId,null,null,!1),n=this.idToNode(this.startEntryId,null,null,!1);if(!t||!n)throw new Error("Invalid root node");this.startFamIndi&&(t.indi={id:this.startFamIndi},n.indi={id:this.startFamIndi});for(var r=[t,n];r.length;){var i=r.shift(),a=i===t?e.UP_FILTER:i===n?e.DOWN_FILTER:e.ALL_ACCEPTING_FILTER;this.fillNodeData(i,a);for(var s=0,c=i.childNodes.getAll();s<c.length;s++){var d=c[s];r.push(d)}}var u=function(e){var t=e.childNodes.getAll();return t.length?t:null};return{upRoot:Object(o.c)(t,u),downRoot:Object(o.c)(n,u)}}},{key:"fillNodeData",value:function(e,t){if(this.isFamNode(e)){var n=this.data.getFam(e.id),r=e.indi&&e.indi.id===n.getMother()?[n.getMother(),n.getFather()]:[n.getFather(),n.getMother()],i=r[0],a=r[1];Object.assign(e,{id:this.idGenerator.getId(e.id),indi:i&&{id:i},spouse:a&&{id:a}}),e.duplicateOf||e.duplicated||(e.childNodes=this.childNodesForFam(n,e,t))}else{var o=this.data.getIndi(e.id);Object.assign(e,{id:this.idGenerator.getId(e.id),indi:{id:o.getId()}}),e.duplicateOf||e.duplicated||(e.childNodes=this.childNodesForIndi(o,e,t))}e.linkStubs=this.createLinkStubs(e)}},{key:"childNodesForFam",value:function(e,t,n){var r=t.indi?this.data.getIndi(t.indi.id):null,i=t.spouse?this.data.getIndi(t.spouse.id):null,o=this.getParentsAndSiblings(r),s=o[0],c=o[1],d=this.getParentsAndSiblings(i),u=d[0],l=d[1],f=e.getChildren();return new a.ChildNodes({indiParents:n.indiParents?this.famAsSpouseIdsToNodes(s,t,a.LinkType.IndiParents):[],indiSiblings:n.indiSiblings?this.indiIdsToFamAsSpouseNodes(c,t,a.LinkType.IndiSiblings):[],spouseParents:n.spouseParents?this.famAsSpouseIdsToNodes(u,t,a.LinkType.SpouseParents):[],spouseSiblings:n.spouseSiblings?this.indiIdsToFamAsSpouseNodes(l,t,a.LinkType.SpouseSiblings):[],children:n.children?this.indiIdsToFamAsSpouseNodes(f,t,a.LinkType.Children):[]})}},{key:"childNodesForIndi",value:function(e,t,n){var r=this.getParentsAndSiblings(e),i=r[0],o=r[1];return new a.ChildNodes({indiParents:n.indiParents?this.famAsSpouseIdsToNodes(i,t,a.LinkType.IndiParents):[],indiSiblings:n.indiSiblings?this.indiIdsToFamAsSpouseNodes(o,t,a.LinkType.IndiSiblings):[]})}},{key:"areParentsAndSiblingsPresent",value:function(e){var t=e&&this.data.getIndi(e),n=t&&t.getFamilyAsChild(),r=n&&this.data.getFam(n);return r?[!(!r.getFather()&&!r.getMother()),r.getChildren().length>1]:[!1,!1]}},{key:"getParentsAndSiblings",value:function(e){var t=e&&e.getFamilyAsChild(),n=this.data.getFam(t);if(!n)return[[],[]];var r=this.data.getIndi(n.getFather()),i=this.data.getIndi(n.getMother()),a=[].concat(r?r.getFamiliesAsSpouse():[],i?i.getFamiliesAsSpouse():[]).filter((function(e){return e!==t}));a.unshift(t);var o=Array.from(n.getChildren());return o.splice(o.indexOf(e.getId()),1),[a,o]}},{key:"indiIdsToFamAsSpouseNodes",value:function(e,t,n){var r=this;return e.flatMap((function(e){return r.indiIdToFamAsSpouseNodes(e,t,n)}))}},{key:"indiIdToFamAsSpouseNodes",value:function(e,t,n){var r=this;if(this.isChildNodeTypeForbidden(n,t))return[];var i=this.data.getIndi(e).getFamiliesAsSpouse();if(!i.length){var o=this.idToNode(u.indi(e),t,n);return o?[o]:[]}var s=i.map((function(r){return{id:r,indi:{id:e},family:{id:r},parentNode:t,linkFromParentType:n,childNodes:a.ChildNodes.EMPTY,linkStubs:[]}}));return s.forEach((function(e,t){0!==t&&(e.primaryMarriage=s[0]);var n=r.queuedNodesById.get(e.id);n?(e.duplicateOf=n,n.duplicated=!0):r.queuedNodesById.set(e.id,e)})),s}},{key:"famAsSpouseIdsToNodes",value:function(e,t,n){var r=this.idsToNodes(e.map(u.fam),t,n);return r.slice(1).forEach((function(e){return e.primaryMarriage=r[0]})),r}},{key:"idsToNodes",value:function(e,t,n,r){var i=this;return void 0===r&&(r=!0),e.map((function(e){return i.idToNode(e,t,n,r)})).filter((function(e){return null!=e}))}},{key:"idToNode",value:function(e,t,n,r){if(void 0===r&&(r=!0),this.isChildNodeTypeForbidden(n,t))return null;var i=e.id,o=e.isFam;if(o){var s=this.data.getFam(i);if(!s||!s.getFather()&&!s.getMother())return null}var c=this.queuedNodesById.get(i),d={id:i,parentNode:t,linkFromParentType:n,childNodes:a.ChildNodes.EMPTY,linkStubs:[]};return o&&(d.family={id:i}),r&&c&&(d.duplicateOf=c,c.duplicated=!0),c||this.queuedNodesById.set(i,d),d}},{key:"createLinkStubs",value:function(e){var t=this;if(!this.isFamNode(e)||!e.duplicateOf&&!e.duplicated&&!e.primaryMarriage)return[];var n=this.data.getFam(e.family.id),r=this.areParentsAndSiblingsPresent(e.indi?e.indi.id:null),i=r[0],o=r[1],s=this.areParentsAndSiblingsPresent(e.spouse?e.spouse.id:null),c=s[0],u=s[1],l=Object(d.nonEmpty)(n.getChildren());return[i?[a.LinkType.IndiParents]:[],o?[a.LinkType.IndiSiblings]:[],c?[a.LinkType.SpouseParents]:[],u?[a.LinkType.SpouseSiblings]:[],l?[a.LinkType.Children]:[]].flat().filter((function(n){return!t.isChildNodeTypeForbidden(n,e)&&!e.childNodes.get(n).length}))}},{key:"isChildNodeTypeForbidden",value:function(e,t){if(null===e||!t)return!1;switch(Object(a.otherSideLinkType)(t.linkFromParentType)){case a.LinkType.IndiParents:case a.LinkType.IndiSiblings:if(e===a.LinkType.IndiParents||e===a.LinkType.IndiSiblings)return!0;break;case a.LinkType.Children:if(!t.primaryMarriage&&e===a.LinkType.Children)return!0;break;default:return null}if(t.primaryMarriage){var n=t.indi.id,r=t.spouse.id,i=t.primaryMarriage.indi.id,o=t.primaryMarriage.spouse.id;if(n===i||n===o){if(e===a.LinkType.IndiParents||e===a.LinkType.IndiSiblings)return!0}else if((r===i||r===o)&&(e===a.LinkType.SpouseParents||e===a.LinkType.SpouseSiblings))return!0}return!1}},{key:"isFamNode",value:function(e){return!!e.family}}],[{key:"createHierarchy",value:function(t,n){return new e(t,n).createHierarchy()}}]),e}();e.UP_FILTER=s.HierarchyFilter.allRejecting().modify({indiParents:!0,spouseParents:!0,indiSiblings:!0,spouseSiblings:!0}),e.DOWN_FILTER=s.HierarchyFilter.allRejecting().modify({children:!0}),e.ALL_ACCEPTING_FILTER=s.HierarchyFilter.allAccepting()}()},469:function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.RelativesChart=void 0;var a=n(238),o=n(164),s=n(240),c=n(125),d=n(120),u=function(){function e(e,t){this.fam=e,this.childId=t}return e.prototype.getId=function(){return this.fam.getId()},e.prototype.getFather=function(){return this.fam.getFather()},e.prototype.getMother=function(){return this.fam.getMother()},e.prototype.getChildren=function(){var e=i([],this.fam.getChildren()),t=e.indexOf(this.childId);return-1!==t&&e.splice(t,1),e},e}(),l=function(){function e(e,t){this.data=e,this.childId=t}return e.prototype.getIndi=function(e){return this.data.getIndi(e)},e.prototype.getFam=function(e){return new u(this.data.getFam(e),this.childId)},e}(),f=function(){function e(e){this.options=e,this.util=new d.ChartUtil(e),this.options.idGenerator=this.options.idGenerator||new o.IdGenerator}return e.prototype.layOutAncestorDescendants=function(e,t){var n=this,i=new Map;return e.eachAfter((function(e){if(e.parent){var t=r({},n.options);t.startFam=e.data.family.id,t.startIndi=void 0;var a=e.id===e.parent.data.spouseParentNodeId?e.parent.data.spouse.id:e.parent.data.indi.id;t.data=new l(t.data,a),t.baseGeneration=(n.options.baseGeneration||0)-e.depth;var o=s.layOutDescendants(t);e.data.id=o[0].id;var c=d.getChartInfoWithoutMargin(o),u=(e.children||[]).map((function(e){return i.get(e.data.id)})).map((function(e){return e.height})).reduce((function(e,t){return e+t+d.V_SPACING}),0),f={descendantNodes:o,width:c.size[0],height:c.size[1]+u,x:c.origin[0],y:c.origin[1]+u};i.set(e.data.id,f)}})),e.each((function(e){if(e.parent){var t=i.get(e.data.id),n=i.get(e.parent.data.id);t.left=n&&!n.middle?n.left:e.parent.data.indiParentNodeId===e.id,t.middle=(!n||n.middle)&&1===e.parent.children.length}})),e.each((function(e){var n=i.get(e.data.id),r=n?n.descendantNodes[0]:t;(e.children||[]).forEach((function(e){i.get(e.data.id).descendantNodes[0].parent=r})),e.data.indiParentNodeId&&e.children&&(r.data.indiParentNodeId=e.children.find((function(t){return t.id===e.data.indiParentNodeId})).data.id),e.data.spouseParentNodeId&&e.children&&(r.data.spouseParentNodeId=e.children.find((function(t){return t.id===e.data.spouseParentNodeId})).data.id)})),e.each((function(e){var n,r,a,o,s=i.get(e.data.id),u=s?s.descendantNodes[0]:t,l=e.children&&e.children.find((function(t){return t.id===e.data.indiParentNodeId})),f=e.children&&e.children.find((function(t){return t.id===e.data.spouseParentNodeId})),h=u.x,p=u.y,g=u.data.width,m=u.data.height,b=u.data.indi?u.data.indi.width:0,O=u.data.spouse?u.data.spouse.width:0;if(l){r=(a=(o=i.get(l.data.id)).descendantNodes[0]).data;var v=f?i.get(f.data.id).height+d.V_SPACING:0,j=h+o.x-g/2+b/2+(o.left?-o.width-d.H_SPACING:d.H_SPACING),y=p+o.y-m/2-o.height+(o.left?-d.V_SPACING:-v-d.V_SPACING);o.descendantNodes.forEach((function(e){e.x+=j,e.y+=y})),n=b/2-g/2+r.width/2-(r.indi?r.indi.width:r.spouse.width),o.middle?a.x=0:!s||s.middle?a.x=-g/2-r.width/2+b-d.H_SPACING/2:o.left?a.x=h+c.min([g/2-r.width/2-O/2-d.H_SPACING,n]):a.x=h+c.max([r.width/2-g/2,n])}if(f){r=(a=(o=i.get(f.data.id)).descendantNodes[0]).data;var x=l?i.get(l.data.id).height+d.V_SPACING:0,I=h+o.x+g/2-O/2+(o.left?-o.width-d.H_SPACING:d.H_SPACING),w=p+o.y-m/2-o.height+(o.left?-x-d.V_SPACING:-d.V_SPACING);o.descendantNodes.forEach((function(e){e.x+=I,e.y+=w})),n=g/2-O/2+r.width/2-(r.indi?r.indi.width:r.spouse.width),o.middle?a.x=0:!s||s.middle?a.x=g/2+r.width/2-O+d.H_SPACING/2:o.left?a.x=h+c.min([g/2-r.width/2,n]):a.x=h+c.max([r.width/2-g/2+b/2+d.H_SPACING,n])}})),Array.from(i.values()).map((function(e){return e.descendantNodes})).reduce((function(e,t){return e.concat(t)}),[])},e.prototype.render=function(){var e=s.layOutDescendants(this.options),t=Object.assign({},this.options,{idGenerator:void 0}),n=a.getAncestorsTree(t),r=this.layOutAncestorDescendants(n,e[0]),i=e.concat(r),o=this.util.renderChart(i),c=d.getChartInfo(i);return this.util.updateSvgDimensions(c),Object.assign(c,{animationPromise:o})},e}();t.RelativesChart=f},470:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createChart=void 0;var r=n(39),i=n(294);var a=function(){function e(e){this.options=e,this.initialRender=!0}return e.prototype.render=function(e){void 0===e&&(e={});var t=function(e,t,n){var r=new i.JsonDataProvider(e.json),a=e.indiUrl?function(t){return e.indiUrl.replace("".concat(t),t)}:void 0,o=e.famUrl?function(t){return e.famUrl.replace("".concat(t),t)}:void 0;t.startIndi||t.startFam||(t.startIndi=e.json.indis[0].id);var s=!n.initialRender&&e.animate;return{data:r,renderer:new e.renderer({data:r,indiHrefFunc:a,famHrefFunc:o,indiCallback:e.indiCallback,famCallback:e.famCallback,horizontal:e.horizontal,colors:e.colors,animate:s,locale:e.locale}),startIndi:t.startIndi,startFam:t.startFam,svgSelector:e.svgSelector||"svg",horizontal:e.horizontal,baseGeneration:t.baseGeneration,animate:s}}(this.options,e,{initialRender:this.initialRender});this.initialRender=!1;var n=new this.options.chartType(t).render();return!1!==this.options.updateSvgSize&&r.select(t.svgSelector).attr("width",n.size[0]).attr("height",n.size[1]),n},e.prototype.setData=function(e){this.options.json=e},e}();t.createChart=function(e){return new a(e)}},471:function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),null===n?t.prototype=Object.create(n):(r.prototype=n.prototype,t.prototype=new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleRenderer=void 0;var i=n(39),a=n(239);function o(e){var t=i.select("svg").append("g").attr("class","simple node"),n=t.append("text").attr("class","name").text(e).node().getComputedTextLength();return t.remove(),n}function s(e){return[e.getFirstName()||"",e.getLastName()||""].join(" ")}function c(e){var t=e.getBirthDate(),n=t&&t.date&&t.date.year,r=e.getDeathDate(),i=r&&r.date&&r.date.year;return n||i?(n||"")+" \u2013 "+(i||""):""}var d=function(e){function t(t){var n=e.call(this,t)||this;return n.options=t,n}return r(t,e),t.prototype.getPreferredIndiSize=function(e){var t=this.options.data.getIndi(e),n=c(t);return[Math.max(o(s(t))+8,o(n),50),n?41:27]},t.prototype.render=function(e,t){var n=this,r=e.merge(t).append("g").attr("class","simple");this.renderIndi(r,(function(e){return e.indi}));var i=r.filter((function(e){return!!e.data.spouse})).append("g").attr("transform",(function(e){return n.options.horizontal?"translate(0, "+e.data.indi.height+")":"translate("+e.data.indi.width+", 0)"}));this.renderIndi(i,(function(e){return e.spouse}))},t.prototype.getCss=function(){return"\n.simple text {\n  font: 12px sans-serif;\n}\n\n.simple .name {\n  font-weight: bold;\n}\n\n.simple rect {\n  fill: #fff;\n  stroke: black;\n}\n\n.link {\n  fill: none;\n  stroke: #000;\n  stroke-width: 1px;\n}\n\n.additional-marriage {\n  stroke-dasharray: 2;\n}"},t.prototype.renderIndi=function(e,t){var n=this,r=this.options.indiHrefFunc?e.append("a").attr("href",(function(e){return n.options.indiHrefFunc(t(e.data).id)})):e;r.append("rect").attr("width",(function(e){return t(e.data).width})).attr("height",(function(e){return t(e.data).height})),r.append("text").attr("text-anchor","middle").attr("class","name").attr("transform",(function(e){return"translate("+t(e.data).width/2+", 17)"})).text((function(e){return s(n.options.data.getIndi(t(e.data).id))})),r.append("text").attr("text-anchor","middle").attr("class","details").attr("transform",(function(e){return"translate("+t(e.data).width/2+", 33)"})).text((function(e){return c(n.options.data.getIndi(t(e.data).id))}))},t}(a.CompositeRenderer);t.SimpleRenderer=d},503:function(e,t){},505:function(e,t){},527:function(e,t){},529:function(e,t){},557:function(e,t){},559:function(e,t){},560:function(e,t){},565:function(e,t){},567:function(e,t){},586:function(e,t){},598:function(e,t){},601:function(e,t){},616:function(e,t,n){},619:function(e,t,n){"use strict";n.r(t);var r,i=n(0),a=n(97),o=n(363),s=n(364),c=n(365),d=n(366),u=n(367),l=n(10),f=n.n(l),h=n(27),p=n(12),g=n(60);!function(e){e[e.UPLOADED=0]="UPLOADED",e[e.GEDCOM_URL=1]="GEDCOM_URL",e[e.EMBEDDED=2]="EMBEDDED"}(r||(r={}));var m=n(219),b=n(168),O=n.n(b),v=n(25),j=n(65),y=n(641),x=n(369),I=n(18),w=n(166),S=n(1),N=new Map([["ADOP","Adoption"],["BAPM","Baptism"],["BIRT","Birth"],["BURI","Burial"],["CENS","Census"],["CHR","Christening"],["CREM","Cremation"],["DEAT","Death"],["EDUC","Education"],["EMAIL","E-mail"],["EMIG","Emigration"],["EVEN","Event"],["FACT","Fact"],["IMMI","Immigration"],["MARR","Marriage"],["MARS","Marriage settlement"],["ETHN","Ethnic"],["TRIB","Clan"],["LANG","Language"],["DIV","Divorce"],["MILT","Military services"],["NATU","Naturalization"],["OCCU","Occupation"],["TITL","Title"],["WWW","WWW"],["birth","Birth name"],["married","Married name"],["maiden","Maiden name"],["immigrant","Immigrant name"],["aka","Also known as"]]);function C(e){var t=e.tag.replace(/_/g,"");return Object(S.jsx)(y.a,{id:"gedcom.".concat(t),defaultMessage:N.get(t)||t})}var _=n(651),E=n(657),R=n(653),k=n(377),D=n(645),M=n(80),P=n(650),A=n(378),L=n(654),T=n(642),F=n(655),H=n(652),z=n(176);function G(e){var t=Object(i.useState)(!1),n=Object(p.a)(t,2),r=n[0],a=n[1],o=Object(i.useState)(!1),s=Object(p.a)(o,2),c=s[0],d=s[1],u=Object(i.useState)(!1),l=Object(p.a)(u,2),f=l[0],h=l[1],g=Object(i.useState)(""),m=Object(p.a)(g,2),b=m[0],O=m[1];return c&&b!==e.url&&d(!1),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(A.a,{className:c?"loaded-image-thumbnail":"hidden-image",onClick:function(){return a(!0)},onLoad:function(){d(!0),O(e.url),h(!1)},onError:function(t){d(!0),O(e.url),h(!0),t.currentTarget.alt=""},src:e.url,alt:e.title||e.filename,centered:!0}),Object(S.jsx)(L.a,{className:c?"hidden-image":"image-placeholder",children:Object(S.jsx)(L.a.Image,{square:!0})}),f&&Object(S.jsx)(T.a,{fluid:!0,textAlign:"center",children:Object(S.jsx)(F.a,{negative:!0,compact:!0,children:Object(S.jsx)(F.a.Header,{children:Object(S.jsx)(y.a,{id:"error.failed_to_load_image",defaultMessage:"Failed to load image file"})})})}),Object(S.jsxs)(H.a,{basic:!0,size:"large",closeIcon:Object(S.jsx)(M.a,{name:"close",color:"red"}),open:r,onClose:function(){return a(!1)},onOpen:function(){return a(!0)},centered:!1,children:[Object(S.jsx)(H.a.Header,{children:e.title}),Object(S.jsx)(H.a.Content,{image:!0,children:Object(S.jsx)(A.a,{className:"modal-image",src:e.url,alt:e.title||e.filename,label:Object(S.jsx)(z.a,{attached:"bottom",content:e.filename}),wrapped:!0})})]})]})}var B=n(174),W=n.n(B);function U(e){return Object(S.jsx)(S.Fragment,{children:e.lines.map((function(e,t){return Object(S.jsxs)("div",{children:[Object(S.jsx)(W.a,{properties:{target:"_blank"},children:e}),Object(S.jsx)("br",{})]},t)}))})}function Y(e,t){return!!(null===e||void 0===e?void 0:e.length)&&Object(S.jsx)(R.a,{children:e.map((function(e,n){return Object(S.jsxs)(R.a.Item,{children:[Object(S.jsx)(R.a.Icon,{verticalAlign:"middle",name:"circle",size:"tiny"}),Object(S.jsxs)(R.a.Content,{children:[Object(S.jsx)(R.a.Header,{children:Object(S.jsx)(W.a,{properties:{target:"_blank"},children:[e.author,e.title,e.publicationInfo].filter((function(e){return e})).join(", ")})}),Object(S.jsxs)(R.a.Description,{children:[Object(S.jsx)(W.a,{properties:{target:"_blank"},children:e.page}),e.date?" ["+Object(j.b)(e.date,t)+"]":null]})]})]},n)}))})}function V(e){var t,n,r,a=Object(x.a)(),o=Object(i.useState)(-1),s=Object(p.a)(o,2),c=s[0],d=s[1],u=Object(i.useState)(""),l=Object(p.a)(u,2),f=l[0],h=l[1];function g(e,t){void 0!==t.index&&c!==t.index?d(t.index):d(-1)}f&&f===e.indi||(d(-1),h(e.indi));var m=[(null===(t=e.images)||void 0===t?void 0:t.length)&&{menuItem:Object(S.jsx)(k.a.Item,{fitted:!0,onClick:g,children:Object(S.jsx)(D.a,{content:Object(S.jsx)(y.a,{id:"extras.images",defaultMessage:"Images"}),size:"mini",position:"bottom center",trigger:Object(S.jsx)(M.a,{circular:!0,name:"camera"})})},"images"),render:function(){return Object(S.jsx)(P.a.Pane,{children:(t=e.images,!!t&&t.map((function(e,t){return Object(S.jsx)(R.a,{children:Object(S.jsx)(R.a.Item,{children:Object(S.jsx)(G,{url:e.url,filename:e.filename,title:e.title})})},t)})))});var t}},(null===(n=e.notes)||void 0===n?void 0:n.length)&&{menuItem:Object(S.jsx)(k.a.Item,{fitted:!0,onClick:g,children:Object(S.jsx)(D.a,{content:Object(S.jsx)(y.a,{id:"extras.notes",defaultMessage:"Notes"}),size:"mini",position:"bottom center",trigger:Object(S.jsx)(M.a,{circular:!0,name:"sticky note outline"})})},"notes"),render:function(){return Object(S.jsx)(P.a.Pane,{children:(t=e.notes,!!(null===t||void 0===t?void 0:t.length)&&t.map((function(e,t){return Object(S.jsx)("div",{children:Object(S.jsx)(U,{lines:e.map((function(e,t){return Object(S.jsx)("i",{children:e},t)}))})},t)})))});var t}},(null===(r=e.sources)||void 0===r?void 0:r.length)&&{menuItem:Object(S.jsx)(k.a.Item,{fitted:!0,onClick:g,children:Object(S.jsx)(D.a,{content:Object(S.jsx)(y.a,{id:"extras.sources",defaultMessage:"Sources"}),size:"mini",position:"bottom center",trigger:Object(S.jsx)(M.a,{circular:!0,name:"quote right"})})},"sources"),render:function(){return Object(S.jsx)(P.a.Pane,{children:Y(e.sources,a)})}}].flatMap((function(e){return e?[e]:[]}));return m.length?Object(S.jsx)(_.a.Description,{children:Object(S.jsx)(P.a,{className:"event-extras",activeIndex:c,renderActiveOnly:!0,menu:{tabular:!0,attached:!0,compact:!0,borderless:!0},panes:m})}):null}var J=n(41);function X(e){var t=Object(I.h)(),n=Object(v.f)(e.person),r=g.parse(t.search);return r.indi=Object(v.i)(e.person.pointer),Object(S.jsx)(_.a.Meta,{children:Object(S.jsx)(w.b,{to:{pathname:"/view",search:g.stringify(r)},children:n||Object(S.jsx)(y.a,{id:"name.unknown_name",defaultMessage:"N.N."})})})}var q=["BIRT","BAPM","CHR","FAMS","EVEN","CENS","DEAT","BURI"],K=["MARR","MARS","DIV"];function Z(e){var t=Object(x.a)();return Object(S.jsxs)("div",{className:"event-header",children:[Object(S.jsx)(E.a,{as:"span",size:"small",children:Object(S.jsx)(C,{tag:e.event.type})}),e.event.date?Object(S.jsx)(E.a,{as:"span",textAlign:"right",sub:!0,children:Object(j.b)(e.event.date,t)}):null]})}function $(e,t,n){var r=t.tree.filter((function(e){return["WIFE","HUSB"].includes(e.tag)})).find((function(t){return!t.data.includes(e)}));if(r)return Object(v.b)(r,n,(function(e){return e.indis}))}function Q(e){var t=e.tree.find((function(e){return"PLAC"===e.tag}));return(null===t||void 0===t?void 0:t.data)?Object(v.c)(t):void 0}function ee(e,t){return e.tree.filter((function(e){return"OBJE"===e.tag})).map((function(e){return Object(v.b)(e,t,(function(e){return e.other}))})).map((function(e){return Object(v.e)(e)})).flatMap((function(e){return e?[{url:(null===e||void 0===e?void 0:e.data)||"",filename:Object(v.d)(e)||""}]:[]}))}function te(e,t){return e.tree.filter((function(e){return"SOUR"===e.tag})).map((function(e){var n=Object(v.b)(e,t,(function(e){return e.other})),r=n.tree.find((function(e){return"TITL"===e.tag})),i=n.tree.find((function(e){return"ABBR"===e.tag})),a=n.tree.find((function(e){return"AUTH"===e.tag})),o=n.tree.find((function(e){return"PUBL"===e.tag})),s=e.tree.find((function(e){return"PAGE"===e.tag})),c=e.tree.find((function(e){return"DATA"===e.tag})),d=c?ie(c):void 0;return{title:(null===r||void 0===r?void 0:r.data)||(null===i||void 0===i?void 0:i.data),author:null===a||void 0===a?void 0:a.data,page:null===s||void 0===s?void 0:s.data,date:d?Object(J.getDate)(d.data):void 0,publicationInfo:null===o||void 0===o?void 0:o.data}}))}function ne(e,t){return e.tree.filter((function(e){return["NOTE","TYPE"].includes(e.tag)})).map((function(e){return Object(v.b)(e,t,(function(e){return e.other}))})).map((function(e){return Object(v.c)(e)}))}function re(e,t,n){return"FAMS"===e.tag?function(e,t,n){var r=Object(v.b)(e,t,(function(e){return e.fams}));return O()(K,(function(e){return r.tree.filter((function(t){return t.tag===e}))})).map((function(e){var i=ie(e)||null;return{date:i?Object(J.getDate)(i.data):void 0,type:e.tag,personLink:$(n,r,t),place:Q(e),images:ee(e,t),notes:ne(e,t),sources:te(e,t),indi:n}}))}(e,t,n):function(e,t,n){var r=ie(e)||null;return[{date:r?Object(J.getDate)(r.data):void 0,type:e.tag,place:Q(e),images:ee(e,t),notes:ne(e,t),sources:te(e,t),indi:n}]}(e,t,n)}function ie(e){return e.tree.find((function(e){return"DATE"===e.tag}))}function ae(e){return Object(S.jsx)(_.a,{children:Object(S.jsxs)(_.a.Content,{children:[Object(S.jsx)(Z,{event:e.event}),!!e.event.personLink&&Object(S.jsx)(X,{person:e.event.personLink}),!!e.event.place&&Object(S.jsx)(_.a.Description,{children:e.event.place}),Object(S.jsx)(V,{images:e.event.images,notes:e.event.notes,sources:e.event.sources,indi:e.event.indi})]})})}function oe(e){var t=O()(q,(function(t){return e.entries.filter((function(e){return e.tag===t})).map((function(t){return re(t,e.gedcom,e.indi)})).flatMap((function(e){return e})).sort((function(e,t){return Object(j.a)(e.date,t.date)}))}));return t.length?Object(S.jsx)(S.Fragment,{children:t.map((function(e,t){return Object(S.jsx)(ae,{event:e},t)}))}):null}var se=["BIRT","BAPM","CHR","EVEN","CENS","DEAT","BURI","NAME","SEX","FAMC","FAMS","NOTE","SOUR","LANG"];function ce(e){var t=Object(v.e)(e);return t?Object(S.jsx)("div",{className:"person-image",children:Object(S.jsx)(G,{url:t.data,filename:Object(v.d)(t)||""})}):null}function de(e){return Object(S.jsx)(U,{lines:Object(v.c)(e).map((function(e,t){return Object(S.jsx)("i",{children:e},t)}))})}function ue(e){var t,n=e.data.replaceAll("/",""),r=null===(t=e.tree.find((function(e){return"TYPE"===e.tag&&"Unknown"!==e.data})))||void 0===t?void 0:t.data;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(E.a,{as:"span",size:"large",children:n||Object(S.jsx)(y.a,{id:"name.unknown_name",defaultMessage:"N.N."})}),n&&r&&Object(S.jsx)(_.a.Meta,{children:Object(S.jsx)(C,{tag:r})})]})}function le(e,t,n){return O()(t,(function(t){return e.filter((function(e){return e.tag===t})).map((function(e){return n(e)}))})).filter((function(e){return null!==e})).map((function(e,t){return Object(S.jsx)(_.a,{children:Object(S.jsx)(_.a.Content,{children:e})},t)}))}function fe(e){return e.tree.length>0||e.data&&!e.data.startsWith("@")}function he(e){return e.filter((function(e){return!se.includes(e.tag)})).filter(fe).map((function(e){return function(e){var t=[];return e.data&&t.push.apply(t,Object(m.a)(Object(v.c)(e))),e.tree.filter((function(e){return"NOTE"===e.tag})).forEach((function(e){return Object(v.c)(e).forEach((function(e){return t.push(Object(S.jsx)("i",{children:e}))}))})),t.length?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(E.a,{sub:!0,children:Object(S.jsx)(C,{tag:e.tag})}),Object(S.jsx)("span",{children:Object(S.jsx)(U,{lines:t})})]}):null}(e)})).filter((function(e){return null!==e})).map((function(e,t){return Object(S.jsx)(_.a,{children:Object(S.jsx)(_.a.Content,{children:e})},t)}))}function pe(e,t,n){var r=e.filter((function(e){return t.includes(e.tag)})).filter(fe).map((function(e){return e.data}));return r.length?Object(S.jsx)(_.a,{children:Object(S.jsxs)(_.a.Content,{children:[Object(S.jsx)(E.a,{as:"span",children:Object(S.jsx)(y.a,{id:n[0],defaultMessage:n[1]})}),Object(S.jsx)("span",{children:Object(S.jsx)(U,{lines:r})})]})},"languages"):null}function ge(e){var t=e.gedcom.indis[e.indi].tree,n=t.map((function(t){return Object(v.b)(t,e.gedcom,(function(e){return e.other}))})).filter(fe);return Object(S.jsx)("div",{className:"details",children:Object(S.jsxs)(_.a.Group,{divided:!0,children:[le(t,["NAME"],ue),le(n,["OBJE"],ce),Object(S.jsx)(oe,{gedcom:e.gedcom,entries:t,indi:e.indi}),pe(n,["LANG"],["gedcom.languages","Languages"]),he(n),le(n,["NOTE"],de)]})})}var me,be=n(30),Oe=n(32),ve=n(100);!function(e){e.GEDCOM="gedcom",e.READY="ready",e.PARENT_READY="parent_ready"}(me||(me={}));var je=function(){function e(){Object(be.a)(this,e)}return Object(Oe.a)(e,[{key:"isNewData",value:function(e,t,n){return!1}},{key:"onMessage",value:function(){var e=Object(h.a)(f.a.mark((function e(t,n,r){var i,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.message!==me.PARENT_READY){e.next=4;break}window.parent.postMessage({message:me.READY},"*"),e.next=18;break;case 4:if(t.message!==me.GEDCOM){e.next=18;break}if(i=t.gedcom){e.next=8;break}return e.abrupt("return");case 8:return e.prev=8,e.next=11,Object(ve.e)("",i);case 11:a=e.sent,n(a),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),r(e.t0);case 18:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=Object(h.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){window.parent.postMessage({message:me.READY},"*"),window.addEventListener("message",(function(r){return n.onMessage(r.data,e,t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ye=n(131);function xe(e,t){return e instanceof ye.a?t.formatMessage({id:"error.".concat(e.code),defaultMessage:e.message},e.args):e.message}var Ie,we=n(658),Se=n(644),Ne=n(373),Ce=Object(Ne.createMedia)({breakpoints:{small:320,large:768}}),_e=Ce.createMediaStyle(),Ee=Ce.Media,Re=Ce.MediaContextProvider,ke=n(17),De=n(647);function Me(e){var t=Object(ke.a)({},e);return delete t.menuType,Object(S.jsx)(S.Fragment,{children:e.menuType===Ie.Menu?Object(S.jsx)(k.a.Item,Object(ke.a)(Object(ke.a)({},t),{},{children:e.children})):Object(S.jsx)(De.a.Item,Object(ke.a)(Object(ke.a)({},t),{},{children:e.children}))})}!function(e){e[e.Menu=0]="Menu",e[e.Dropdown=1]="Dropdown"}(Ie||(Ie={}));var Pe=n(374),Ae=n.n(Pe),Le=n(42),Te=n.n(Le),Fe=n(375),He=n.n(Fe);n(609)(Te.a),n(610)(Te.a),n(611)(Te.a),n(612)(Te.a),n(613)(Te.a);function ze(e){return e.toLocaleLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0142/g,"l")}function Ge(e,t){return e.score!==t.score?t.score-e.score:He()(e.ref,t.ref)}var Be=function(){function e(t){Object(be.a)(this,e),this.index=void 0,this.indiMap=void 0,this.famMap=void 0,this.indiMap=Object(v.h)(t),this.famMap=Object(v.g)(t)}return Object(Oe.a)(e,[{key:"initialize",value:function(){var e=this;this.index=Te()((function(){var t=this;e.initMultiLingualLunrWithoutTrimmer(this,["de","en","fr","it","ru"]),this.ref("id"),this.field("id"),this.field("name",{boost:10}),this.field("normalizedName",{boost:8}),this.field("spouseLastName",{boost:2}),this.field("normalizedSpouseLastName",{boost:2}),e.indiMap.forEach((function(n){var r=[n.firstName,n.lastName].join(" "),i=function(e,t,n){return(e.fams||[]).map((function(e){return n.get(e)})).map((function(e){return e&&e.husb})).map((function(e){return e&&t.get(e)})).map((function(e){return e&&e.lastName})).join(" ")}(n,e.indiMap,e.famMap);t.add({id:n.id,name:r,normalizedName:ze(r),spouseLastName:i,normalizedSpouseLastName:ze(i)})}))}))}},{key:"initMultiLingualLunrWithoutTrimmer",value:function(e,t){var n=[],r=[];t.forEach((function(e){"en"===e?("\\w",n.unshift(Te.a.stopWordFilter),n.push(Te.a.stemmer),r.push(Te.a.stemmer)):(Te.a[e].wordCharacters,Te.a[e].stopWordFilter&&n.unshift(Te.a[e].stopWordFilter),Te.a[e].stemmer&&(n.push(Te.a[e].stemmer),r.push(Te.a[e].stemmer)))})),e.pipeline.reset(),e.pipeline.add.apply(e.pipeline,n),e.searchPipeline&&(e.searchPipeline.reset(),e.searchPipeline.add.apply(e.searchPipeline,r))}},{key:"search",value:function(e){var t=this,n=e.split(" ").filter((function(e){return!!e})).map((function(e){return"".concat(e," ").concat(e,"*")})).join(" ");return this.index.search(n).sort(Ge).slice(0,8).map((function(e){return{id:e.ref,indi:t.indiMap.get(e.ref)}}))}}]),e}();var We=n(646);function Ue(e){var t=[e.indi.firstName,e.indi.lastName].join(" ").trim();return e.id.length>8?t:Object(S.jsxs)(S.Fragment,{children:[t," ",Object(S.jsxs)("i",{children:["(",e.id,")"]})]})}function Ye(e){var t=Object(i.useState)([]),n=Object(p.a)(t,2),r=n[0],a=n[1],o=Object(i.useState)(""),s=Object(p.a)(o,2),c=s[0],d=s[1],u=Object(i.useRef)(),l=Object(x.a)();function f(e){var t=Object(j.b)(e.birth,l),n=Object(j.b)(e.death,l);return n?"".concat(t," \u2013 ").concat(n):t}var h=Object(i.useRef)(Ae()((function(e){if(e){var t=u.current.search(e).map((function(e){return function(e){return{id:e.id,key:e.id,title:Ue(e),description:f(e.indi)}}(e)}));a(t)}}),200));return Object(i.useEffect)((function(){u.current=function(e){var t=new Be(e);return t.initialize(),t}(e.data)}),[e.data]),Object(S.jsx)(We.a,{onSearchChange:function(e,t){return n=t.value,h.current(n),void d(n);var n},onResultSelect:function(t,n){return r=n.result.id,e.onSelection({id:r,generation:0}),void d("");var r},results:r,noResultsMessage:l.formatMessage({id:"menu.search.no_results",defaultMessage:"No results found"}),placeholder:l.formatMessage({id:"menu.search.placeholder",defaultMessage:"Search for people"}),selectFirstResult:!0,value:c,id:"search"})}var Ve=n(271),Je=n.n(Ve);function Xe(e){var t=e.toLowerCase();return t.endsWith(".jpg")||t.endsWith(".png")}function qe(e){var t=Object(I.g)(),n=Object(I.h)();function r(){return(r=Object(h.a)(f.a.mark((function e(r){var i,a,o,s,c,d,u,l,h;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=r.target.files)&&i.length){e.next=3;break}return e.abrupt("return");case 3:return a=Array.from(i),r.target.value="",o=1===a.length?a[0]:a.find((function(e){return e.name.toLowerCase().endsWith(".ged")}))||a[0],e.next=8,Object(ve.d)(o);case 8:s=e.sent,c=s.gedcom,d=s.images,a.filter((function(e){return e.name!==o.name&&Xe(e.name)})).forEach((function(e){return d.set(e.name,URL.createObjectURL(e))})),u=Array.from(d.keys()).sort().join("|"),l=Je()(Je()(c)+u),h=g.parse(n.search),(h.file===l?t.replace:t.push)({pathname:"/view",search:g.stringify({file:l}),state:{data:c,images:d}});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var i=Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(M.a,{name:"folder open"}),Object(S.jsx)(y.a,{id:"menu.open_file",defaultMessage:"Open file"})]});return Object(S.jsxs)(S.Fragment,{children:[e.menuType===Ie.Menu?Object(S.jsx)("label",{htmlFor:"fileInput",children:Object(S.jsx)(k.a.Item,{as:"a",children:i})}):Object(S.jsx)(De.a.Item,{as:"label",htmlFor:"fileInput",children:i}),Object(S.jsx)("input",{className:"hidden",type:"file",accept:".ged,.gdz,.gedzip,.zip,image/*",id:"fileInput",multiple:!0,onChange:function(e){return r.apply(this,arguments)}})]})}var Ke,Ze=n(648),$e=n(643),Qe=n(623);function et(e){var t=Object(i.useState)(!1),n=Object(p.a)(t,2),r=n[0],a=n[1],o=Object(i.useState)(""),s=Object(p.a)(o,2),c=s[0],d=s[1],u=Object(i.useRef)(null),l=Object(I.g)();function f(){a(!1),c&&l.push({pathname:"/view",search:g.stringify({url:c})})}return Object(i.useEffect)((function(){r&&(d(""),u.current.focus())}),[r]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(Me,{onClick:function(){return a(!0)},menuType:e.menuType,children:[Object(S.jsx)(M.a,{name:"cloud download"}),Object(S.jsx)(y.a,{id:"menu.load_from_url",defaultMessage:"Load from URL"})]}),Object(S.jsxs)(H.a,{open:r,onClose:function(){return a(!1)},centered:!1,children:[Object(S.jsxs)(E.a,{children:[Object(S.jsx)(M.a,{name:"cloud download"}),Object(S.jsx)(y.a,{id:"load_from_url.title",defaultMessage:"Load from URL"})]}),Object(S.jsx)(H.a.Content,{children:Object(S.jsxs)(Ze.a,{onSubmit:f,children:[Object(S.jsx)($e.a,{placeholder:"https://",fluid:!0,value:c,onChange:function(e,t){return d(t.value)},ref:u}),Object(S.jsx)("p",{children:Object(S.jsx)(y.a,{id:"load_from_url.comment",defaultMessage:"Data from the URL will be loaded through {link} to avoid CORS issues.",values:{link:Object(S.jsx)("a",{href:"https://topolaproxy.bieda.it/",children:"topolaproxy.bieda.it (cors-anywhere proxy)"})}})})]})}),Object(S.jsxs)(H.a.Actions,{children:[Object(S.jsx)(Qe.a,{secondary:!0,onClick:function(){return a(!1)},children:Object(S.jsx)(y.a,{id:"load_from_url.cancel",defaultMessage:"Cancel"})}),Object(S.jsx)(Qe.a,{primary:!0,onClick:f,children:Object(S.jsx)(y.a,{id:"load_from_url.load",defaultMessage:"Load"})})]})]})]})}function tt(e){function t(t){if(!e.showingChart)return null;switch(t){case Ke.LARGE:return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(De.a,{trigger:Object(S.jsxs)("div",{children:[Object(S.jsx)(M.a,{name:"download"}),Object(S.jsx)(y.a,{id:"menu.download",defaultMessage:"Download"})]}),className:"item",children:Object(S.jsxs)(De.a.Menu,{children:[Object(S.jsx)(De.a.Item,{onClick:e.eventHandlers.onDownloadPdf,children:Object(S.jsx)(y.a,{id:"menu.pdf_file",defaultMessage:"PDF file"})}),Object(S.jsx)(De.a.Item,{onClick:e.eventHandlers.onDownloadPng,children:Object(S.jsx)(y.a,{id:"menu.png_file",defaultMessage:"PNG file"})}),Object(S.jsx)(De.a.Item,{onClick:e.eventHandlers.onDownloadSvg,children:Object(S.jsx)(y.a,{id:"menu.svg_file",defaultMessage:"SVG file"})})]})}),Object(S.jsxs)(k.a.Item,{onClick:e.eventHandlers.onCenterView,children:[Object(S.jsx)(M.a,{name:"eye"}),Object(S.jsx)(y.a,{id:"menu.view",defaultMessage:"Center view"})]}),Object(S.jsx)(k.a.Menu,{position:"right",children:Object(S.jsx)(Ye,Object(ke.a)({data:e.data,onSelection:e.eventHandlers.onSelection},e))})]});case Ke.SMALL:return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(De.a.Item,{onClick:e.eventHandlers.onDownloadPdf,children:[Object(S.jsx)(M.a,{name:"download"}),Object(S.jsx)(y.a,{id:"menu.download_pdf",defaultMessage:"Download PDF"})]}),Object(S.jsxs)(De.a.Item,{onClick:e.eventHandlers.onDownloadPng,children:[Object(S.jsx)(M.a,{name:"download"}),Object(S.jsx)(y.a,{id:"menu.download_png",defaultMessage:"Download PNG"})]}),Object(S.jsxs)(De.a.Item,{onClick:e.eventHandlers.onDownloadSvg,children:[Object(S.jsx)(M.a,{name:"download"}),Object(S.jsx)(y.a,{id:"menu.download_svg",defaultMessage:"Download SVG"})]}),Object(S.jsx)(De.a.Divider,{})]})}}function n(t){if(!e.standalone)return null;switch(t){case Ke.LARGE:return e.showingChart?Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(qe,Object(ke.a)({menuType:Ie.Menu},e))}):Object(S.jsx)(De.a,{trigger:Object(S.jsxs)("div",{children:[Object(S.jsx)(M.a,{name:"folder open"}),Object(S.jsx)(y.a,{id:"menu.open",defaultMessage:"Open"})]}),className:"item",children:Object(S.jsxs)(De.a.Menu,{children:[Object(S.jsx)(qe,Object(ke.a)({menuType:Ie.Dropdown},e)),Object(S.jsx)(et,Object(ke.a)({menuType:Ie.Dropdown},e))]})});case Ke.SMALL:return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(qe,Object(ke.a)({menuType:Ie.Dropdown},e)),Object(S.jsx)(De.a.Divider,{})]})}}return Object(I.g)(),Object(I.h)(),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(k.a,{as:Ee,greaterThanOrEqual:"large",attached:"top",inverted:!0,color:"blue",size:"large",children:Object(S.jsxs)(S.Fragment,{children:[n(Ke.LARGE),t(Ke.LARGE)]})}),Object(S.jsx)(k.a,{as:Ee,at:"small",attached:"top",inverted:!0,color:"blue",size:"large",children:Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(De.a,{trigger:Object(S.jsx)("div",{children:Object(S.jsx)(M.a,{name:"sidebar"})}),className:"item",icon:null,children:Object(S.jsxs)(De.a.Menu,{children:[n(Ke.SMALL),t(Ke.SMALL)]})})})})]})}!function(e){e[e.LARGE=0]="LARGE",e[e.SMALL=1]="SMALL"}(Ke||(Ke={}));var nt,rt,it,at,ot=n(659);!function(e){e[e.NO_COLOR=0]="NO_COLOR",e[e.COLOR_BY_SEX=1]="COLOR_BY_SEX",e[e.COLOR_BY_GENERATION=2]="COLOR_BY_GENERATION",e[e.COLOR_BY_TRIBE=3]="COLOR_BY_TRIBE"}(nt||(nt={})),function(e){e[e.HIDE=0]="HIDE",e[e.SHOW=1]="SHOW"}(rt||(rt={})),function(e){e[e.HIDE=0]="HIDE",e[e.SHOW=1]="SHOW"}(it||(it={})),function(e){e[e.HIDE=0]="HIDE",e[e.SHOW=1]="SHOW"}(at||(at={}));var st={color:nt.COLOR_BY_GENERATION,id:rt.SHOW,sex:it.SHOW,tribe:at.HIDE},ct=new Map([["n",nt.NO_COLOR],["g",nt.COLOR_BY_GENERATION],["s",nt.COLOR_BY_SEX],["t",nt.COLOR_BY_TRIBE]]),dt=new Map;ct.forEach((function(e,t){return dt.set(e,t)}));var ut=new Map([["h",rt.HIDE],["s",rt.SHOW]]),lt=new Map;ut.forEach((function(e,t){return lt.set(e,t)}));var ft=new Map([["h",it.HIDE],["s",it.SHOW]]),ht=new Map;ft.forEach((function(e,t){return ht.set(e,t)}));var pt=new Map([["h",at.HIDE],["s",at.SHOW]]),gt=new Map;function mt(e){var t,n,r,i,a,o,s,c,d=function(t){var n=e[t];return"string"===typeof n?n:void 0};return{color:null!==(t=ct.get(null!==(n=d("c"))&&void 0!==n?n:""))&&void 0!==t?t:st.color,id:null!==(r=ut.get(null!==(i=d("i"))&&void 0!==i?i:""))&&void 0!==r?r:st.id,sex:null!==(a=ft.get(null!==(o=d("s"))&&void 0!==o?o:""))&&void 0!==a?a:st.sex,tribe:null!==(s=pt.get(null!==(c=d("s"))&&void 0!==c?c:""))&&void 0!==s?s:st.tribe}}function bt(e){return Object(S.jsx)(Ze.a,{className:"details",children:Object(S.jsxs)(_.a.Group,{children:[Object(S.jsx)(_.a,{children:Object(S.jsxs)(_.a.Content,{children:[Object(S.jsx)(E.a,{sub:!0,children:Object(S.jsx)(y.a,{id:"config.colors",defaultMessage:"Colors"})}),Object(S.jsx)(Ze.a.Field,{className:"no-margin",children:Object(S.jsx)(ot.a,{radio:!0,label:Object(S.jsx)(y.a,{tagName:"label",id:"config.colors.NO_COLOR",defaultMessage:"none"}),name:"checkboxRadioGroup",value:"none",checked:e.config.color===nt.NO_COLOR,onClick:function(){return e.onChange(Object(ke.a)(Object(ke.a)({},e.config),{},{color:nt.NO_COLOR}))}})}),Object(S.jsx)(Ze.a.Field,{className:"no-margin",children:Object(S.jsx)(ot.a,{radio:!0,label:Object(S.jsx)(y.a,{tagName:"label",id:"config.colors.COLOR_BY_GENERATION",defaultMessage:"by generation"}),name:"checkboxRadioGroup",value:"generation",checked:e.config.color===nt.COLOR_BY_GENERATION,onClick:function(){return e.onChange(Object(ke.a)(Object(ke.a)({},e.config),{},{color:nt.COLOR_BY_GENERATION}))}})}),Object(S.jsx)(Ze.a.Field,{className:"no-margin",children:Object(S.jsx)(ot.a,{radio:!0,label:Object(S.jsx)(y.a,{tagName:"label",id:"config.colors.COLOR_BY_SEX",defaultMessage:"by sex"}),name:"checkboxRadioGroup",value:"gender",checked:e.config.color===nt.COLOR_BY_SEX,onClick:function(){return e.onChange(Object(ke.a)(Object(ke.a)({},e.config),{},{color:nt.COLOR_BY_SEX}))}})}),Object(S.jsx)(Ze.a.Field,{className:"no-margin",children:Object(S.jsx)(ot.a,{radio:!0,label:Object(S.jsx)(y.a,{tagName:"label",id:"config.colors.COLOR_BY_TRIBE",defaultMessage:"by tribe"}),name:"checkboxRadioGroup",value:"tribe",checked:e.config.color===nt.COLOR_BY_TRIBE,onClick:function(){return e.onChange(Object(ke.a)(Object(ke.a)({},e.config),{},{color:nt.COLOR_BY_TRIBE}))}})})]})}),Object(S.jsx)(_.a,{children:Object(S.jsxs)(_.a.Content,{children:[Object(S.jsx)(E.a,{sub:!0,children:Object(S.jsx)(y.a,{id:"config.tribe",defaultMessage:"Tribe"})}),Object(S.jsx)(Ze.a.Field,{className:"no-margin",children:Object(S.jsx)(ot.a,{radio:!0,label:Object(S.jsx)(y.a,{tagName:"label",id:"config.tribe.HIDE",defaultMessage:"hide"}),name:"checkboxRadioGroup",value:"hide",checked:e.config.tribe===at.HIDE,onClick:function(){return e.onChange(Object(ke.a)(Object(ke.a)({},e.config),{},{tribe:at.HIDE}))}})}),Object(S.jsx)(Ze.a.Field,{className:"no-margin",children:Object(S.jsx)(ot.a,{radio:!0,label:Object(S.jsx)(y.a,{tagName:"label",id:"config.tribe.SHOW",defaultMessage:"show"}),name:"checkboxRadioGroup",value:"show",checked:e.config.tribe===at.SHOW,onClick:function(){return e.onChange(Object(ke.a)(Object(ke.a)({},e.config),{},{tribe:at.SHOW}))}})})]})}),Object(S.jsx)(_.a,{children:Object(S.jsxs)(_.a.Content,{children:[Object(S.jsx)(E.a,{sub:!0,children:Object(S.jsx)(y.a,{id:"config.ids",defaultMessage:"IDs"})}),Object(S.jsx)(Ze.a.Field,{className:"no-margin",children:Object(S.jsx)(ot.a,{radio:!0,label:Object(S.jsx)(y.a,{tagName:"label",id:"config.ids.HIDE",defaultMessage:"hide"}),name:"checkboxRadioGroup",value:"hide",checked:e.config.id===rt.HIDE,onClick:function(){return e.onChange(Object(ke.a)(Object(ke.a)({},e.config),{},{id:rt.HIDE}))}})}),Object(S.jsx)(Ze.a.Field,{className:"no-margin",children:Object(S.jsx)(ot.a,{radio:!0,label:Object(S.jsx)(y.a,{tagName:"label",id:"config.ids.SHOW",defaultMessage:"show"}),name:"checkboxRadioGroup",value:"show",checked:e.config.id===rt.SHOW,onClick:function(){return e.onChange(Object(ke.a)(Object(ke.a)({},e.config),{},{id:rt.SHOW}))}})})]})}),Object(S.jsx)(_.a,{children:Object(S.jsxs)(_.a.Content,{children:[Object(S.jsx)(E.a,{sub:!0,children:Object(S.jsx)(y.a,{id:"config.sex",defaultMessage:"Sex"})}),Object(S.jsx)(Ze.a.Field,{className:"no-margin",children:Object(S.jsx)(ot.a,{radio:!0,label:Object(S.jsx)(y.a,{tagName:"label",id:"config.sex.HIDE",defaultMessage:"hide"}),name:"checkboxRadioGroup",value:"hide",checked:e.config.sex===it.HIDE,onClick:function(){return e.onChange(Object(ke.a)(Object(ke.a)({},e.config),{},{sex:it.HIDE}))}})}),Object(S.jsx)(Ze.a.Field,{className:"no-margin",children:Object(S.jsx)(ot.a,{radio:!0,label:Object(S.jsx)(y.a,{tagName:"label",id:"config.sex.SHOW",defaultMessage:"show"}),name:"checkboxRadioGroup",value:"show",checked:e.config.sex===it.SHOW,onClick:function(){return e.onChange(Object(ke.a)(Object(ke.a)({},e.config),{},{sex:it.SHOW}))}})})]})})]})})}pt.forEach((function(e,t){return gt.set(e,t)}));var Ot,vt=n(81),jt=n(165),yt=n(109),xt=n(272),It=n(192),wt=(n(110),n(154));function St(e,t){var n=Object(It.a)("#svgContainer").node(),r=t.transform.k,i=Object(jt.a)([0,(n.clientWidth-e[0]*r)/2]),a=Object(jt.a)([0,(n.clientHeight-e[1]*r)/2]);Object(It.a)("#chartSvg").attr("width",e[0]*r).attr("height",e[1]*r).attr("transform","translate(".concat(i,", ").concat(a,")")),Object(It.a)("#chart").attr("transform","scale(".concat(r,")")),n.scrollLeft=-t.transform.x,n.scrollTop=-t.transform.y}function Nt(){var e=Object(It.a)("#svgContainer").node(),t=e.scrollLeft+e.clientWidth/2,n=e.scrollTop+e.clientHeight/2,r=Object(wt.b)(e).k;Object(It.a)(e).call(Object(wt.a)().translateTo,t/r,n/r)}function Ct(e){var t=new FileReader;return t.readAsDataURL(e),new Promise((function(e){t.onload=function(t){return e(t.target.result)}}))}function _t(e){return Et.apply(this,arguments)}function Et(){return(Et=Object(h.a)(f.a.mark((function e(t){var n,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.href.baseVal){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,fetch(n);case 6:return r=e.sent,e.next=9,r.blob();case 9:return i=e.sent,e.next=12,Ct(i);case 12:t.href.baseVal=e.sent,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.warn("Failed to load image:",e.t0);case 18:case"end":return e.stop()}}),e,null,[[3,15]])})))).apply(this,arguments)}function Rt(e){return kt.apply(this,arguments)}function kt(){return(kt=Object(h.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(t.getElementsByTagName("image")),e.next=3,Promise.all(n.map(_t));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dt(e){var t=new Image;return t.src=URL.createObjectURL(e),new Promise((function(e){t.addEventListener("load",(function(){return e(t)}))}))}function Mt(e){var t=document.createElement("canvas");t.width=2*e.width,t.height=2*e.height;var n=t.getContext("2d"),r=n.fillStyle;return n.fillStyle="white",n.fillRect(0,0,t.width,t.height),n.fillStyle=r,n.drawImage(e,0,0,t.width,t.height),t}function Pt(e,t){return new Promise((function(n,r){e.toBlob((function(e){e?n(e):r()}),t)}))}function At(){var e=document.getElementById("chartSvg").cloneNode(!0);e.removeAttribute("transform");var t=Object(It.a)("#svgContainer").node(),n=Object(wt.b)(t).k;return e.setAttribute("width",String(Number(e.getAttribute("width"))/n)),e.setAttribute("height",String(Number(e.getAttribute("height"))/n)),e.querySelector("#chart").removeAttribute("transform"),e}function Lt(){return Tt.apply(this,arguments)}function Tt(){return(Tt=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=At(),e.next=3,Rt(t);case 3:return e.abrupt("return",(new XMLSerializer).serializeToString(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ft(){return(Ft=Object(h.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lt();case 2:t=e.sent,n=new Blob([t],{type:"image/svg+xml"}),Object(xt.saveAs)(n,"genealogy.svg");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ht(){return zt.apply(this,arguments)}function zt(){return(zt=Object(h.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lt();case 2:return t=e.sent,n=new Blob([t],{type:"image/svg+xml"}),e.t0=Mt,e.next=7,Dt(n);case 7:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gt(){return Bt.apply(this,arguments)}function Bt(){return(Bt=Object(h.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht();case 2:return t=e.sent,e.next=5,Pt(t,"image/png");case 5:n=e.sent,Object(xt.saveAs)(n,"genealogy.png");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wt(){return Ut.apply(this,arguments)}function Ut(){return(Ut=Object(h.a)(f.a.mark((function e(){var t,r,i,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(4).then(n.bind(null,1035));case 2:return t=e.sent,r=t.default,e.next=6,Ht();case 6:i=e.sent,(a=new r({orientation:i.width>i.height?"l":"p",unit:"pt",format:[i.width,i.height]})).addImage(i,"PNG",0,0,i.width,i.height,"NONE"),a.save("genealogy.pdf");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e[e.Hourglass=0]="Hourglass"}(Ot||(Ot={}));var Yt=new Map([[nt.NO_COLOR,J.ChartColors.NO_COLOR],[nt.COLOR_BY_GENERATION,J.ChartColors.COLOR_BY_GENERATION],[nt.COLOR_BY_SEX,J.ChartColors.COLOR_BY_SEX]]),Vt=function(){function e(){Object(be.a)(this,e),this.chart=void 0,this.animating=!1,this.rerenderRequired=!1,this.zoomBehavior=void 0,this.rerenderProps=void 0,this.rerenderResetPosition=void 0}return Object(Oe.a)(e,[{key:"zoom",value:function(e){var t=Object(It.a)("#svgContainer");this.zoomBehavior.scaleBy(t,e)}},{key:"renderChart",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{initialRender:!1,resetPosition:!1};if(!r.initialRender&&this.animating)return this.rerenderRequired=!0,this.rerenderProps=e,void(this.rerenderResetPosition=r.resetPosition);if(r.initialRender||!e.freezeAnimation){r.initialRender?(Object(It.a)("#chart").node().innerHTML="",this.chart=Object(J.createChart)({json:e.data,chartType:J.HourglassChart,renderer:J.DetailedRenderer,svgSelector:"#chart",indiCallback:function(t){return e.onSelection(t)},colors:Yt.get(e.colors),animate:!0,updateSvgSize:!1,locale:t.locale})):this.chart.setData(e.data);var i=this.chart.render({startIndi:e.selection.id,baseGeneration:e.selection.generation}),a=Object(It.a)("#chartSvg"),o=Object(It.a)("#svgContainer").node(),s=Object(wt.b)(o).k,c=Object(yt.a)([1,s,o.clientWidth/i.size[0],o.clientHeight/i.size[1]]),d=[Object(jt.a)([.1,c]),2];this.zoomBehavior=Object(wt.a)().scaleExtent(d).translateExtent([[0,0],i.size]).on("zoom",(function(e){return St(i.size,e)})),Object(It.a)(o).on("scroll",Nt).call(this.zoomBehavior);var u=function(e){return function(){var t=Object(vt.a)(o.scrollTop,e);return function(e){o.scrollTop=t(e)}}},l=function(e){return function(){var t=Object(vt.a)(o.scrollLeft,e);return function(e){o.scrollLeft=t(e)}}},f=o.clientWidth/2-i.origin[0]*s,h=o.clientHeight/2-i.origin[1]*s,p=Object(jt.a)([0,(o.clientWidth-i.size[0]*s)/2]),g=Object(jt.a)([0,(o.clientHeight-i.size[1]*s)/2]),m=a.transition().delay(200).duration(500),b=r.initialRender?a:m;b.attr("transform","translate(".concat(p,", ").concat(g,")")).attr("width",i.size[0]*s).attr("height",i.size[1]*s),r.resetPosition&&(r.initialRender?(o.scrollLeft=-f,o.scrollTop=-h):m.tween("scrollLeft",l(-f)).tween("scrollTop",u(-h))),this.animating=!0,i.animationPromise.then((function(){n.animating=!1,n.rerenderRequired&&(n.rerenderRequired=!1,n.renderChart(n.rerenderProps,t,{initialRender:!1,resetPosition:!!n.rerenderResetPosition}))}))}}}]),e}();function Jt(e){var t=Object(i.useRef)(new Vt),n=function(e){var t=Object(i.useRef)();return Object(i.useEffect)((function(){t.current=e})),t.current}(e),r=Object(x.a)();return Object(i.useEffect)((function(){if(n){var i=e.chartType!==(null===n||void 0===n?void 0:n.chartType)||e.colors!==(null===n||void 0===n?void 0:n.colors)||e.hideIds!==(null===n||void 0===n?void 0:n.hideIds)||e.hideSex!==(null===n||void 0===n?void 0:n.hideSex),a=e.chartType!==(null===n||void 0===n?void 0:n.chartType)||e.data!==n.data||e.selection!==n.selection;t.current.renderChart(e,r,{initialRender:i,resetPosition:a})}else t.current.renderChart(e,r,{initialRender:!0,resetPosition:!0})})),Object(S.jsxs)("div",{id:"svgContainer",children:[Object(S.jsxs)(Ee,{greaterThanOrEqual:"large",className:"zoom",children:[Object(S.jsx)("button",{className:"zoom-in",onClick:function(){return t.current.zoom(1.3)},children:"+"}),Object(S.jsx)("button",{className:"zoom-out",onClick:function(){return t.current.zoom(1/1.3)},children:"\u2212"})]}),Object(S.jsx)("svg",{id:"chartSvg",children:Object(S.jsx)("g",{id:"chart"})})]})}var Xt,qt=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_STATIC_URL;function Kt(e){return Object(S.jsxs)(F.a,{negative:!0,className:"error",children:[Object(S.jsx)(F.a.Header,{children:Object(S.jsx)(y.a,{id:"error.failed_to_load_file",defaultMessage:"Failed to load file"})}),Object(S.jsx)("p",{children:e.message})]})}function Zt(e){return Object(S.jsx)(we.a,{open:e.open,onClose:e.onDismiss,children:Object(S.jsxs)(F.a,{negative:!0,className:"errorPopup",onDismiss:e.onDismiss,children:[Object(S.jsx)(F.a.Header,{children:Object(S.jsx)(y.a,{id:"error.error",defaultMessage:"Error"})}),Object(S.jsx)("p",{children:e.message})]})})}function $t(e){var t,n,r,i=function(e){var t;return Object.entries((null===e||void 0===e||null===(t=e.gedcom)||void 0===t?void 0:t.other)||{}).filter((function(e){var t=Object(p.a)(e,2);t[0];return"EGO"===t[1].tag})).map((function(e){var t,n=Object(p.a)(e,2);n[0];return null===(t=n[1].tree.find((function(e){return"GEN"===e.tag})))||void 0===t?void 0:t.data})).find((function(e){return void 0!==e}))}(e);return{id:(null===e||void 0===e||null===(t=e.chartData)||void 0===t||null===(n=t.indis)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.id)||"I0",generation:void 0!==i?-parseInt(i,10):0}}function Qt(e){var t=new Map([["hourglass",Ot.Hourglass]]),n=g.parse(e.search),i=function(e){return function(e,t){var n=t[e];return"string"===typeof n?n:void 0}(e,n)},a=i("view"),o=i("file"),s=i("url"),c="true"===i("embedded"),d=void 0;qt?d={source:r.GEDCOM_URL,url:qt,handleCors:!1}:o?d={source:r.UPLOADED,hash:o,gedcom:e.state&&e.state.data,images:e.state&&e.state.images}:s?d={source:r.GEDCOM_URL,url:s,handleCors:"false"!==i("handleCors")}:c&&(d={source:r.EMBEDDED});var u=i("indi"),l=Number(i("gen"));return{sourceSpec:d,selection:u?{id:u,generation:isNaN(l)?0:l}:void 0,chartType:t.get(a)||Ot.Hourglass,showSidePanel:"false"!==i("sidePanel"),standalone:"false"!==i("standalone")&&!c&&!qt,freezeAnimation:"true"===i("freeze"),config:mt(n)}}!function(e){e[e.INITIAL=0]="INITIAL",e[e.LOADING=1]="LOADING",e[e.ERROR=2]="ERROR",e[e.SHOWING_CHART=3]="SHOWING_CHART",e[e.LOADING_MORE=4]="LOADING_MORE"}(Xt||(Xt={}));var en=n(376),tn=n(649),nn=(n(616),n(617),n(618),{de:o,fr:s,it:c,es:d,pl:u}),rn=navigator.language&&navigator.language.split(/[-_]/)[0],an=Object(en.a)();an&&"ie"===an.name?a.render(Object(S.jsx)("p",{children:"Genealogy Viewer does not support Internet Explorer. Please try a different (modern) browser."}),document.querySelector("#root")):a.render(Object(S.jsx)(tn.a,{locale:rn,messages:nn[rn],children:Object(S.jsxs)(Re,{children:[Object(S.jsx)("style",{children:_e}),Object(S.jsx)(w.a,{children:Object(S.jsx)(I.b,{component:function(){var e=Object(i.useState)(Xt.INITIAL),t=Object(p.a)(e,2),n=t[0],a=t[1],o=Object(i.useState)(),s=Object(p.a)(o,2),c=s[0],d=s[1],u=Object(i.useState)(),l=Object(p.a)(u,2),m=l[0],b=l[1],O=Object(i.useState)(),j=Object(p.a)(O,2),y=j[0],w=j[1],N=Object(i.useState)(!1),C=Object(p.a)(N,2),_=C[0],E=C[1],R=Object(i.useState)(!0),k=Object(p.a)(R,2),D=k[0],M=k[1],A=Object(i.useState)(Ot.Hourglass),L=Object(p.a)(A,2),T=L[0],F=L[1],H=Object(i.useState)(!1),z=Object(p.a)(H,2),G=z[0],B=z[1],W=Object(i.useState)(),U=Object(p.a)(W,2),Y=U[0],V=U[1],J=Object(i.useState)(!1),X=Object(p.a)(J,2),q=X[0],K=X[1],Z=Object(i.useState)(st),$=Object(p.a)(Z,2),Q=$[0],ee=$[1],te=Object(x.a)(),ne=Object(I.g)(),re=Object(I.h)();function ie(e,t){if(void 0!==t){var n=e.id===rt.HIDE,r=e.sex===it.HIDE;Object(v.h)(t.chartData).forEach((function(e){e.hideId=n,e.hideSex=r}))}}var ae=new ve.b,oe=new ve.a,se=new je;function ce(e,t){if(!Y||Y.source!==e.source)return!0;var n={spec:e,selection:t},i={spec:Y,selection:m};switch(n.spec.source){case r.UPLOADED:return ae.isNewData(n,i,c);case r.GEDCOM_URL:return oe.isNewData(n,i,c);case r.EMBEDDED:return se.isNewData(n,i,c)}}function de(e,t){switch(e.source){case r.UPLOADED:return ae.loadData({spec:e,selection:t});case r.GEDCOM_URL:return oe.loadData({spec:e,selection:t});case r.EMBEDDED:return se.loadData({spec:e,selection:t})}}function ue(e){var t=g.parse(re.search);for(var n in e)t[n]=e[n];re.search=g.stringify(t),ne.push(re)}function le(e){ue({indi:e.id,gen:e.generation})}function fe(e){B(!0),w(e)}function he(){return pe.apply(this,arguments)}function pe(){return(pe=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wt();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),fe(te.formatMessage({id:"error.failed_pdf",defaultMessage:"Failed to generate PDF file. Please try with a smaller diagram or download an SVG file."}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function me(){return be.apply(this,arguments)}function be(){return(be=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gt();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),fe(te.formatMessage({id:"error.failed_png",defaultMessage:"Failed to generate PNG file. Please try with a smaller diagram or download an SVG file."}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function Oe(){!function(){Ft.apply(this,arguments)}()}function ye(){le($t(c))}function Ie(){B(!1)}function we(){switch(n){case Xt.SHOWING_CHART:case Xt.LOADING_MORE:var e=Object(ve.c)(c.chartData,m),t=[{menuItem:te.formatMessage({id:"tab.info",defaultMessage:"Info"}),render:function(){return Object(S.jsx)(ge,{gedcom:c.gedcom,indi:e.id})}},{menuItem:te.formatMessage({id:"tab.settings",defaultMessage:"Settings"}),render:function(){return Object(S.jsx)(bt,{config:Q,onChange:function(e){ee(e),ie(e,c),ue(function(e){return{c:dt.get(e.color),i:lt.get(e.id),s:ht.get(e.sex),t:gt.get(e.tribe)}}(e))}})}}];return Object(S.jsxs)("div",{id:"content",children:[Object(S.jsx)(Zt,{open:G,message:y,onDismiss:Ie}),n===Xt.LOADING_MORE?Object(S.jsx)(Se.a,{active:!0,size:"small",className:"loading-more"}):null,Object(S.jsx)(Jt,{data:c.chartData,selection:e,chartType:T,onSelection:le,freezeAnimation:q,colors:Q.color,hideIds:Q.id,hideSex:Q.sex}),_?Object(S.jsx)(Ee,{greaterThanOrEqual:"large",className:"sidePanel",children:Object(S.jsx)(P.a,{panes:t})}):null]});case Xt.ERROR:return Object(S.jsx)(Kt,{message:y});case Xt.INITIAL:case Xt.LOADING:return Object(S.jsx)(Se.a,{active:!0,size:"large"})}}return Object(i.useEffect)((function(){var e=document.getElementById("root");"/"===re.pathname?e.classList.add("bgLogo"):e.classList.remove("bgLogo"),Object(h.a)(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/view"===re.pathname){e.next=3;break}return n!==Xt.INITIAL&&a(Xt.INITIAL),e.abrupt("return");case 3:if((t=Qt(re)).sourceSpec){e.next=7;break}return ne.replace({pathname:"/"}),e.abrupt("return");case 7:if(n!==Xt.INITIAL&&!ce(t.sourceSpec,t.selection)){e.next=30;break}return a(Xt.LOADING),V(t.sourceSpec),M(t.standalone),F(t.chartType),K(t.freezeAnimation),ee(t.config),e.prev=14,e.next=17,de(t.sourceSpec,t.selection);case 17:r=e.sent,d(r),b(void 0!==t.selection?t.selection:$t(r)),ie(t.config,r),E(t.showSidePanel),a(Xt.SHOWING_CHART),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(14),o=xe(e.t0,te),w(o),a(Xt.ERROR);case 28:e.next=31;break;case 30:n!==Xt.SHOWING_CHART&&n!==Xt.LOADING_MORE||(F(t.chartType),a(Xt.SHOWING_CHART),i=void 0!==t.selection?t.selection:$t(c),m&&m.id===i.id&&m.generation===i.generation||b(i));case 31:case"end":return e.stop()}var i,o}),e,null,[[14,25]])})))()})),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(I.b,{render:function(){return Object(S.jsx)(tt,{data:null===c||void 0===c?void 0:c.chartData,showingChart:"/view"===ne.location.pathname&&(n===Xt.SHOWING_CHART||n===Xt.LOADING_MORE),standalone:D,eventHandlers:{onSelection:le,onDownloadPdf:he,onDownloadPng:me,onDownloadSvg:Oe,onCenterView:ye}})}}),qt?Object(S.jsxs)(I.d,{children:[Object(S.jsx)(I.b,{exact:!0,path:"/view",render:we}),Object(S.jsx)(I.a,{to:"/view"})]}):Object(S.jsxs)(I.d,{children:[Object(S.jsx)(I.b,{exact:!0,path:"/view",render:we}),Object(S.jsx)(I.a,{to:"/"})]})]})}})})]})}),document.querySelector("#root"))},65:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));n(41);var r=new Map([["abt","about"],["cal","calculated"],["est","estimated"]]);function i(e,t){var n=void 0!==e.day,i=void 0!==e.month,a=void 0!==e.year;if(!n&&!i&&!a)return e.text||"";var o=function(e){return new Date(void 0!==e.year?e.year:0,void 0!==e.month?e.month-1:0,void 0!==e.day?e.day:1)}(e),s={day:n?"numeric":void 0,month:i?"long":void 0,year:a?"numeric":void 0};return[function(e,t){var n=e&&e.toLowerCase();return n&&t.formatMessage({id:"date.".concat(n),defaultMessage:r.get(n)||n})||""}(e.qualifier,t),new Intl.DateTimeFormat(t.locale,s).format(o)].filter((function(e){return e})).join(" ")}function a(e,t){return e?e.date?i(e.date,t):e.dateRange?function(e,t){var n=e.from,r=e.to,a=n&&i(n,t),o=r&&i(r,t);return a&&o?t.formatMessage({id:"date.between",defaultMessage:"between {from} and {to}"},{from:a,to:o}):a?t.formatMessage({id:"date.after",defaultMessage:"after {from}"},{from:a}):o?t.formatMessage({id:"date.before",defaultMessage:"before {to}"},{to:o}):""}(e.dateRange,t):"":""}function o(e,t){return e&&e.year&&t&&t.year?e.year!==t.year?e.year-t.year:e.month&&t.month&&(e.month!==t.month||e.day&&t.day&&e.day!==t.day)?e.month-t.month:0:0}function s(e,t){return o(e&&(e.date||e.dateRange&&(e.dateRange.from||e.dateRange.to)),t&&(t.date||t.dateRange&&(t.dateRange.from||t.dateRange.to)))}}},[[619,1,2]]]);
//# sourceMappingURL=main.c86ae783.chunk.js.map