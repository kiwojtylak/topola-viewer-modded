(this["webpackJsonptopola-viewer"]=this["webpackJsonptopola-viewer"]||[]).push([[0],{129:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(32),a=n(96),i=n(99),o=n(172),c=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,a){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(r.a)(this,n),(i=t.call(this,a)).code=e,i.args=o,i}return n}(Object(o.a)(Error))},22:function(e,t,n){"use strict";n.d(t,"i",(function(){return c})),n.d(t,"h",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return j})),n.d(t,"a",(function(){return v})),n.d(t,"f",(function(){return x})),n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return E}));var r=n(262),a=n(129),i=n(40),o=n(64);function c(e){return e.substring(1,e.length-1)}function s(e){var t=new Map;return e.indis.forEach((function(e){t.set(e.id,e)})),t}function u(e){var t=new Map;return e.fams.forEach((function(e){t.set(e.id,e)})),t}function l(e){var t=e.find((function(e){return"HEAD"===e.tag})),n={},r={},a={};return e.forEach((function(e){"INDI"===e.tag?n[c(e.pointer)]=e:"FAM"===e.tag?r[c(e.pointer)]=e:e.pointer&&(a[c(e.pointer)]=e)})),{head:t,indis:n,fams:r,other:a}}function d(e,t){return e<t?-1:e>t?1:0}function f(e){var t=function(e){var t=s(e);return function(e,n){var r=t.get(e),a=t.get(n);return Object(o.a)(r&&r.birth,a&&a.birth)||d(e,n)}}(e),n=e.fams.map((function(e){return function(e,t){if(!e.children)return e;var n=e.children.sort(t);return Object.assign({},e,{children:n})}(e,t)}));return Object.assign({},e,{fams:n})}function m(e){var t=function(e){var t=u(e);return function(e,n){var r=t.get(e),a=t.get(n);return Object(o.a)(r&&r.marriage,a&&a.marriage)||d(e,n)}}(e),n=e.indis.map((function(e){return function(e,t){if(!e.fams)return e;var n=e.fams.sort(t);return Object.assign({},e,{fams:n})}(e,t)}));return Object.assign({},e,{indis:n})}function g(e,t,n){if(e.data){var r=n(t)[c(e.data)];if(r)return r}return e}function j(e){var t=[e.data];return e.tree.forEach((function(e){if("CONC"===e.tag&&e.data){var n=t.length-1;t[n]+=e.data}else"CONT"===e.tag&&e.data&&t.push(e.data)})),t}function b(e){return m(f(e))}var O=[".jpg",".jpeg",".png",".gif"];function h(e){var t=e.toLowerCase();return O.some((function(e){return t.endsWith(e)}))}function p(e,t){var n=e.indis.map((function(e){return function(e,t){if(!e.images||0===e.images.length)return e;var n=[];return e.images.forEach((function(e){var r=e.url.replaceAll("\\","/"),a=r.match(/[^/]*$/)[0];t.has(r)?n.push({url:t.get(r),title:e.title}):t.has(a)?n.push({url:t.get(a),title:e.title}):e.url.startsWith("http")&&h(e.url)&&n.push(e)})),Object.assign({},e,{images:n})}(e,t)}));return Object.assign({},e,{indis:n})}function v(e,t){var n=Object(r.parse)(e),o=Object(i.gedcomEntriesToJson)(n);if(!o||!o.indis||!o.indis.length||!o.fams||!o.fams.length)throw new a.a("GEDCOM_READ_FAILED","Failed to read GEDCOM file");return{chartData:p(b(o),t),gedcom:l(n)}}function x(e){var t=e.tree.filter((function(e){return"NAME"===e.tag})),n=t.find((function(e){return 0===e.tree.filter((function(e){return"TYPE"===e.tag&&"married"===e.data})).length}))||t[0];return null===n||void 0===n?void 0:n.data.replace(/\//g,"")}function w(e){var t,n,r=null===e||void 0===e||null===(t=e.tree.find((function(e){return"TITL"===e.tag})))||void 0===t?void 0:t.data,a=null===e||void 0===e||null===(n=e.tree.find((function(e){return"FORM"===e.tag})))||void 0===n?void 0:n.data;return r&&a&&r+"."+a}function E(e){return e.tree.find((function(e){return"FILE"===e.tag&&e.data.startsWith("http")&&h(e.data)}))}},361:function(e){e.exports=JSON.parse('{"menu.open":"\xd6ffnen","menu.open_file":"Datei \xf6ffnen","menu.load_from_url":"URL \xf6ffnen","menu.download":"Download","menu.pdf_file":"PDF-Datei","menu.png_file":"PNG-Datei","menu.svg_file":"SVG-Datei","menu.download_pdf":"PDF herunterladen","menu.download_png":"PNG herunterladen","menu.download_svg":"SVG herunterladen","menu.view":"Neuzentrierungsdiagramm","menu.github":"Projekt auf der GitHub-Website","menu.search.placeholder":"Person suchen","menu.search.no_results":"Keine Ergebnisse","load_from_url.title":"Von URL \xf6ffnen","load_from_url.comment":"Die Daten der angegebenen URL werden \xfcber den {link} -Dienst geladen, um CORS-Probleme zu vermeiden.","load_from_url.cancel":"Cancel","load_from_url.load":"\xd6ffnen","gedcom.ADOP":"Annahme","gedcom.BAPM":"Taufe","gedcom.BIRT":"Geburt","gedcom.BURI":"Beerdigung","gedcom.CENS":"Volksz\xe4hlung","gedcom.CHR":"Taufe","gedcom.DEAT":"Tod","gedcom.MARR":"Hochzeit","gedcom.MARS":"Ehevertrag","gedcom.ETHN":"ethnische Zugeh\xf6rigkeit","gedcom.TRIB":"Stamm","gedcom.LANG":"Sprache","gedcom.DIV":"Scheidung","gedcom.DSCR":"Beschreibung","gedcom.EMAIL":"E-Mail","gedcom.EVEN":"Ereignis","gedcom.OCCU":"Beruf","gedcom.RIN":"ID","gedcom.TITL":"Titel","gedcom.WWW":"Website","gedcom._UPD":"Zuletzt aktualisiert","gedcom.birth":"Geburtsname","gedcom.married":"Ehenamen","gedcom.maiden":"M\xe4dchenname","gedcom.aka":"Auch bekannt als","gedcom.languages":"Sprachen","date.between":"zwischen {from} und {to}","date.after":"after {from}","date.before":"before {to}","error.error":"Error","error.failed_pdf":"PDF konnte nicht erstellt werden. Versuchen Sie es erneut mit einem kleineren Diagramm oder laden Sie die SVG-Datei herunter.","error.failed_png":"Fehler beim Erstellen der PNG-Datei. Versuchen Sie es erneut mit einem kleineren Diagramm oder laden Sie die SVG-Datei herunter.","error.failed_to_load_file":"Fehler beim Laden der Datei","tab.info":"Info","tab.settings":"Einstellungen","config.colors":"Farben","config.colors.NO_COLOR":"keiner","config.colors.COLOR_BY_GENERATION":"nach Generation","config.colors.COLOR_BY_SEX":"nach Geschlecht","config.ids":"IDs","config.ids.SHOW":"anzeigen","config.ids.HIDE":"verbergen","config.sex":"Geschlecht","config.sex.SHOW":"anzeigen","config.sex.HIDE":"verbergen","name.unknown_name":"?","extras.notes":"Anmerkungen","extras.images":"Bilder","extras.sources":"Quellen"}')},362:function(e){e.exports=JSON.parse('{"menu.open":"Ouvrir","menu.open_file":"Ouvrir le fichier","menu.load_from_url":"Ouvrir l\'URL","menu.download":"T\xe9l\xe9charger","menu.pdf_file":"Fichier PDF","menu.png_file":"Fichier PNG","menu.svg_file":"Fichier SVG","menu.download_pdf":"T\xe9l\xe9charger le PDF","menu.download_png":"T\xe9l\xe9charger PNG","menu.download_svg":"T\xe9l\xe9charger SVG","menu.view":"Recentrer graphique","menu.github":"Projet sur le site Web GitHub","menu.search.placeholder":"Rechercher une personne","menu.search.no_results":"Aucun r\xe9sultat","load_from_url.title":"Ouvrir depuis l\'URL","load_from_url.comment":"Les donn\xe9es de l\'URL donn\xe9e seront charg\xe9es via le service {link} pour \xe9viter les probl\xe8mes CORS.","load_from_url.cancel":"Annuler","load_from_url.load":"Ouvrir","gedcom.ADOP":"Adoption","gedcom.BAPM":"Bapt\xeame","gedcom.BIRT":"Naissance","gedcom.BURI":"Fun\xe9railles","gedcom.CENS":"Recensement","gedcom.CHR":"Bapt\xeame","gedcom.DEAT":"Mort","gedcom.MARR":"Mariage","gedcom.MARS":"R\xe8glement de mariage","gedcom.ETHN":"Appartenance ethnique","gedcom.TRIB":"Clan","gedcom.LANG":"Langue","gedcom.DIV":"Divorce","gedcom.DSCR":"Description","gedcom.EMAIL":"E-mail","gedcom.EVEN":"\xc9v\xe9nement","gedcom.OCCU":"Profession","gedcom.RIN":"ID","gedcom.TITL":"Titre","gedcom.WWW":"Site Web","gedcom._UPD":"Derni\xe8re mise \xe0 jour","gedcom.birth":"Nom de naissance","gedcom.married":"Nom marital","gedcom.maiden":"Nom de jeune fille","gedcom.aka":"Alias","gedcom.languages":"Langues","date.between":"entre {from} et {to}","date.after":"apr\xe8s {from}","date.before":"avant {to}","error.error":"Erreur","error.failed_pdf":"\xc9chec de la cr\xe9ation du PDF. R\xe9essayez avec un diagramme plus petit ou t\xe9l\xe9chargez le fichier SVG.","error.failed_png":"Impossible de cr\xe9er le fichier PNG. R\xe9essayez avec un diagramme plus petit ou t\xe9l\xe9chargez le fichier SVG.","error.failed_to_load_file":"Erreur lors du chargement du fichier","tab.info":"Info","tab.settings":"Param\xe8tres","config.colors":"Couleurs","config.colors.NO_COLOR":"aucune","config.colors.COLOR_BY_GENERATION":"par g\xe9n\xe9ration","config.colors.COLOR_BY_SEX":"par sexe","config.ids":"IDs","config.ids.SHOW":"montrer","config.ids.HIDE":"cacher","config.sex":"Sexe","config.sex.SHOW":"montrer","config.sex.HIDE":"cacher","name.unknown_name":"?","extras.notes":"Notes","extras.images":"Immages","extras.sources":"Sources"}')},363:function(e){e.exports=JSON.parse('{"menu.open":"Apri","menu.open_file":"Apri file","menu.load_from_url":"Apri URL","menu.download":"Download","menu.pdf_file":"File PDF","menu.png_file":"File PNG","menu.svg_file":"File SVG","menu.download_pdf":"Scarica PDF","menu.download_png":"Scarica PNG","menu.download_svg":"Scarica SVG","menu.view":"Ricentrare grafico","menu.github":"Progetto sul sito web GitHub","menu.search.placeholder":"Cerca persona","menu.search.no_results":"Nessun risultato","load_from_url.title":"Apri da URL","load_from_url.comment":"I dati dall\'URL specificato verranno caricati tramite il servizio {link} per evitare problemi CORS.","load_from_url.cancel":"Annulla","load_from_url.load":"Apri","gedcom.ADOP":"Adozione","gedcom.BAPM":"Battesimo","gedcom.BIRT":"Nascita","gedcom.BURI":"Funerale","gedcom.CENS":"Census","gedcom.CHR":"Battesimo","gedcom.DEAT":"Morte","gedcom.MARR":"Matrimonio","gedcom.MARS":"Accordo di matrimonio","gedcom.ETHN":"Etnia","gedcom.TRIB":"Clan","gedcom.LANG":"Lingua","gedcom.DIV":"Divorzio","gedcom.DSCR":"Descrizione","gedcom.EMAIL":"E-mail","gedcom.EVEN":"Evento","gedcom.OCCU":"Professione","gedcom.RIN":"ID","gedcom.TITL":"Titolo","gedcom.WWW":"Sito web","gedcom._UPD":"Ultimo aggiornamento","gedcom.birth":"Nome alla nascita","gedcom.married":"Nome da coniugato/a","gedcom.maiden":"Nome da nubile","gedcom.aka":"Conosciuto anche come","gedcom.languages":"Lingue","date.between":"tra il {from} e il {to}","date.after":"dopo il {from}","date.before":"prima del {to}","error.error":"Errore","error.failed_pdf":"Impossibile creare PDF. Riprova con un diagramma pi\xf9 piccolo o scarica il file SVG.","error.failed_png":"Impossibile creare il file PNG. Riprova con un diagramma pi\xf9 piccolo o scarica il file SVG.","error.failed_to_load_file":"Errore durante il caricamento del file","tab.info":"Info","tab.settings":"Configurazione","config.colors":"Colori","config.colors.NO_COLOR":"nessuno","config.colors.COLOR_BY_GENERATION":"per generazione","config.colors.COLOR_BY_SEX":"por sesso","config.ids":"IDs","config.ids.SHOW":"mostrare","config.ids.HIDE":"nascondere","config.sex":"Sesso","config.sex.SHOW":"mostrare","config.sex.HIDE":"nascondere","name.unknown_name":"?","extras.notes":"Note","extras.images":"Immagini","extras.sources":"Fonti"}')},364:function(e){e.exports=JSON.parse('{"menu.open":"Abrir","menu.open_file":"Abrir fichero","menu.load_from_url":"Abrir URL","menu.download":"Descargar","menu.pdf_file":"Archivo PDF","menu.png_file":"Archivo PNG","menu.svg_file":"Archivo SVG","menu.download_pdf":"Imagen PDF","menu.download_png":"Imagen PNG","menu.download_svg":"Imagen SVG","menu.view":"Centrar gr\xe1fica","menu.github":"Proyecto en el sitio web GitHub","menu.search.placeholder":"Buscar persona","menu.search.no_results":"Ning\xfan resultado","load_from_url.title":"Abrir desde URL","load_from_url.comment":"Los detalles de la URL especificada se cargar\xe1n a trav\xe9s del servicio {link} para evitar problemas con CORS.","load_from_url.cancel":"Cancelar","load_from_url.load":"Abrir","gedcom.ADOP":"Adopci\xf3n","gedcom.BAPM":"Bautismo","gedcom.BIRT":"Nacimiento","gedcom.BURI":"Funeral","gedcom.CENS":"Censo","gedcom.CHR":"Bautismo","gedcom.DEAT":"Muerte","gedcom.MARR":"Matrimonio","gedcom.MARS":"Acuerdo de matrimonio","gedcom.ETHN":"Etnia","gedcom.TRIB":"Clan","gedcom.LANG":"Lengua","gedcom.DIV":"Divorcio","gedcom.DSCR":"Descripci\xf3n","gedcom.EMAIL":"E-mail","gedcom.EVEN":"Evento","gedcom.OCCU":"Profesi\xf3n","gedcom.RIN":"ID","gedcom.TITL":"T\xedtulo","gedcom.WWW":"Sitio web","gedcom._UPD":"\xdaltima actualizaci\xf3n","gedcom.birth":"Nombre","gedcom.married":"Nombre de casado/a","gedcom.maiden":"Nombre de soltera","gedcom.aka":"Apodo","gedcom.languages":"Lenguas","date.between":"de {from} a {to}","date.after":"despu\xe9s de {from}","date.before":"antes de {to}","error.error":"Error","error.failed_pdf":"Imposible generar PDF. Int\xe9ntelo de nuevo con un diagrama m\xe1s peque\xf1o o descargue el archivo SVG.","error.failed_png":"Imposible generar el fichero PNG. Int\xe9ntelo de nuevo con un diagrama m\xe1s peque\xf1o o descargue el archivo SVG.","error.failed_to_load_file":"Error cargando archivo","tab.info":"Info","tab.settings":"Configuraci\xf3n","config.colors":"Colores","config.colors.NO_COLOR":"ninguno","config.colors.COLOR_BY_GENERATION":"por generaci\xf3n","config.colors.COLOR_BY_SEX":"por sexo","config.ids":"IDs","config.ids.SHOW":"mostrar","config.ids.HIDE":"ocultar","config.sex":"Sexo","config.sex.SHOW":"mostrar","config.sex.HIDE":"ocultar","name.unknown_name":"?","extras.notes":"Notas","extras.images":"Im\xe1genes","extras.sources":"Fuentes"}')},365:function(e){e.exports=JSON.parse('{"menu.open":"Otw\xf3rz","menu.open_file":"Otw\xf3rz plik","menu.load_from_url":"Otw\xf3rz URL","menu.download":"Pobierz","menu.pdf_file":"Plik PDF","menu.png_file":"Plik PNG","menu.svg_file":"Plik SVG","menu.download_pdf":"Pobierz PDF","menu.download_png":"Pobierz PNG","menu.download_svg":"Pobierz SVG","menu.view":"Wy\u015brodkuj grafik\u0119","menu.github":"Projekt na stronie GitHub","menu.search.placeholder":"Szukaj osoby","menu.search.no_results":"Brak wynik\xf3w","load_from_url.title":"Otw\xf3rz z adresu URL","load_from_url.comment":"Dane z podanego adresu URL zostan\u0105 za\u0142adowane poprzez us\u0142ug\u0119 {link} w celu unikni\u0119cia problem\xf3w z CORS.","load_from_url.cancel":"Anuluj","load_from_url.load":"Otw\xf3rz","gedcom.ADOP":"Przyj\u0119cie","gedcom.BAPM":"Chrzest","gedcom.BIRT":"Narodziny","gedcom.BURI":"Pogrzeb","gedcom.CENS":"Spis ludno\u015bci","gedcom.CHR":"Chrzest","gedcom.DEAT":"\u015amier\u0107","gedcom.MARR":"Ma\u0142\u017ce\u0144stwo","gedcom.MARS":"\u015alub cywilny","gedcom.ETHN":"Pochodzenie etniczne","gedcom.TRIB":"Klan","gedcom.LANG":"J\u0119zyk","gedcom.DIV":"Rozw\xf3d","gedcom.DSCR":"Opis","gedcom.EMAIL":"E-mail","gedcom.EVEN":"Wydarzenie","gedcom.OCCU":"Zaw\xf3d","gedcom.RIN":"ID","gedcom.TITL":"Tytu\u0142","gedcom.WWW":"Strona WWW","gedcom._UPD":"Ostatnia aktualizacja","gedcom.birth":"Nazwisko rodowe","gedcom.married":"Nazwisko po ma\u0142\u017ce\u0144stwie","gedcom.maiden":"Nazwisko panie\u0144skie","gedcom.aka":"Alias","gedcom.languages":"J\u0119zyki","date.between":"mi\u0119dzy {from} a {to}","date.after":"po {from}","date.before":"przed {to}","error.error":"B\u0142\u0105d","error.failed_pdf":"Nie uda\u0142o si\u0119 utworzy\u0107 pliku PDF. Spr\xf3buj jeszcze raz z mniejszym diagramem lub pobierz plik SVG.","error.failed_png":"Nie uda\u0142o si\u0119 utworzy\u0107 pliku PNG. Spr\xf3buj jeszcze raz z mniejszym diagramem lub pobierz plik SVG.","error.failed_to_load_file":"B\u0142\u0105d wczytywania pliku","tab.info":"Info","tab.settings":"Ustawienia","config.colors":"Kolory","config.colors.NO_COLOR":"brak","config.colors.COLOR_BY_GENERATION":"wed\u0142ug pokolenia","config.colors.COLOR_BY_SEX":"wed\u0142ug p\u0142ci","config.ids":"IDs","config.ids.SHOW":"pokaza\u0107","config.ids.HIDE":"ukry\u0107","config.sex":"P\u0142ci","config.sex.SHOW":"pokaza\u0107","config.sex.HIDE":"ukry\u0107","name.unknown_name":"N.N.","extras.notes":"Notatki","extras.images":"Zdj\u0119cia","extras.sources":"\u0179r\xf3d\u0142a"}')},417:function(e,t){},504:function(e,t){},506:function(e,t){},528:function(e,t){},530:function(e,t){},558:function(e,t){},560:function(e,t){},561:function(e,t){},566:function(e,t){},568:function(e,t){},587:function(e,t){},599:function(e,t){},602:function(e,t){},617:function(e,t,n){},620:function(e,t,n){"use strict";n.r(t);var r,a=n(0),i=n(95),o=n(361),c=n(362),s=n(363),u=n(364),l=n(365),d=n(10),f=n.n(d),m=n(26),g=n(13),j=n(59);!function(e){e[e.UPLOADED=0]="UPLOADED",e[e.GEDCOM_URL=1]="GEDCOM_URL",e[e.EMBEDDED=2]="EMBEDDED"}(r||(r={}));var b=n(218),O=n(165),h=n.n(O),p=n(22),v=n(64),x=n(40),w=n(642),E=n(367),_=n(17),R=n(163),N=n(1),D=new Map([["ADOP","Adoption"],["BAPM","Baptism"],["BIRT","Birth"],["BURI","Burial"],["CENS","Census"],["CHR","Christening"],["CREM","Cremation"],["DEAT","Death"],["EDUC","Education"],["EMAIL","E-mail"],["EMIG","Emigration"],["EVEN","Event"],["FACT","Fact"],["IMMI","Immigration"],["MARR","Marriage"],["MARS","Marriage settlement"],["ETHN","Ethnic"],["TRIB","Clan"],["LANG","Language"],["DIV","Divorce"],["MILT","Military services"],["NATU","Naturalization"],["OCCU","Occupation"],["TITL","Title"],["WWW","WWW"],["birth","Birth name"],["married","Married name"],["maiden","Maiden name"],["immigrant","Immigrant name"],["aka","Also known as"]]);function S(e){var t=e.tag.replace(/_/g,"");return Object(N.jsx)(w.a,{id:"gedcom.".concat(t),defaultMessage:D.get(t)||t})}var C=n(652),I=n(658),A=n(654),M=n(375),L=n(646),k=n(78),y=n(651),T=n(376),P=n(655),G=n(643),z=n(656),H=n(653),B=n(173);function F(e){var t=Object(a.useState)(!1),n=Object(g.a)(t,2),r=n[0],i=n[1],o=Object(a.useState)(!1),c=Object(g.a)(o,2),s=c[0],u=c[1],l=Object(a.useState)(!1),d=Object(g.a)(l,2),f=d[0],m=d[1],j=Object(a.useState)(""),b=Object(g.a)(j,2),O=b[0],h=b[1];return s&&O!==e.url&&u(!1),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(T.a,{className:s?"loaded-image-thumbnail":"hidden-image",onClick:function(){return i(!0)},onLoad:function(){u(!0),h(e.url),m(!1)},onError:function(t){u(!0),h(e.url),m(!0),t.currentTarget.alt=""},src:e.url,alt:e.title||e.filename,centered:!0}),Object(N.jsx)(P.a,{className:s?"hidden-image":"image-placeholder",children:Object(N.jsx)(P.a.Image,{square:!0})}),f&&Object(N.jsx)(G.a,{fluid:!0,textAlign:"center",children:Object(N.jsx)(z.a,{negative:!0,compact:!0,children:Object(N.jsx)(z.a.Header,{children:Object(N.jsx)(w.a,{id:"error.failed_to_load_image",defaultMessage:"Failed to load image file"})})})}),Object(N.jsxs)(H.a,{basic:!0,size:"large",closeIcon:Object(N.jsx)(k.a,{name:"close",color:"red"}),open:r,onClose:function(){return i(!1)},onOpen:function(){return i(!0)},centered:!1,children:[Object(N.jsx)(H.a.Header,{children:e.title}),Object(N.jsx)(H.a.Content,{image:!0,children:Object(N.jsx)(T.a,{className:"modal-image",src:e.url,alt:e.title||e.filename,label:Object(N.jsx)(B.a,{attached:"bottom",content:e.filename}),wrapped:!0})})]})]})}var W=n(171),U=n.n(W);function V(e){return Object(N.jsx)(N.Fragment,{children:e.lines.map((function(e,t){return Object(N.jsxs)("div",{children:[Object(N.jsx)(U.a,{properties:{target:"_blank"},children:e}),Object(N.jsx)("br",{})]},t)}))})}function Y(e,t){return!!(null===e||void 0===e?void 0:e.length)&&Object(N.jsx)(A.a,{children:e.map((function(e,n){return Object(N.jsxs)(A.a.Item,{children:[Object(N.jsx)(A.a.Icon,{verticalAlign:"middle",name:"circle",size:"tiny"}),Object(N.jsxs)(A.a.Content,{children:[Object(N.jsx)(A.a.Header,{children:Object(N.jsx)(U.a,{properties:{target:"_blank"},children:[e.author,e.title,e.publicationInfo].filter((function(e){return e})).join(", ")})}),Object(N.jsxs)(A.a.Description,{children:[Object(N.jsx)(U.a,{properties:{target:"_blank"},children:e.page}),e.date?" ["+Object(v.b)(e.date,t)+"]":null]})]})]},n)}))})}function q(e){var t,n,r,i=Object(E.a)(),o=Object(a.useState)(-1),c=Object(g.a)(o,2),s=c[0],u=c[1],l=Object(a.useState)(""),d=Object(g.a)(l,2),f=d[0],m=d[1];function j(e,t){void 0!==t.index&&s!==t.index?u(t.index):u(-1)}f&&f===e.indi||(u(-1),m(e.indi));var b=[(null===(t=e.images)||void 0===t?void 0:t.length)&&{menuItem:Object(N.jsx)(M.a.Item,{fitted:!0,onClick:j,children:Object(N.jsx)(L.a,{content:Object(N.jsx)(w.a,{id:"extras.images",defaultMessage:"Images"}),size:"mini",position:"bottom center",trigger:Object(N.jsx)(k.a,{circular:!0,name:"camera"})})},"images"),render:function(){return Object(N.jsx)(y.a.Pane,{children:(t=e.images,!!t&&t.map((function(e,t){return Object(N.jsx)(A.a,{children:Object(N.jsx)(A.a.Item,{children:Object(N.jsx)(F,{url:e.url,filename:e.filename,title:e.title})})},t)})))});var t}},(null===(n=e.notes)||void 0===n?void 0:n.length)&&{menuItem:Object(N.jsx)(M.a.Item,{fitted:!0,onClick:j,children:Object(N.jsx)(L.a,{content:Object(N.jsx)(w.a,{id:"extras.notes",defaultMessage:"Notes"}),size:"mini",position:"bottom center",trigger:Object(N.jsx)(k.a,{circular:!0,name:"sticky note outline"})})},"notes"),render:function(){return Object(N.jsx)(y.a.Pane,{children:(t=e.notes,!!(null===t||void 0===t?void 0:t.length)&&t.map((function(e,t){return Object(N.jsx)("div",{children:Object(N.jsx)(V,{lines:e.map((function(e,t){return Object(N.jsx)("i",{children:e},t)}))})},t)})))});var t}},(null===(r=e.sources)||void 0===r?void 0:r.length)&&{menuItem:Object(N.jsx)(M.a.Item,{fitted:!0,onClick:j,children:Object(N.jsx)(L.a,{content:Object(N.jsx)(w.a,{id:"extras.sources",defaultMessage:"Sources"}),size:"mini",position:"bottom center",trigger:Object(N.jsx)(k.a,{circular:!0,name:"quote right"})})},"sources"),render:function(){return Object(N.jsx)(y.a.Pane,{children:Y(e.sources,i)})}}].flatMap((function(e){return e?[e]:[]}));return b.length?Object(N.jsx)(C.a.Description,{children:Object(N.jsx)(y.a,{className:"event-extras",activeIndex:s,renderActiveOnly:!0,menu:{tabular:!0,attached:!0,compact:!0,borderless:!0},panes:b})}):null}function J(e){var t=Object(_.h)(),n=Object(p.f)(e.person),r=j.parse(t.search);return r.indi=Object(p.i)(e.person.pointer),Object(N.jsx)(C.a.Meta,{children:Object(N.jsx)(R.b,{to:{pathname:"/view",search:j.stringify(r)},children:n||Object(N.jsx)(w.a,{id:"name.unknown_name",defaultMessage:"N.N."})})})}var X=["BIRT","BAPM","CHR","FAMS","EVEN","CENS","DEAT","BURI"],K=["MARR","MARS","DIV"];function Z(e){var t=Object(E.a)();return Object(N.jsxs)("div",{className:"event-header",children:[Object(N.jsx)(I.a,{as:"span",size:"small",children:Object(N.jsx)(S,{tag:e.event.type})}),e.event.date?Object(N.jsx)(I.a,{as:"span",textAlign:"right",sub:!0,children:Object(v.b)(e.event.date,t)}):null]})}function Q(e,t,n){var r=t.tree.filter((function(e){return["WIFE","HUSB"].includes(e.tag)})).find((function(t){return!t.data.includes(e)}));if(r)return Object(p.b)(r,n,(function(e){return e.indis}))}function $(e){var t=e.tree.find((function(e){return"PLAC"===e.tag}));return(null===t||void 0===t?void 0:t.data)?Object(p.c)(t):void 0}function ee(e,t){return e.tree.filter((function(e){return"OBJE"===e.tag})).map((function(e){return Object(p.b)(e,t,(function(e){return e.other}))})).map((function(e){return Object(p.e)(e)})).flatMap((function(e){return e?[{url:(null===e||void 0===e?void 0:e.data)||"",filename:Object(p.d)(e)||""}]:[]}))}function te(e,t){return e.tree.filter((function(e){return"SOUR"===e.tag})).map((function(e){var n=Object(p.b)(e,t,(function(e){return e.other})),r=n.tree.find((function(e){return"TITL"===e.tag})),a=n.tree.find((function(e){return"ABBR"===e.tag})),i=n.tree.find((function(e){return"AUTH"===e.tag})),o=n.tree.find((function(e){return"PUBL"===e.tag})),c=e.tree.find((function(e){return"PAGE"===e.tag})),s=e.tree.find((function(e){return"DATA"===e.tag})),u=s?ae(s):void 0;return{title:(null===r||void 0===r?void 0:r.data)||(null===a||void 0===a?void 0:a.data),author:null===i||void 0===i?void 0:i.data,page:null===c||void 0===c?void 0:c.data,date:u?Object(x.getDate)(u.data):void 0,publicationInfo:null===o||void 0===o?void 0:o.data}}))}function ne(e,t){return e.tree.filter((function(e){return["NOTE","TYPE"].includes(e.tag)})).map((function(e){return Object(p.b)(e,t,(function(e){return e.other}))})).map((function(e){return Object(p.c)(e)}))}function re(e,t,n){return"FAMS"===e.tag?function(e,t,n){var r=Object(p.b)(e,t,(function(e){return e.fams}));return h()(K,(function(e){return r.tree.filter((function(t){return t.tag===e}))})).map((function(e){var a=ae(e)||null;return{date:a?Object(x.getDate)(a.data):void 0,type:e.tag,personLink:Q(n,r,t),place:$(e),images:ee(e,t),notes:ne(e,t),sources:te(e,t),indi:n}}))}(e,t,n):function(e,t,n){var r=ae(e)||null;return[{date:r?Object(x.getDate)(r.data):void 0,type:e.tag,place:$(e),images:ee(e,t),notes:ne(e,t),sources:te(e,t),indi:n}]}(e,t,n)}function ae(e){return e.tree.find((function(e){return"DATE"===e.tag}))}function ie(e){return Object(N.jsx)(C.a,{children:Object(N.jsxs)(C.a.Content,{children:[Object(N.jsx)(Z,{event:e.event}),!!e.event.personLink&&Object(N.jsx)(J,{person:e.event.personLink}),!!e.event.place&&Object(N.jsx)(C.a.Description,{children:e.event.place}),Object(N.jsx)(q,{images:e.event.images,notes:e.event.notes,sources:e.event.sources,indi:e.event.indi})]})})}function oe(e){var t=h()(X,(function(t){return e.entries.filter((function(e){return e.tag===t})).map((function(t){return re(t,e.gedcom,e.indi)})).flatMap((function(e){return e})).sort((function(e,t){return Object(v.a)(e.date,t.date)}))}));return t.length?Object(N.jsx)(N.Fragment,{children:t.map((function(e,t){return Object(N.jsx)(ie,{event:e},t)}))}):null}var ce=["BIRT","BAPM","CHR","EVEN","CENS","DEAT","BURI","NAME","SEX","FAMC","FAMS","NOTE","SOUR","LANG"];function se(e){var t=Object(p.e)(e);return t?Object(N.jsx)("div",{className:"person-image",children:Object(N.jsx)(F,{url:t.data,filename:Object(p.d)(t)||""})}):null}function ue(e){return Object(N.jsx)(V,{lines:Object(p.c)(e).map((function(e,t){return Object(N.jsx)("i",{children:e},t)}))})}function le(e){var t,n=e.data.replaceAll("/",""),r=null===(t=e.tree.find((function(e){return"TYPE"===e.tag&&"Unknown"!==e.data})))||void 0===t?void 0:t.data;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(I.a,{as:"span",size:"large",children:n||Object(N.jsx)(w.a,{id:"name.unknown_name",defaultMessage:"N.N."})}),n&&r&&Object(N.jsx)(C.a.Meta,{children:Object(N.jsx)(S,{tag:r})})]})}function de(e,t,n){return h()(t,(function(t){return e.filter((function(e){return e.tag===t})).map((function(e){return n(e)}))})).filter((function(e){return null!==e})).map((function(e,t){return Object(N.jsx)(C.a,{children:Object(N.jsx)(C.a.Content,{children:e})},t)}))}function fe(e){return e.tree.length>0||e.data&&!e.data.startsWith("@")}function me(e){return e.filter((function(e){return!ce.includes(e.tag)})).filter(fe).map((function(e){return function(e){var t=[];return e.data&&t.push.apply(t,Object(b.a)(Object(p.c)(e))),e.tree.filter((function(e){return"NOTE"===e.tag})).forEach((function(e){return Object(p.c)(e).forEach((function(e){return t.push(Object(N.jsx)("i",{children:e}))}))})),t.length?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(I.a,{sub:!0,children:Object(N.jsx)(S,{tag:e.tag})}),Object(N.jsx)("span",{children:Object(N.jsx)(V,{lines:t})})]}):null}(e)})).filter((function(e){return null!==e})).map((function(e,t){return Object(N.jsx)(C.a,{children:Object(N.jsx)(C.a.Content,{children:e})},t)}))}function ge(e,t,n){var r=e.filter((function(e){return t.includes(e.tag)})).filter(fe).map((function(e){return e.data}));return r.length?Object(N.jsx)(C.a,{children:Object(N.jsxs)(C.a.Content,{children:[Object(N.jsx)(I.a,{as:"span",children:Object(N.jsx)(w.a,{id:n[0],defaultMessage:n[1]})}),Object(N.jsx)("span",{children:Object(N.jsx)(V,{lines:r})})]})},"languages"):null}function je(e){var t=e.gedcom.indis[e.indi].tree,n=t.map((function(t){return Object(p.b)(t,e.gedcom,(function(e){return e.other}))})).filter(fe);return Object(N.jsx)("div",{className:"details",children:Object(N.jsxs)(C.a.Group,{divided:!0,children:[de(t,["NAME"],le),de(n,["OBJE"],se),Object(N.jsx)(oe,{gedcom:e.gedcom,entries:t,indi:e.indi}),ge(n,["LANG"],["gedcom.languages","Languages"]),me(n),de(n,["NOTE"],ue)]})})}var be,Oe=n(32),he=n(36),pe=n(98);!function(e){e.GEDCOM="gedcom",e.READY="ready",e.PARENT_READY="parent_ready"}(be||(be={}));var ve=function(){function e(){Object(Oe.a)(this,e)}return Object(he.a)(e,[{key:"isNewData",value:function(e,t,n){return!1}},{key:"onMessage",value:function(){var e=Object(m.a)(f.a.mark((function e(t,n,r){var a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.message!==be.PARENT_READY){e.next=4;break}window.parent.postMessage({message:be.READY},"*"),e.next=18;break;case 4:if(t.message!==be.GEDCOM){e.next=18;break}if(a=t.gedcom){e.next=8;break}return e.abrupt("return");case 8:return e.prev=8,e.next=11,Object(pe.e)("",a);case 11:i=e.sent,n(i),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),r(e.t0);case 18:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=Object(m.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){window.parent.postMessage({message:be.READY},"*"),window.addEventListener("message",(function(r){return n.onMessage(r.data,e,t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),xe=n(129);function we(e,t){return e instanceof xe.a?t.formatMessage({id:"error.".concat(e.code),defaultMessage:e.message},e.args):e.message}var Ee,_e=n(659),Re=n(645),Ne=n(371),De=Object(Ne.createMedia)({breakpoints:{small:320,large:768}}),Se=De.createMediaStyle(),Ce=De.Media,Ie=De.MediaContextProvider,Ae=n(23),Me=n(648);function Le(e){var t=Object(Ae.a)({},e);return delete t.menuType,Object(N.jsx)(N.Fragment,{children:e.menuType===Ee.Menu?Object(N.jsx)(M.a.Item,Object(Ae.a)(Object(Ae.a)({},t),{},{children:e.children})):Object(N.jsx)(Me.a.Item,Object(Ae.a)(Object(Ae.a)({},t),{},{children:e.children}))})}!function(e){e[e.Menu=0]="Menu",e[e.Dropdown=1]="Dropdown"}(Ee||(Ee={}));var ke=n(372),ye=n.n(ke),Te=n(41),Pe=n.n(Te),Ge=n(373),ze=n.n(Ge);n(610)(Pe.a),n(611)(Pe.a),n(612)(Pe.a),n(613)(Pe.a),n(614)(Pe.a);function He(e){return e.toLocaleLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0142/g,"l")}function Be(e,t){return e.score!==t.score?t.score-e.score:ze()(e.ref,t.ref)}var Fe=function(){function e(t){Object(Oe.a)(this,e),this.index=void 0,this.indiMap=void 0,this.famMap=void 0,this.indiMap=Object(p.h)(t),this.famMap=Object(p.g)(t)}return Object(he.a)(e,[{key:"initialize",value:function(){var e=this;this.index=Pe()((function(){var t=this;e.initMultiLingualLunrWithoutTrimmer(this,["de","en","fr","it","ru"]),this.ref("id"),this.field("id"),this.field("name",{boost:10}),this.field("normalizedName",{boost:8}),this.field("spouseLastName",{boost:2}),this.field("normalizedSpouseLastName",{boost:2}),e.indiMap.forEach((function(n){var r=[n.firstName,n.lastName].join(" "),a=function(e,t,n){return(e.fams||[]).map((function(e){return n.get(e)})).map((function(e){return e&&e.husb})).map((function(e){return e&&t.get(e)})).map((function(e){return e&&e.lastName})).join(" ")}(n,e.indiMap,e.famMap);t.add({id:n.id,name:r,normalizedName:He(r),spouseLastName:a,normalizedSpouseLastName:He(a)})}))}))}},{key:"initMultiLingualLunrWithoutTrimmer",value:function(e,t){var n=[],r=[];t.forEach((function(e){"en"===e?("\\w",n.unshift(Pe.a.stopWordFilter),n.push(Pe.a.stemmer),r.push(Pe.a.stemmer)):(Pe.a[e].wordCharacters,Pe.a[e].stopWordFilter&&n.unshift(Pe.a[e].stopWordFilter),Pe.a[e].stemmer&&(n.push(Pe.a[e].stemmer),r.push(Pe.a[e].stemmer)))})),e.pipeline.reset(),e.pipeline.add.apply(e.pipeline,n),e.searchPipeline&&(e.searchPipeline.reset(),e.searchPipeline.add.apply(e.searchPipeline,r))}},{key:"search",value:function(e){var t=this,n=e.split(" ").filter((function(e){return!!e})).map((function(e){return"".concat(e," ").concat(e,"*")})).join(" ");return this.index.search(n).sort(Be).slice(0,8).map((function(e){return{id:e.ref,indi:t.indiMap.get(e.ref)}}))}}]),e}();var We=n(647);function Ue(e){var t=[e.indi.firstName,e.indi.lastName].join(" ").trim();return e.id.length>8?t:Object(N.jsxs)(N.Fragment,{children:[t," ",Object(N.jsxs)("i",{children:["(",e.id,")"]})]})}function Ve(e){var t=Object(a.useState)([]),n=Object(g.a)(t,2),r=n[0],i=n[1],o=Object(a.useState)(""),c=Object(g.a)(o,2),s=c[0],u=c[1],l=Object(a.useRef)(),d=Object(E.a)();function f(e){var t=Object(v.b)(e.birth,d),n=Object(v.b)(e.death,d);return n?"".concat(t," \u2013 ").concat(n):t}var m=Object(a.useRef)(ye()((function(e){if(e){var t=l.current.search(e).map((function(e){return function(e){return{id:e.id,key:e.id,title:Ue(e),description:f(e.indi)}}(e)}));i(t)}}),200));return Object(a.useEffect)((function(){l.current=function(e){var t=new Fe(e);return t.initialize(),t}(e.data)}),[e.data]),Object(N.jsx)(We.a,{onSearchChange:function(e,t){return n=t.value,m.current(n),void u(n);var n},onResultSelect:function(t,n){return r=n.result.id,e.onSelection({id:r,generation:0}),void u("");var r},results:r,noResultsMessage:d.formatMessage({id:"menu.search.no_results",defaultMessage:"No results found"}),placeholder:d.formatMessage({id:"menu.search.placeholder",defaultMessage:"Search for people"}),selectFirstResult:!0,value:s,id:"search"})}var Ye=n(267),qe=n.n(Ye);function Je(e){var t=e.toLowerCase();return t.endsWith(".jpg")||t.endsWith(".png")}function Xe(e){var t=Object(_.g)(),n=Object(_.h)();function r(){return(r=Object(m.a)(f.a.mark((function e(r){var a,i,o,c,s,u,l,d,m;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=r.target.files)&&a.length){e.next=3;break}return e.abrupt("return");case 3:return i=Array.from(a),r.target.value="",o=1===i.length?i[0]:i.find((function(e){return e.name.toLowerCase().endsWith(".ged")}))||i[0],e.next=8,Object(pe.d)(o);case 8:c=e.sent,s=c.gedcom,u=c.images,i.filter((function(e){return e.name!==o.name&&Je(e.name)})).forEach((function(e){return u.set(e.name,URL.createObjectURL(e))})),l=Array.from(u.keys()).sort().join("|"),d=qe()(qe()(s)+l),m=j.parse(n.search),(m.file===d?t.replace:t.push)({pathname:"/view",search:j.stringify({file:d}),state:{data:s,images:u}});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var a=Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(k.a,{name:"folder open"}),Object(N.jsx)(w.a,{id:"menu.open_file",defaultMessage:"Open file"})]});return Object(N.jsxs)(N.Fragment,{children:[e.menuType===Ee.Menu?Object(N.jsx)("label",{htmlFor:"fileInput",children:Object(N.jsx)(M.a.Item,{as:"a",children:a})}):Object(N.jsx)(Me.a.Item,{as:"label",htmlFor:"fileInput",children:a}),Object(N.jsx)("input",{className:"hidden",type:"file",accept:".ged,.gdz,.gedzip,.zip,image/*",id:"fileInput",multiple:!0,onChange:function(e){return r.apply(this,arguments)}})]})}var Ke,Ze=n(649),Qe=n(644),$e=n(624);function et(e){var t=Object(a.useState)(!1),n=Object(g.a)(t,2),r=n[0],i=n[1],o=Object(a.useState)(""),c=Object(g.a)(o,2),s=c[0],u=c[1],l=Object(a.useRef)(null),d=Object(_.g)();function f(){i(!1),s&&d.push({pathname:"/view",search:j.stringify({url:s})})}return Object(a.useEffect)((function(){r&&(u(""),l.current.focus())}),[r]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(Le,{onClick:function(){return i(!0)},menuType:e.menuType,children:[Object(N.jsx)(k.a,{name:"cloud download"}),Object(N.jsx)(w.a,{id:"menu.load_from_url",defaultMessage:"Load from URL"})]}),Object(N.jsxs)(H.a,{open:r,onClose:function(){return i(!1)},centered:!1,children:[Object(N.jsxs)(I.a,{children:[Object(N.jsx)(k.a,{name:"cloud download"}),Object(N.jsx)(w.a,{id:"load_from_url.title",defaultMessage:"Load from URL"})]}),Object(N.jsx)(H.a.Content,{children:Object(N.jsxs)(Ze.a,{onSubmit:f,children:[Object(N.jsx)(Qe.a,{placeholder:"https://",fluid:!0,value:s,onChange:function(e,t){return u(t.value)},ref:l}),Object(N.jsx)("p",{children:Object(N.jsx)(w.a,{id:"load_from_url.comment",defaultMessage:"Data from the URL will be loaded through {link} to avoid CORS issues.",values:{link:Object(N.jsx)("a",{href:"https://topolaproxy.bieda.it/",children:"topolaproxy.bieda.it (cors-anywhere proxy)"})}})})]})}),Object(N.jsxs)(H.a.Actions,{children:[Object(N.jsx)($e.a,{secondary:!0,onClick:function(){return i(!1)},children:Object(N.jsx)(w.a,{id:"load_from_url.cancel",defaultMessage:"Cancel"})}),Object(N.jsx)($e.a,{primary:!0,onClick:f,children:Object(N.jsx)(w.a,{id:"load_from_url.load",defaultMessage:"Load"})})]})]})]})}function tt(e){function t(t){if(!e.showingChart)return null;switch(t){case Ke.LARGE:return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Me.a,{trigger:Object(N.jsxs)("div",{children:[Object(N.jsx)(k.a,{name:"download"}),Object(N.jsx)(w.a,{id:"menu.download",defaultMessage:"Download"})]}),className:"item",children:Object(N.jsxs)(Me.a.Menu,{children:[Object(N.jsx)(Me.a.Item,{onClick:e.eventHandlers.onDownloadPdf,children:Object(N.jsx)(w.a,{id:"menu.pdf_file",defaultMessage:"PDF file"})}),Object(N.jsx)(Me.a.Item,{onClick:e.eventHandlers.onDownloadPng,children:Object(N.jsx)(w.a,{id:"menu.png_file",defaultMessage:"PNG file"})}),Object(N.jsx)(Me.a.Item,{onClick:e.eventHandlers.onDownloadSvg,children:Object(N.jsx)(w.a,{id:"menu.svg_file",defaultMessage:"SVG file"})})]})}),Object(N.jsxs)(M.a.Item,{onClick:e.eventHandlers.onCenterView,children:[Object(N.jsx)(k.a,{name:"eye"}),Object(N.jsx)(w.a,{id:"menu.view",defaultMessage:"Center view"})]}),Object(N.jsx)(M.a.Menu,{position:"right",children:Object(N.jsx)(Ve,Object(Ae.a)({data:e.data,onSelection:e.eventHandlers.onSelection},e))})]});case Ke.SMALL:return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(Me.a.Item,{onClick:e.eventHandlers.onDownloadPdf,children:[Object(N.jsx)(k.a,{name:"download"}),Object(N.jsx)(w.a,{id:"menu.download_pdf",defaultMessage:"Download PDF"})]}),Object(N.jsxs)(Me.a.Item,{onClick:e.eventHandlers.onDownloadPng,children:[Object(N.jsx)(k.a,{name:"download"}),Object(N.jsx)(w.a,{id:"menu.download_png",defaultMessage:"Download PNG"})]}),Object(N.jsxs)(Me.a.Item,{onClick:e.eventHandlers.onDownloadSvg,children:[Object(N.jsx)(k.a,{name:"download"}),Object(N.jsx)(w.a,{id:"menu.download_svg",defaultMessage:"Download SVG"})]}),Object(N.jsx)(Me.a.Divider,{})]})}}function n(t){if(!e.standalone)return null;switch(t){case Ke.LARGE:return e.showingChart?Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(Xe,Object(Ae.a)({menuType:Ee.Menu},e))}):Object(N.jsx)(Me.a,{trigger:Object(N.jsxs)("div",{children:[Object(N.jsx)(k.a,{name:"folder open"}),Object(N.jsx)(w.a,{id:"menu.open",defaultMessage:"Open"})]}),className:"item",children:Object(N.jsxs)(Me.a.Menu,{children:[Object(N.jsx)(Xe,Object(Ae.a)({menuType:Ee.Dropdown},e)),Object(N.jsx)(et,Object(Ae.a)({menuType:Ee.Dropdown},e))]})});case Ke.SMALL:return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Xe,Object(Ae.a)({menuType:Ee.Dropdown},e)),Object(N.jsx)(Me.a.Divider,{})]})}}return Object(_.g)(),Object(_.h)(),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(M.a,{as:Ce,greaterThanOrEqual:"large",attached:"top",inverted:!0,color:"blue",size:"large",children:Object(N.jsxs)(N.Fragment,{children:[n(Ke.LARGE),t(Ke.LARGE)]})}),Object(N.jsx)(M.a,{as:Ce,at:"small",attached:"top",inverted:!0,color:"blue",size:"large",children:Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(Me.a,{trigger:Object(N.jsx)("div",{children:Object(N.jsx)(k.a,{name:"sidebar"})}),className:"item",icon:null,children:Object(N.jsxs)(Me.a.Menu,{children:[n(Ke.SMALL),t(Ke.SMALL)]})})})})]})}!function(e){e[e.LARGE=0]="LARGE",e[e.SMALL=1]="SMALL"}(Ke||(Ke={}));var nt,rt,at,it=n(660);!function(e){e[e.NO_COLOR=0]="NO_COLOR",e[e.COLOR_BY_SEX=1]="COLOR_BY_SEX",e[e.COLOR_BY_GENERATION=2]="COLOR_BY_GENERATION"}(nt||(nt={})),function(e){e[e.HIDE=0]="HIDE",e[e.SHOW=1]="SHOW"}(rt||(rt={})),function(e){e[e.HIDE=0]="HIDE",e[e.SHOW=1]="SHOW"}(at||(at={}));var ot={color:nt.COLOR_BY_GENERATION,id:rt.SHOW,sex:at.SHOW},ct=new Map([["n",nt.NO_COLOR],["g",nt.COLOR_BY_GENERATION],["s",nt.COLOR_BY_SEX]]),st=new Map;ct.forEach((function(e,t){return st.set(e,t)}));var ut=new Map([["h",rt.HIDE],["s",rt.SHOW]]),lt=new Map;ut.forEach((function(e,t){return lt.set(e,t)}));var dt=new Map([["h",at.HIDE],["s",at.SHOW]]),ft=new Map;function mt(e){var t,n,r,a,i,o,c=function(t){var n=e[t];return"string"===typeof n?n:void 0};return{color:null!==(t=ct.get(null!==(n=c("c"))&&void 0!==n?n:""))&&void 0!==t?t:ot.color,id:null!==(r=ut.get(null!==(a=c("i"))&&void 0!==a?a:""))&&void 0!==r?r:ot.id,sex:null!==(i=dt.get(null!==(o=c("s"))&&void 0!==o?o:""))&&void 0!==i?i:ot.sex}}function gt(e){return Object(N.jsx)(Ze.a,{className:"details",children:Object(N.jsxs)(C.a.Group,{children:[Object(N.jsx)(C.a,{children:Object(N.jsxs)(C.a.Content,{children:[Object(N.jsx)(I.a,{sub:!0,children:Object(N.jsx)(w.a,{id:"config.colors",defaultMessage:"Colors"})}),Object(N.jsx)(Ze.a.Field,{className:"no-margin",children:Object(N.jsx)(it.a,{radio:!0,label:Object(N.jsx)(w.a,{tagName:"label",id:"config.colors.NO_COLOR",defaultMessage:"none"}),name:"checkboxRadioGroup",value:"none",checked:e.config.color===nt.NO_COLOR,onClick:function(){return e.onChange(Object(Ae.a)(Object(Ae.a)({},e.config),{},{color:nt.NO_COLOR}))}})}),Object(N.jsx)(Ze.a.Field,{className:"no-margin",children:Object(N.jsx)(it.a,{radio:!0,label:Object(N.jsx)(w.a,{tagName:"label",id:"config.colors.COLOR_BY_GENERATION",defaultMessage:"by generation"}),name:"checkboxRadioGroup",value:"generation",checked:e.config.color===nt.COLOR_BY_GENERATION,onClick:function(){return e.onChange(Object(Ae.a)(Object(Ae.a)({},e.config),{},{color:nt.COLOR_BY_GENERATION}))}})}),Object(N.jsx)(Ze.a.Field,{className:"no-margin",children:Object(N.jsx)(it.a,{radio:!0,label:Object(N.jsx)(w.a,{tagName:"label",id:"config.colors.COLOR_BY_SEX",defaultMessage:"by sex"}),name:"checkboxRadioGroup",value:"gender",checked:e.config.color===nt.COLOR_BY_SEX,onClick:function(){return e.onChange(Object(Ae.a)(Object(Ae.a)({},e.config),{},{color:nt.COLOR_BY_SEX}))}})})]})}),Object(N.jsx)(C.a,{children:Object(N.jsxs)(C.a.Content,{children:[Object(N.jsx)(I.a,{sub:!0,children:Object(N.jsx)(w.a,{id:"config.ids",defaultMessage:"IDs"})}),Object(N.jsx)(Ze.a.Field,{className:"no-margin",children:Object(N.jsx)(it.a,{radio:!0,label:Object(N.jsx)(w.a,{tagName:"label",id:"config.ids.HIDE",defaultMessage:"hide"}),name:"checkboxRadioGroup",value:"hide",checked:e.config.id===rt.HIDE,onClick:function(){return e.onChange(Object(Ae.a)(Object(Ae.a)({},e.config),{},{id:rt.HIDE}))}})}),Object(N.jsx)(Ze.a.Field,{className:"no-margin",children:Object(N.jsx)(it.a,{radio:!0,label:Object(N.jsx)(w.a,{tagName:"label",id:"config.ids.SHOW",defaultMessage:"show"}),name:"checkboxRadioGroup",value:"show",checked:e.config.id===rt.SHOW,onClick:function(){return e.onChange(Object(Ae.a)(Object(Ae.a)({},e.config),{},{id:rt.SHOW}))}})})]})}),Object(N.jsx)(C.a,{children:Object(N.jsxs)(C.a.Content,{children:[Object(N.jsx)(I.a,{sub:!0,children:Object(N.jsx)(w.a,{id:"config.sex",defaultMessage:"Sex"})}),Object(N.jsx)(Ze.a.Field,{className:"no-margin",children:Object(N.jsx)(it.a,{radio:!0,label:Object(N.jsx)(w.a,{tagName:"label",id:"config.sex.HIDE",defaultMessage:"hide"}),name:"checkboxRadioGroup",value:"hide",checked:e.config.sex===at.HIDE,onClick:function(){return e.onChange(Object(Ae.a)(Object(Ae.a)({},e.config),{},{sex:at.HIDE}))}})}),Object(N.jsx)(Ze.a.Field,{className:"no-margin",children:Object(N.jsx)(it.a,{radio:!0,label:Object(N.jsx)(w.a,{tagName:"label",id:"config.sex.SHOW",defaultMessage:"show"}),name:"checkboxRadioGroup",value:"show",checked:e.config.sex===at.SHOW,onClick:function(){return e.onChange(Object(Ae.a)(Object(Ae.a)({},e.config),{},{sex:at.SHOW}))}})})]})})]})})}dt.forEach((function(e,t){return ft.set(e,t)}));var jt,bt=n(79),Ot=n(162),ht=n(109),pt=n(268),vt=n(191),xt=(n(110),n(152));function wt(e,t){var n=Object(vt.a)("#svgContainer").node(),r=t.transform.k,a=Object(Ot.a)([0,(n.clientWidth-e[0]*r)/2]),i=Object(Ot.a)([0,(n.clientHeight-e[1]*r)/2]);Object(vt.a)("#chartSvg").attr("width",e[0]*r).attr("height",e[1]*r).attr("transform","translate(".concat(a,", ").concat(i,")")),Object(vt.a)("#chart").attr("transform","scale(".concat(r,")")),n.scrollLeft=-t.transform.x,n.scrollTop=-t.transform.y}function Et(){var e=Object(vt.a)("#svgContainer").node(),t=e.scrollLeft+e.clientWidth/2,n=e.scrollTop+e.clientHeight/2,r=Object(xt.b)(e).k;Object(vt.a)(e).call(Object(xt.a)().translateTo,t/r,n/r)}function _t(e){var t=new FileReader;return t.readAsDataURL(e),new Promise((function(e){t.onload=function(t){return e(t.target.result)}}))}function Rt(e){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(m.a)(f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.href.baseVal){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,fetch(n);case 6:return r=e.sent,e.next=9,r.blob();case 9:return a=e.sent,e.next=12,_t(a);case 12:t.href.baseVal=e.sent,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.warn("Failed to load image:",e.t0);case 18:case"end":return e.stop()}}),e,null,[[3,15]])})))).apply(this,arguments)}function Dt(e){return St.apply(this,arguments)}function St(){return(St=Object(m.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(t.getElementsByTagName("image")),e.next=3,Promise.all(n.map(Rt));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ct(e){var t=new Image;return t.src=URL.createObjectURL(e),new Promise((function(e){t.addEventListener("load",(function(){return e(t)}))}))}function It(e){var t=document.createElement("canvas");t.width=2*e.width,t.height=2*e.height;var n=t.getContext("2d"),r=n.fillStyle;return n.fillStyle="white",n.fillRect(0,0,t.width,t.height),n.fillStyle=r,n.drawImage(e,0,0,t.width,t.height),t}function At(e,t){return new Promise((function(n,r){e.toBlob((function(e){e?n(e):r()}),t)}))}function Mt(){var e=document.getElementById("chartSvg").cloneNode(!0);e.removeAttribute("transform");var t=Object(vt.a)("#svgContainer").node(),n=Object(xt.b)(t).k;return e.setAttribute("width",String(Number(e.getAttribute("width"))/n)),e.setAttribute("height",String(Number(e.getAttribute("height"))/n)),e.querySelector("#chart").removeAttribute("transform"),e}function Lt(){return kt.apply(this,arguments)}function kt(){return(kt=Object(m.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Mt(),e.next=3,Dt(t);case 3:return e.abrupt("return",(new XMLSerializer).serializeToString(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yt(){return(yt=Object(m.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lt();case 2:t=e.sent,n=new Blob([t],{type:"image/svg+xml"}),Object(pt.saveAs)(n,"genealogy.svg");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tt(){return Pt.apply(this,arguments)}function Pt(){return(Pt=Object(m.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lt();case 2:return t=e.sent,n=new Blob([t],{type:"image/svg+xml"}),e.t0=It,e.next=7,Ct(n);case 7:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gt(){return zt.apply(this,arguments)}function zt(){return(zt=Object(m.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tt();case 2:return t=e.sent,e.next=5,At(t,"image/png");case 5:n=e.sent,Object(pt.saveAs)(n,"genealogy.png");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ht(){return Bt.apply(this,arguments)}function Bt(){return(Bt=Object(m.a)(f.a.mark((function e(){var t,r,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(4).then(n.bind(null,1036));case 2:return t=e.sent,r=t.default,e.next=6,Tt();case 6:a=e.sent,(i=new r({orientation:a.width>a.height?"l":"p",unit:"pt",format:[a.width,a.height]})).addImage(a,"PNG",0,0,a.width,a.height,"NONE"),i.save("genealogy.pdf");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e[e.Hourglass=0]="Hourglass"}(jt||(jt={}));var Ft=new Map([[nt.NO_COLOR,x.ChartColors.NO_COLOR],[nt.COLOR_BY_GENERATION,x.ChartColors.COLOR_BY_GENERATION],[nt.COLOR_BY_SEX,x.ChartColors.COLOR_BY_SEX]]),Wt=function(){function e(){Object(Oe.a)(this,e),this.chart=void 0,this.animating=!1,this.rerenderRequired=!1,this.zoomBehavior=void 0,this.rerenderProps=void 0,this.rerenderResetPosition=void 0}return Object(he.a)(e,[{key:"zoom",value:function(e){var t=Object(vt.a)("#svgContainer");this.zoomBehavior.scaleBy(t,e)}},{key:"renderChart",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{initialRender:!1,resetPosition:!1};if(!r.initialRender&&this.animating)return this.rerenderRequired=!0,this.rerenderProps=e,void(this.rerenderResetPosition=r.resetPosition);if(r.initialRender||!e.freezeAnimation){r.initialRender?(Object(vt.a)("#chart").node().innerHTML="",this.chart=Object(x.createChart)({json:e.data,chartType:x.HourglassChart,renderer:x.DetailedRenderer,svgSelector:"#chart",indiCallback:function(t){return e.onSelection(t)},colors:Ft.get(e.colors),animate:!0,updateSvgSize:!1,locale:t.locale})):this.chart.setData(e.data);var a=this.chart.render({startIndi:e.selection.id,baseGeneration:e.selection.generation}),i=Object(vt.a)("#chartSvg"),o=Object(vt.a)("#svgContainer").node(),c=Object(xt.b)(o).k,s=Object(ht.a)([1,c,o.clientWidth/a.size[0],o.clientHeight/a.size[1]]),u=[Object(Ot.a)([.1,s]),2];this.zoomBehavior=Object(xt.a)().scaleExtent(u).translateExtent([[0,0],a.size]).on("zoom",(function(e){return wt(a.size,e)})),Object(vt.a)(o).on("scroll",Et).call(this.zoomBehavior);var l=function(e){return function(){var t=Object(bt.a)(o.scrollTop,e);return function(e){o.scrollTop=t(e)}}},d=function(e){return function(){var t=Object(bt.a)(o.scrollLeft,e);return function(e){o.scrollLeft=t(e)}}},f=o.clientWidth/2-a.origin[0]*c,m=o.clientHeight/2-a.origin[1]*c,g=Object(Ot.a)([0,(o.clientWidth-a.size[0]*c)/2]),j=Object(Ot.a)([0,(o.clientHeight-a.size[1]*c)/2]),b=i.transition().delay(200).duration(500),O=r.initialRender?i:b;O.attr("transform","translate(".concat(g,", ").concat(j,")")).attr("width",a.size[0]*c).attr("height",a.size[1]*c),r.resetPosition&&(r.initialRender?(o.scrollLeft=-f,o.scrollTop=-m):b.tween("scrollLeft",d(-f)).tween("scrollTop",l(-m))),this.animating=!0,a.animationPromise.then((function(){n.animating=!1,n.rerenderRequired&&(n.rerenderRequired=!1,n.renderChart(n.rerenderProps,t,{initialRender:!1,resetPosition:!!n.rerenderResetPosition}))}))}}}]),e}();function Ut(e){var t=Object(a.useRef)(new Wt),n=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current}(e),r=Object(E.a)();return Object(a.useEffect)((function(){if(n){var a=e.chartType!==(null===n||void 0===n?void 0:n.chartType)||e.colors!==(null===n||void 0===n?void 0:n.colors)||e.hideIds!==(null===n||void 0===n?void 0:n.hideIds)||e.hideSex!==(null===n||void 0===n?void 0:n.hideSex),i=e.chartType!==(null===n||void 0===n?void 0:n.chartType)||e.data!==n.data||e.selection!==n.selection;t.current.renderChart(e,r,{initialRender:a,resetPosition:i})}else t.current.renderChart(e,r,{initialRender:!0,resetPosition:!0})})),Object(N.jsxs)("div",{id:"svgContainer",children:[Object(N.jsxs)(Ce,{greaterThanOrEqual:"large",className:"zoom",children:[Object(N.jsx)("button",{className:"zoom-in",onClick:function(){return t.current.zoom(1.3)},children:"+"}),Object(N.jsx)("button",{className:"zoom-out",onClick:function(){return t.current.zoom(1/1.3)},children:"\u2212"})]}),Object(N.jsx)("svg",{id:"chartSvg",children:Object(N.jsx)("g",{id:"chart"})})]})}var Vt,Yt=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_STATIC_URL;function qt(e){return Object(N.jsxs)(z.a,{negative:!0,className:"error",children:[Object(N.jsx)(z.a.Header,{children:Object(N.jsx)(w.a,{id:"error.failed_to_load_file",defaultMessage:"Failed to load file"})}),Object(N.jsx)("p",{children:e.message})]})}function Jt(e){return Object(N.jsx)(_e.a,{open:e.open,onClose:e.onDismiss,children:Object(N.jsxs)(z.a,{negative:!0,className:"errorPopup",onDismiss:e.onDismiss,children:[Object(N.jsx)(z.a.Header,{children:Object(N.jsx)(w.a,{id:"error.error",defaultMessage:"Error"})}),Object(N.jsx)("p",{children:e.message})]})})}function Xt(e){var t=j.parse(e.search),n=function(e){return function(e,t){var n=t[e];return"string"===typeof n?n:void 0}(e,t)},a=n("view"),i=new Map([["hourglass",jt.Hourglass]]),o=n("file"),c=n("url"),s="true"===n("embedded"),u=void 0;Yt?u={source:r.GEDCOM_URL,url:Yt,handleCors:!1}:o?u={source:r.UPLOADED,hash:o,gedcom:e.state&&e.state.data,images:e.state&&e.state.images}:c?u={source:r.GEDCOM_URL,url:c,handleCors:"false"!==n("handleCors")}:s&&(u={source:r.EMBEDDED});var l=n("indi"),d=Number(n("gen"));return{sourceSpec:u,selection:l?{id:l,generation:isNaN(d)?0:d}:void 0,chartType:i.get(a)||jt.Hourglass,showSidePanel:"false"!==n("sidePanel"),standalone:"false"!==n("standalone")&&!s&&!Yt,freezeAnimation:"true"===n("freeze"),config:mt(t)}}!function(e){e[e.INITIAL=0]="INITIAL",e[e.LOADING=1]="LOADING",e[e.ERROR=2]="ERROR",e[e.SHOWING_CHART=3]="SHOWING_CHART",e[e.LOADING_MORE=4]="LOADING_MORE"}(Vt||(Vt={}));var Kt=n(374),Zt=n(650),Qt=(n(617),n(618),n(619),{de:o,fr:c,it:s,es:u,pl:l}),$t=navigator.language&&navigator.language.split(/[-_]/)[0],en=Object(Kt.a)();en&&"ie"===en.name?i.render(Object(N.jsx)("p",{children:"Genealogy Viewer does not support Internet Explorer. Please try a different (modern) browser."}),document.querySelector("#root")):i.render(Object(N.jsx)(Zt.a,{locale:$t,messages:Qt[$t],children:Object(N.jsxs)(Ie,{children:[Object(N.jsx)("style",{children:Se}),Object(N.jsx)(R.a,{children:Object(N.jsx)(_.b,{component:function(){var e=Object(a.useState)(Vt.INITIAL),t=Object(g.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(),c=Object(g.a)(o,2),s=c[0],u=c[1],l=Object(a.useState)(),d=Object(g.a)(l,2),b=d[0],O=d[1],h=Object(a.useState)(),v=Object(g.a)(h,2),x=v[0],w=v[1],R=Object(a.useState)(!1),D=Object(g.a)(R,2),S=D[0],C=D[1],I=Object(a.useState)(!0),A=Object(g.a)(I,2),M=A[0],L=A[1],k=Object(a.useState)(jt.Hourglass),T=Object(g.a)(k,2),P=T[0],G=T[1],z=Object(a.useState)(!1),H=Object(g.a)(z,2),B=H[0],F=H[1],W=Object(a.useState)(),U=Object(g.a)(W,2),V=U[0],Y=U[1],q=Object(a.useState)(!1),J=Object(g.a)(q,2),X=J[0],K=J[1],Z=Object(a.useState)(ot),Q=Object(g.a)(Z,2),$=Q[0],ee=Q[1],te=Object(E.a)(),ne=Object(_.g)(),re=Object(_.h)();function ae(e,t){if(void 0!==t){var n=e.id===rt.HIDE,r=e.sex===at.HIDE;Object(p.h)(t.chartData).forEach((function(e){e.hideId=n,e.hideSex=r}))}}var ie=new pe.b,oe=new pe.a,ce=new ve;function se(e,t){if(!V||V.source!==e.source)return!0;var n={spec:e,selection:t},a={spec:V,selection:b};switch(n.spec.source){case r.UPLOADED:return ie.isNewData(n,a,s);case r.GEDCOM_URL:return oe.isNewData(n,a,s);case r.EMBEDDED:return ce.isNewData(n,a,s)}}function ue(e,t){switch(e.source){case r.UPLOADED:return ie.loadData({spec:e,selection:t});case r.GEDCOM_URL:return oe.loadData({spec:e,selection:t});case r.EMBEDDED:return ce.loadData({spec:e,selection:t})}}function le(e){var t=j.parse(re.search);for(var n in e)t[n]=e[n];re.search=j.stringify(t),ne.push(re)}function de(e){le({indi:e.id,gen:e.generation})}function fe(e){F(!0),w(e)}function me(){return ge.apply(this,arguments)}function ge(){return(ge=Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ht();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),fe(te.formatMessage({id:"error.failed_pdf",defaultMessage:"Failed to generate PDF file. Please try with a smaller diagram or download an SVG file."}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function be(){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gt();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),fe(te.formatMessage({id:"error.failed_png",defaultMessage:"Failed to generate PNG file. Please try with a smaller diagram or download an SVG file."}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function he(){!function(){yt.apply(this,arguments)}()}function xe(){var e,t,n;de({id:(null===s||void 0===s||null===(e=s.chartData)||void 0===e||null===(t=e.indis)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.id)||"I0",generation:0})}function Ee(){F(!1)}function _e(){switch(n){case Vt.SHOWING_CHART:case Vt.LOADING_MORE:var e=Object(pe.c)(s.chartData,b),t=[{menuItem:te.formatMessage({id:"tab.info",defaultMessage:"Info"}),render:function(){return Object(N.jsx)(je,{gedcom:s.gedcom,indi:e.id})}},{menuItem:te.formatMessage({id:"tab.settings",defaultMessage:"Settings"}),render:function(){return Object(N.jsx)(gt,{config:$,onChange:function(e){ee(e),ae(e,s),le(function(e){return{c:st.get(e.color),i:lt.get(e.id),s:ft.get(e.sex)}}(e))}})}}];return Object(N.jsxs)("div",{id:"content",children:[Object(N.jsx)(Jt,{open:B,message:x,onDismiss:Ee}),n===Vt.LOADING_MORE?Object(N.jsx)(Re.a,{active:!0,size:"small",className:"loading-more"}):null,Object(N.jsx)(Ut,{data:s.chartData,selection:e,chartType:P,onSelection:de,freezeAnimation:X,colors:$.color,hideIds:$.id,hideSex:$.sex}),S?Object(N.jsx)(Ce,{greaterThanOrEqual:"large",className:"sidePanel",children:Object(N.jsx)(y.a,{panes:t})}):null]});case Vt.ERROR:return Object(N.jsx)(qt,{message:x});case Vt.INITIAL:case Vt.LOADING:return Object(N.jsx)(Re.a,{active:!0,size:"large"})}}return Object(a.useEffect)((function(){var e=document.getElementById("root");"/"===re.pathname?e.classList.add("bgLogo"):e.classList.remove("bgLogo"),Object(m.a)(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/view"===re.pathname){e.next=3;break}return n!==Vt.INITIAL&&i(Vt.INITIAL),e.abrupt("return");case 3:if((t=Xt(re)).sourceSpec){e.next=7;break}return ne.replace({pathname:"/"}),e.abrupt("return");case 7:if(n!==Vt.INITIAL&&!se(t.sourceSpec,t.selection)){e.next=30;break}return i(Vt.LOADING),Y(t.sourceSpec),O(t.selection),L(t.standalone),G(t.chartType),K(t.freezeAnimation),ee(t.config),e.prev=15,e.next=18,ue(t.sourceSpec,t.selection);case 18:r=e.sent,u(r),ae(t.config,r),C(t.showSidePanel),i(Vt.SHOWING_CHART),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(15),o=we(e.t0,te),w(o),i(Vt.ERROR);case 28:e.next=31;break;case 30:n!==Vt.SHOWING_CHART&&n!==Vt.LOADING_MORE||(G(t.chartType),i(Vt.SHOWING_CHART),a=t.selection,b&&b.id===a.id&&b.generation===a.generation||O(a));case 31:case"end":return e.stop()}var a,o}),e,null,[[15,25]])})))()})),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(_.b,{render:function(){return Object(N.jsx)(tt,{data:null===s||void 0===s?void 0:s.chartData,showingChart:"/view"===ne.location.pathname&&(n===Vt.SHOWING_CHART||n===Vt.LOADING_MORE),standalone:M,eventHandlers:{onSelection:de,onDownloadPdf:me,onDownloadPng:be,onDownloadSvg:he,onCenterView:xe}})}}),Yt?Object(N.jsxs)(_.d,{children:[Object(N.jsx)(_.b,{exact:!0,path:"/view",render:_e}),Object(N.jsx)(_.a,{to:"/view"})]}):Object(N.jsxs)(_.d,{children:[Object(N.jsx)(_.b,{exact:!0,path:"/view",render:_e}),Object(N.jsx)(_.a,{to:"/"})]})]})}})})]})}),document.querySelector("#root"))},64:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));n(40);var r=new Map([["abt","about"],["cal","calculated"],["est","estimated"]]);function a(e,t){var n=void 0!==e.day,a=void 0!==e.month,i=void 0!==e.year;if(!n&&!a&&!i)return e.text||"";var o=function(e){return new Date(void 0!==e.year?e.year:0,void 0!==e.month?e.month-1:0,void 0!==e.day?e.day:1)}(e),c={day:n?"numeric":void 0,month:a?"long":void 0,year:i?"numeric":void 0};return[function(e,t){var n=e&&e.toLowerCase();return n&&t.formatMessage({id:"date.".concat(n),defaultMessage:r.get(n)||n})||""}(e.qualifier,t),new Intl.DateTimeFormat(t.locale,c).format(o)].filter((function(e){return e})).join(" ")}function i(e,t){return e?e.date?a(e.date,t):e.dateRange?function(e,t){var n=e.from,r=e.to,i=n&&a(n,t),o=r&&a(r,t);return i&&o?t.formatMessage({id:"date.between",defaultMessage:"between {from} and {to}"},{from:i,to:o}):i?t.formatMessage({id:"date.after",defaultMessage:"after {from}"},{from:i}):o?t.formatMessage({id:"date.before",defaultMessage:"before {to}"},{to:o}):""}(e.dateRange,t):"":""}function o(e,t){return e&&e.year&&t&&t.year?e.year!==t.year?e.year-t.year:e.month&&t.month&&(e.month!==t.month||e.day&&t.day&&e.day!==t.day)?e.month-t.month:0:0}function c(e,t){return o(e&&(e.date||e.dateRange&&(e.dateRange.from||e.dateRange.to)),t&&(t.date||t.dateRange&&(t.dateRange.from||t.dateRange.to)))}},98:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return x})),n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return _}));var r=n(7),a=n(10),i=n.n(a),o=n(32),c=n(36),s=n(26),u=n(22),l=n(129),d=n(370),f=n.n(d);function m(e,t){return{id:t&&e.indis.some((function(e){return e.id===t.id}))?t.id:e.indis[0].id,generation:(null===t||void 0===t?void 0:t.generation)||0}}function g(e,t,n){var r=Object(u.a)(e,n||new Map),a=JSON.stringify(r);try{sessionStorage.setItem(t,a)}catch(i){console.warn("Failed to store data in session storage: "+i)}return r}function j(e){return b.apply(this,arguments)}function b(){return(b=Object(s.a)(i.a.mark((function t(n){var a,o,c,s,u,l,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=f.a,t.t1=e,t.next=4,n.arrayBuffer();case 4:t.t2=t.sent,t.t3=t.t1.from.call(t.t1,t.t2),a=new t.t0(t.t3),o=a.getEntries(),c=void 0,s=new Map,u=Object(r.a)(o);try{for(u.s();!(l=u.n()).done;)(d=l.value).entryName.endsWith(".ged")?c?console.warn("Multiple GEDCOM files found in zip archive."):c=d.getData().toString():s.set(d.entryName,URL.createObjectURL(new Blob([d.getData()])))}catch(i){u.e(i)}finally{u.f()}if(c){t.next=14;break}throw new Error("GEDCOM file not found in zip archive.");case 14:return t.abrupt("return",{gedcom:c,images:s});case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(e){return h.apply(this,arguments)}function h(){return(h=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.slice(0,2).text();case 2:if("PK"!==e.sent){e.next=5;break}return e.abrupt("return",j(t));case 5:return e.next=7,t.text();case 7:return e.t0=e.sent,e.t1=new Map,e.abrupt("return",{gedcom:e.t0,images:e.t1});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,t){return v.apply(this,arguments)}function v(){return(v=Object(s.a)(i.a.mark((function e(t,n){var r,a,o,c,s,u,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=sessionStorage.getItem(t))){e.next=4;break}return e.abrupt("return",JSON.parse(r));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn("Failed to load data from session storage: "+e.t0);case 9:return(a=t.match(/https:\/\/drive\.google\.com\/file\/d\/(.*)\/.*/))&&(t="https://drive.google.com/uc?id=".concat(a[1],"&export=download")),(o=t.match(/https:\/\/drive\.google\.com\/open\?id=([^&]*)&?.*/))&&(t="https://drive.google.com/uc?id=".concat(o[1],"&export=download")),c=n?"https://topolaproxy.bieda.it/"+t:t,e.next=16,window.fetch(c);case 16:if(200===(s=e.sent).status){e.next=19;break}throw new Error(s.statusText);case 19:return e.t1=O,e.next=22,s.blob();case 22:return e.t2=e.sent,e.next=25,(0,e.t1)(e.t2);case 25:return u=e.sent,l=u.gedcom,d=u.images,e.abrupt("return",g(l,t,d));case 29:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function x(e,t,n){return w.apply(this,arguments)}function w(){return(w=Object(s.a)(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a=sessionStorage.getItem(t))){e.next=4;break}return e.abrupt("return",JSON.parse(a));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn("Failed to load data from session storage: "+e.t0);case 9:if(n){e.next=11;break}throw new l.a("ERROR_LOADING_UPLOADED_FILE","Error loading data. Please upload your file again.");case 11:return e.abrupt("return",g(n,t,r));case 12:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var E=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,[{key:"isNewData",value:function(e,t,n){return e.spec.hash!==t.spec.hash}},{key:"loadData",value:function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x(t.spec.hash,t.spec.gedcom,t.spec.images);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),_=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,[{key:"isNewData",value:function(e,t,n){return e.spec.url!==t.spec.url}},{key:"loadData",value:function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p(t.spec.url,t.spec.handleCors);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}]),e}()}).call(this,n(21).Buffer)}},[[620,1,2]]]);
//# sourceMappingURL=main.f4ce13cb.chunk.js.map